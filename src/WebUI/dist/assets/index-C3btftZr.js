import{r as rr,a as ir,g as ar}from"./vendor-D3F3s8fL.js";import{r as c,R as or,I as Q,_ as K,L as Ft,M as lr,a as Zt,S as W,D as Es,A as vs,T as _e,C as U,F as b,b as L,B as $,s as I,c as q,d as We,e as me,f as xt,g as Yt,h as J,i as se,j as z,k as G,l as ct,P as Ee,m as Ae,n as Qe,o as Te,p as fe,q as ie,t as he,u as Gt,v as cr,w as dr,x as ur,y as hr,z as ls,E as Rt,G as yt,H as fr,J as Le,K as Ns,N as cs,O as Nt,Q as pr,U as mr,V as gr}from"./antd-AaRV-G9G.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ds={exports:{}},Dt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hs;function xr(){if(Hs)return Dt;Hs=1;var s=rr(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(d,l,h){var u,p={},_=null,f=null;h!==void 0&&(_=""+h),l.key!==void 0&&(_=""+l.key),l.ref!==void 0&&(f=l.ref);for(u in l)r.call(l,u)&&!a.hasOwnProperty(u)&&(p[u]=l[u]);if(d&&d.defaultProps)for(u in l=d.defaultProps,l)p[u]===void 0&&(p[u]=l[u]);return{$$typeof:e,type:d,key:_,ref:f,props:p,_owner:i.current}}return Dt.Fragment=n,Dt.jsx=o,Dt.jsxs=o,Dt}var Vs;function vr(){return Vs||(Vs=1,ds.exports=xr()),ds.exports}var t=vr(),Ht={},Ws;function yr(){if(Ws)return Ht;Ws=1;var s=ir();return Ht.createRoot=s.createRoot,Ht.hydrateRoot=s.hydrateRoot,Ht}var br=yr();const wr=ar(br);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bt(){return Bt=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},Bt.apply(this,arguments)}var qe;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(qe||(qe={}));const Qs="popstate";function jr(s){s===void 0&&(s={});function e(r,i){let{pathname:a,search:o,hash:d}=r.location;return ys("",{pathname:a,search:o,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xt(i)}return _r(e,n,null,s)}function te(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Sn(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Sr(){return Math.random().toString(36).substr(2,8)}function Ks(s,e){return{usr:s.state,key:s.key,idx:e}}function ys(s,e,n,r){return n===void 0&&(n=null),Bt({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?bt(e):e,{state:n,key:e&&e.key||r||Sr()})}function Xt(s){let{pathname:e="/",search:n="",hash:r=""}=s;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bt(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substr(n),s=s.substr(0,n));let r=s.indexOf("?");r>=0&&(e.search=s.substr(r),s=s.substr(0,r)),s&&(e.pathname=s)}return e}function _r(s,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,d=qe.Pop,l=null,h=u();h==null&&(h=0,o.replaceState(Bt({},o.state,{idx:h}),""));function u(){return(o.state||{idx:null}).idx}function p(){d=qe.Pop;let j=u(),A=j==null?null:j-h;h=j,l&&l({action:d,location:D.location,delta:A})}function _(j,A){d=qe.Push;let F=ys(D.location,j,A);h=u()+1;let P=Ks(F,h),T=D.createHref(F);try{o.pushState(P,"",T)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(T)}a&&l&&l({action:d,location:D.location,delta:1})}function f(j,A){d=qe.Replace;let F=ys(D.location,j,A);h=u();let P=Ks(F,h),T=D.createHref(F);o.replaceState(P,"",T),a&&l&&l({action:d,location:D.location,delta:0})}function E(j){let A=i.location.origin!=="null"?i.location.origin:i.location.href,F=typeof j=="string"?j:Xt(j);return F=F.replace(/ $/,"%20"),te(A,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,A)}let D={get action(){return d},get location(){return s(i,o)},listen(j){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Qs,p),l=j,()=>{i.removeEventListener(Qs,p),l=null}},createHref(j){return e(i,j)},createURL:E,encodeLocation(j){let A=E(j);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:_,replace:f,go(j){return o.go(j)}};return D}var Gs;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Gs||(Gs={}));function Cr(s,e,n){return n===void 0&&(n="/"),kr(s,e,n)}function kr(s,e,n,r){let i=typeof e=="string"?bt(e):e,a=As(i.pathname||"/",n);if(a==null)return null;let o=_n(s);Ir(o);let d=null;for(let l=0;d==null&&l<o.length;++l){let h=zr(a);d=Or(o[l],h)}return d}function _n(s,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,o,d)=>{let l={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(te(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let h=He([r,l.relativePath]),u=n.concat(l);a.children&&a.children.length>0&&(te(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),_n(a.children,e,u,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:Tr(h,a.index),routesMeta:u})};return s.forEach((a,o)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))i(a,o);else for(let l of Cn(a.path))i(a,o,l)}),e}function Cn(s){let e=s.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=Cn(r.join("/")),d=[];return d.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&d.push(...o),d.map(l=>s.startsWith("/")&&l===""?"/":l)}function Ir(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:$r(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Er=/^:[\w-]+$/,Ar=3,Pr=2,Rr=1,Dr=10,Mr=-2,Js=s=>s==="*";function Tr(s,e){let n=s.split("/"),r=n.length;return n.some(Js)&&(r+=Mr),e&&(r+=Pr),n.filter(i=>!Js(i)).reduce((i,a)=>i+(Er.test(a)?Ar:a===""?Rr:Dr),r)}function $r(s,e){return s.length===e.length&&s.slice(0,-1).every((r,i)=>r===e[i])?s[s.length-1]-e[e.length-1]:0}function Or(s,e,n){let{routesMeta:r}=s,i={},a="/",o=[];for(let d=0;d<r.length;++d){let l=r[d],h=d===r.length-1,u=a==="/"?e:e.slice(a.length)||"/",p=Fr({path:l.relativePath,caseSensitive:l.caseSensitive,end:h},u),_=l.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:He([a,p.pathname]),pathnameBase:Nr(He([a,p.pathnameBase])),route:_}),p.pathnameBase!=="/"&&(a=He([a,p.pathnameBase]))}return o}function Fr(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,r]=Br(s.path,s.caseSensitive,s.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((h,u,p)=>{let{paramName:_,isOptional:f}=u;if(_==="*"){let D=d[p]||"";o=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const E=d[p];return f&&!E?h[_]=void 0:h[_]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:s}}function Br(s,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Sn(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let r=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,l)=>(r.push({paramName:d,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(r.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zr(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sn(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function As(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=s.charAt(n);return r&&r!=="/"?null:s.slice(n)||"/"}function Lr(s,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof s=="string"?bt(s):s;return{pathname:n?n.startsWith("/")?n:Ur(n,e):e,search:Hr(r),hash:Vr(i)}}function Ur(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function us(s,e,n,r){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qr(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ps(s,e){let n=qr(s);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Rs(s,e,n,r){r===void 0&&(r=!1);let i;typeof s=="string"?i=bt(s):(i=Bt({},s),te(!i.pathname||!i.pathname.includes("?"),us("?","pathname","search",i)),te(!i.pathname||!i.pathname.includes("#"),us("#","pathname","hash",i)),te(!i.search||!i.search.includes("#"),us("#","search","hash",i)));let a=s===""||i.pathname==="",o=a?"/":i.pathname,d;if(o==null)d=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let _=o.split("/");for(;_[0]==="..";)_.shift(),p-=1;i.pathname=_.join("/")}d=p>=0?e[p]:"/"}let l=Lr(i,d),h=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(h||u)&&(l.pathname+="/"),l}const He=s=>s.join("/").replace(/\/\/+/g,"/"),Nr=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Hr=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Vr=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Wr(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const kn=["post","put","patch","delete"];new Set(kn);const Qr=["get",...kn];new Set(Qr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zt(){return zt=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},zt.apply(this,arguments)}const Ds=c.createContext(null),Kr=c.createContext(null),Ke=c.createContext(null),ns=c.createContext(null),Ge=c.createContext({outlet:null,matches:[],isDataRoute:!1}),In=c.createContext(null);function Gr(s,e){let{relative:n}=e===void 0?{}:e;wt()||te(!1);let{basename:r,navigator:i}=c.useContext(Ke),{hash:a,pathname:o,search:d}=An(s,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:He([r,o])),i.createHref({pathname:l,search:d,hash:a})}function wt(){return c.useContext(ns)!=null}function Oe(){return wt()||te(!1),c.useContext(ns).location}function En(s){c.useContext(Ke).static||c.useLayoutEffect(s)}function jt(){let{isDataRoute:s}=c.useContext(Ge);return s?li():Jr()}function Jr(){wt()||te(!1);let s=c.useContext(Ds),{basename:e,future:n,navigator:r}=c.useContext(Ke),{matches:i}=c.useContext(Ge),{pathname:a}=Oe(),o=JSON.stringify(Ps(i,n.v7_relativeSplatPath)),d=c.useRef(!1);return En(()=>{d.current=!0}),c.useCallback(function(h,u){if(u===void 0&&(u={}),!d.current)return;if(typeof h=="number"){r.go(h);return}let p=Rs(h,JSON.parse(o),a,u.relative==="path");s==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:He([e,p.pathname])),(u.replace?r.replace:r.push)(p,u.state,u)},[e,r,o,a,s])}function An(s,e){let{relative:n}=e===void 0?{}:e,{future:r}=c.useContext(Ke),{matches:i}=c.useContext(Ge),{pathname:a}=Oe(),o=JSON.stringify(Ps(i,r.v7_relativeSplatPath));return c.useMemo(()=>Rs(s,JSON.parse(o),a,n==="path"),[s,o,a,n])}function Zr(s,e){return Yr(s,e)}function Yr(s,e,n,r){wt()||te(!1);let{navigator:i}=c.useContext(Ke),{matches:a}=c.useContext(Ge),o=a[a.length-1],d=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let h=Oe(),u;if(e){var p;let j=typeof e=="string"?bt(e):e;l==="/"||(p=j.pathname)!=null&&p.startsWith(l)||te(!1),u=j}else u=h;let _=u.pathname||"/",f=_;if(l!=="/"){let j=l.replace(/^\//,"").split("/");f="/"+_.replace(/^\//,"").split("/").slice(j.length).join("/")}let E=Cr(s,{pathname:f}),D=ni(E&&E.map(j=>Object.assign({},j,{params:Object.assign({},d,j.params),pathname:He([l,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?l:He([l,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,n,r);return e&&D?c.createElement(ns.Provider,{value:{location:zt({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:qe.Pop}},D):D}function Xr(){let s=oi(),e=Wr(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},e),n?c.createElement("pre",{style:i},n):null,null)}const ei=c.createElement(Xr,null);class ti extends c.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?c.createElement(Ge.Provider,{value:this.props.routeContext},c.createElement(In.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function si(s){let{routeContext:e,match:n,children:r}=s,i=c.useContext(Ds);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),c.createElement(Ge.Provider,{value:e},r)}function ni(s,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),s==null){var a;if(!n)return null;if(n.errors)s=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let o=s,d=(i=n)==null?void 0:i.errors;if(d!=null){let u=o.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);u>=0||te(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let p=o[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=u),p.route.id){let{loaderData:_,errors:f}=n,E=p.route.loader&&_[p.route.id]===void 0&&(!f||f[p.route.id]===void 0);if(p.route.lazy||E){l=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((u,p,_)=>{let f,E=!1,D=null,j=null;n&&(f=d&&p.route.id?d[p.route.id]:void 0,D=p.route.errorElement||ei,l&&(h<0&&_===0?(ci("route-fallback"),E=!0,j=null):h===_&&(E=!0,j=p.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,_+1)),F=()=>{let P;return f?P=D:E?P=j:p.route.Component?P=c.createElement(p.route.Component,null):p.route.element?P=p.route.element:P=u,c.createElement(si,{match:p,routeContext:{outlet:u,matches:A,isDataRoute:n!=null},children:P})};return n&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?c.createElement(ti,{location:n.location,revalidation:n.revalidation,component:D,error:f,children:F(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):F()},null)}var Pn=(function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s})(Pn||{}),Rn=(function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s})(Rn||{});function ri(s){let e=c.useContext(Ds);return e||te(!1),e}function ii(s){let e=c.useContext(Kr);return e||te(!1),e}function ai(s){let e=c.useContext(Ge);return e||te(!1),e}function Dn(s){let e=ai(),n=e.matches[e.matches.length-1];return n.route.id||te(!1),n.route.id}function oi(){var s;let e=c.useContext(In),n=ii(),r=Dn();return e!==void 0?e:(s=n.errors)==null?void 0:s[r]}function li(){let{router:s}=ri(Pn.UseNavigateStable),e=Dn(Rn.UseNavigateStable),n=c.useRef(!1);return En(()=>{n.current=!0}),c.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?s.navigate(i):s.navigate(i,zt({fromRouteId:e},a)))},[s,e])}const Zs={};function ci(s,e,n){Zs[s]||(Zs[s]=!0)}function di(s,e){s?.v7_startTransition,s?.v7_relativeSplatPath}function bs(s){let{to:e,replace:n,state:r,relative:i}=s;wt()||te(!1);let{future:a,static:o}=c.useContext(Ke),{matches:d}=c.useContext(Ge),{pathname:l}=Oe(),h=jt(),u=Rs(e,Ps(d,a.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(u);return c.useEffect(()=>h(JSON.parse(p),{replace:n,state:r,relative:i}),[h,p,i,n,r]),null}function ce(s){te(!1)}function ui(s){let{basename:e="/",children:n=null,location:r,navigationType:i=qe.Pop,navigator:a,static:o=!1,future:d}=s;wt()&&te(!1);let l=e.replace(/^\/*/,"/"),h=c.useMemo(()=>({basename:l,navigator:a,static:o,future:zt({v7_relativeSplatPath:!1},d)}),[l,d,a,o]);typeof r=="string"&&(r=bt(r));let{pathname:u="/",search:p="",hash:_="",state:f=null,key:E="default"}=r,D=c.useMemo(()=>{let j=As(u,l);return j==null?null:{location:{pathname:j,search:p,hash:_,state:f,key:E},navigationType:i}},[l,u,p,_,f,E,i]);return D==null?null:c.createElement(Ke.Provider,{value:h},c.createElement(ns.Provider,{children:n,value:D}))}function Mn(s){let{children:e,location:n}=s;return Zr(ws(e),n)}new Promise(()=>{});function ws(s,e){e===void 0&&(e=[]);let n=[];return c.Children.forEach(s,(r,i)=>{if(!c.isValidElement(r))return;let a=[...e,i];if(r.type===c.Fragment){n.push.apply(n,ws(r.props.children,a));return}r.type!==ce&&te(!1),!r.props.index||!r.props.children||te(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ws(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function js(){return js=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},js.apply(this,arguments)}function hi(s,e){if(s==null)return{};var n={},r=Object.keys(s),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=s[i]);return n}function fi(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function pi(s,e){return s.button===0&&(!e||e==="_self")&&!fi(s)}const mi=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gi="6";try{window.__reactRouterVersion=gi}catch{}const xi="startTransition",Ys=or[xi];function vi(s){let{basename:e,children:n,future:r,window:i}=s,a=c.useRef();a.current==null&&(a.current=jr({window:i,v5Compat:!0}));let o=a.current,[d,l]=c.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},u=c.useCallback(p=>{h&&Ys?Ys(()=>l(p)):l(p)},[l,h]);return c.useLayoutEffect(()=>o.listen(u),[o,u]),c.useEffect(()=>di(r),[r]),c.createElement(ui,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:o,future:r})}const yi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bi=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tn=c.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:o,state:d,target:l,to:h,preventScrollReset:u,viewTransition:p}=e,_=hi(e,mi),{basename:f}=c.useContext(Ke),E,D=!1;if(typeof h=="string"&&bi.test(h)&&(E=h,yi))try{let P=new URL(window.location.href),T=h.startsWith("//")?new URL(P.protocol+h):new URL(h),C=As(T.pathname,f);T.origin===P.origin&&C!=null?h=C+T.search+T.hash:D=!0}catch{}let j=Gr(h,{relative:i}),A=wi(h,{replace:o,state:d,target:l,preventScrollReset:u,relative:i,viewTransition:p});function F(P){r&&r(P),P.defaultPrevented||A(P)}return c.createElement("a",js({},_,{href:E||j,onClick:D||a?r:F,ref:n,target:l}))});var Xs;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Xs||(Xs={}));var en;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(en||(en={}));function wi(s,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:d}=e===void 0?{}:e,l=jt(),h=Oe(),u=An(s,{relative:o});return c.useCallback(p=>{if(pi(p,n)){p.preventDefault();let _=r!==void 0?r:Xt(h)===Xt(u);l(s,{replace:_,state:i,preventScrollReset:a,relative:o,viewTransition:d})}},[h,l,u,r,i,n,s,a,o,d])}class rs{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Ms=typeof window>"u"||"Deno"in window;function je(){}function ji(s,e){return typeof s=="function"?s(e):s}function Si(s){return typeof s=="number"&&s>=0&&s!==1/0}function _i(s,e){return Math.max(s+(e||0)-Date.now(),0)}function Vt(s,e,n){return is(s)?typeof e=="function"?{...n,queryKey:s,queryFn:e}:{...e,queryKey:s}:s}function Ue(s,e,n){return is(s)?[{...e,queryKey:s},n]:[s||{},e]}function tn(s,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:d}=s;if(is(o)){if(r){if(e.queryHash!==Ts(o,e.options))return!1}else if(!es(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||typeof i<"u"&&i!==e.state.fetchStatus||a&&!a(e))}function sn(s,e){const{exact:n,fetching:r,predicate:i,mutationKey:a}=s;if(is(a)){if(!e.options.mutationKey)return!1;if(n){if(st(e.options.mutationKey)!==st(a))return!1}else if(!es(e.options.mutationKey,a))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function Ts(s,e){return(e?.queryKeyHashFn||st)(s)}function st(s){return JSON.stringify(s,(e,n)=>Ss(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function es(s,e){return $n(s,e)}function $n(s,e){return s===e?!0:typeof s!=typeof e?!1:s&&e&&typeof s=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!$n(s[n],e[n])):!1}function On(s,e){if(s===e)return s;const n=nn(s)&&nn(e);if(n||Ss(s)&&Ss(e)){const r=n?s.length:Object.keys(s).length,i=n?e:Object.keys(e),a=i.length,o=n?[]:{};let d=0;for(let l=0;l<a;l++){const h=n?l:i[l];o[h]=On(s[h],e[h]),o[h]===s[h]&&d++}return r===a&&d===r?s:o}return e}function nn(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Ss(s){if(!rn(s))return!1;const e=s.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!rn(n)||!n.hasOwnProperty("isPrototypeOf"))}function rn(s){return Object.prototype.toString.call(s)==="[object Object]"}function is(s){return Array.isArray(s)}function Fn(s){return new Promise(e=>{setTimeout(e,s)})}function an(s){Fn(0).then(s)}function Ci(){if(typeof AbortController=="function")return new AbortController}function ki(s,e,n){return n.isDataEqual!=null&&n.isDataEqual(s,e)?s:typeof n.structuralSharing=="function"?n.structuralSharing(s,e):n.structuralSharing!==!1?On(s,e):e}class Ii extends rs{constructor(){super(),this.setup=e=>{if(!Ms&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const _s=new Ii,on=["online","offline"];class Ei extends rs{constructor(){super(),this.setup=e=>{if(!Ms&&window.addEventListener){const n=()=>e();return on.forEach(r=>{window.addEventListener(r,n,!1)}),()=>{on.forEach(r=>{window.removeEventListener(r,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const ts=new Ei;function Ai(s){return Math.min(1e3*2**s,3e4)}function $s(s){return(s??"online")==="online"?ts.isOnline():!0}class Bn{constructor(e){this.revert=e?.revert,this.silent=e?.silent}}function hs(s){return s instanceof Bn}function zn(s){let e=!1,n=0,r=!1,i,a,o;const d=new Promise((j,A)=>{a=j,o=A}),l=j=>{r||(f(new Bn(j)),s.abort==null||s.abort())},h=()=>{e=!0},u=()=>{e=!1},p=()=>!_s.isFocused()||s.networkMode!=="always"&&!ts.isOnline(),_=j=>{r||(r=!0,s.onSuccess==null||s.onSuccess(j),i?.(),a(j))},f=j=>{r||(r=!0,s.onError==null||s.onError(j),i?.(),o(j))},E=()=>new Promise(j=>{i=A=>{const F=r||!p();return F&&j(A),F},s.onPause==null||s.onPause()}).then(()=>{i=void 0,r||s.onContinue==null||s.onContinue()}),D=()=>{if(r)return;let j;try{j=s.fn()}catch(A){j=Promise.reject(A)}Promise.resolve(j).then(_).catch(A=>{var F,P;if(r)return;const T=(F=s.retry)!=null?F:3,C=(P=s.retryDelay)!=null?P:Ai,S=typeof C=="function"?C(n,A):C,m=T===!0||typeof T=="number"&&n<T||typeof T=="function"&&T(n,A);if(e||!m){f(A);return}n++,s.onFail==null||s.onFail(n,A),Fn(S).then(()=>{if(p())return E()}).then(()=>{e?f(A):D()})})};return $s(s.networkMode)?D():E().then(D),{promise:d,cancel:l,continue:()=>i?.()?d:Promise.resolve(),cancelRetry:h,continueRetry:u}}const Os=console;function Pi(){let s=[],e=0,n=u=>{u()},r=u=>{u()};const i=u=>{let p;e++;try{p=u()}finally{e--,e||d()}return p},a=u=>{e?s.push(u):an(()=>{n(u)})},o=u=>(...p)=>{a(()=>{u(...p)})},d=()=>{const u=s;s=[],u.length&&an(()=>{r(()=>{u.forEach(p=>{n(p)})})})};return{batch:i,batchCalls:o,schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u}}}const ue=Pi();class Ln{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Si(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Ms?1/0:300*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Ri extends Ln{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Os,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||Di(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const r=ki(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),r}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(e),r?r.then(je).catch(je):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!_i(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var r,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var a;return(a=this.retryer)==null||a.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(E=>E.options.queryFn);f&&this.setOptions(f.options)}const o=Ci(),d={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};l(d);const h=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(d)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),u={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:h};if(l(u),(r=this.options.behavior)==null||r.onFetch(u),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=u.fetchOptions)==null?void 0:i.meta)){var p;this.dispatch({type:"fetch",meta:(p=u.fetchOptions)==null?void 0:p.meta})}const _=f=>{if(hs(f)&&f.silent||this.dispatch({type:"error",error:f}),!hs(f)){var E,D,j,A;(E=(D=this.cache.config).onError)==null||E.call(D,f,this),(j=(A=this.cache.config).onSettled)==null||j.call(A,this.state.data,f,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=zn({fn:u.fetchFn,abort:o?.abort.bind(o),onSuccess:f=>{var E,D,j,A;if(typeof f>"u"){_(new Error(this.queryHash+" data is undefined"));return}this.setData(f),(E=(D=this.cache.config).onSuccess)==null||E.call(D,f,this),(j=(A=this.cache.config).onSettled)==null||j.call(A,f,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:_,onFail:(f,E)=>{this.dispatch({type:"failed",failureCount:f,error:E})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=r=>{var i,a;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:$s(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(a=e.dataUpdatedAt)!=null?a:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return hs(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),ue.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function Di(s){const e=typeof s.initialData=="function"?s.initialData():s.initialData,n=typeof e<"u",r=n?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class Mi extends rs{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,r){var i;const a=n.queryKey,o=(i=n.queryHash)!=null?i:Ts(a,n);let d=this.get(o);return d||(d=new Ri({cache:this,logger:e.getLogger(),queryKey:a,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(d)),d}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){ue.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[r]=Ue(e,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(i=>tn(r,i))}findAll(e,n){const[r]=Ue(e,n);return Object.keys(r).length>0?this.queries.filter(i=>tn(r,i)):this.queries}notify(e){ue.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){ue.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){ue.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class Ti extends Ln{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Os,this.observers=[],this.state=e.state||$i(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var m;return this.retryer=zn({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(g,B)=>{this.dispatch({type:"failed",failureCount:g,error:B})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(m=this.options.retry)!=null?m:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,i,a,o,d,l,h,u;if(!n){var p,_,f,E;this.dispatch({type:"loading",variables:this.options.variables}),await((p=(_=this.mutationCache.config).onMutate)==null?void 0:p.call(_,this.state.variables,this));const g=await((f=(E=this.options).onMutate)==null?void 0:f.call(E,this.state.variables));g!==this.state.context&&this.dispatch({type:"loading",context:g,variables:this.state.variables})}const m=await e();return await((r=(i=this.mutationCache.config).onSuccess)==null?void 0:r.call(i,m,this.state.variables,this.state.context,this)),await((a=(o=this.options).onSuccess)==null?void 0:a.call(o,m,this.state.variables,this.state.context)),await((d=(l=this.mutationCache.config).onSettled)==null?void 0:d.call(l,m,null,this.state.variables,this.state.context,this)),await((h=(u=this.options).onSettled)==null?void 0:h.call(u,m,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:m}),m}catch(m){try{var D,j,A,F,P,T,C,S;throw await((D=(j=this.mutationCache.config).onError)==null?void 0:D.call(j,m,this.state.variables,this.state.context,this)),await((A=(F=this.options).onError)==null?void 0:A.call(F,m,this.state.variables,this.state.context)),await((P=(T=this.mutationCache.config).onSettled)==null?void 0:P.call(T,void 0,m,this.state.variables,this.state.context,this)),await((C=(S=this.options).onSettled)==null?void 0:C.call(S,void 0,m,this.state.variables,this.state.context)),m}finally{this.dispatch({type:"error",error:m})}}}dispatch(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!$s(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=n(this.state),ue.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function $i(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Oi extends rs{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,r){const i=new Ti({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){ue.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>sn(e,n))}findAll(e){return this.mutations.filter(n=>sn(e,n))}notify(e){ue.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(r=>r.state.isPaused);return ue.batch(()=>n.reduce((r,i)=>r.then(()=>i.continue().catch(je)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function Fi(){return{onFetch:s=>{s.fetchFn=()=>{var e,n,r,i,a,o;const d=(e=s.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,l=(r=s.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,h=l?.pageParam,u=l?.direction==="forward",p=l?.direction==="backward",_=((a=s.state.data)==null?void 0:a.pages)||[],f=((o=s.state.data)==null?void 0:o.pageParams)||[];let E=f,D=!1;const j=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>{var m;if((m=s.signal)!=null&&m.aborted)D=!0;else{var g;(g=s.signal)==null||g.addEventListener("abort",()=>{D=!0})}return s.signal}})},A=s.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+s.options.queryHash+"'")),F=(S,m,g,B)=>(E=B?[m,...E]:[...E,m],B?[g,...S]:[...S,g]),P=(S,m,g,B)=>{if(D)return Promise.reject("Cancelled");if(typeof g>"u"&&!m&&S.length)return Promise.resolve(S);const k={queryKey:s.queryKey,pageParam:g,meta:s.options.meta};j(k);const N=A(k);return Promise.resolve(N).then(Ce=>F(S,g,Ce,B))};let T;if(!_.length)T=P([]);else if(u){const S=typeof h<"u",m=S?h:ln(s.options,_);T=P(_,S,m)}else if(p){const S=typeof h<"u",m=S?h:Bi(s.options,_);T=P(_,S,m,!0)}else{E=[];const S=typeof s.options.getNextPageParam>"u";T=(d&&_[0]?d(_[0],0,_):!0)?P([],S,f[0]):Promise.resolve(F([],f[0],_[0]));for(let g=1;g<_.length;g++)T=T.then(B=>{if(d&&_[g]?d(_[g],g,_):!0){const N=S?f[g]:ln(s.options,B);return P(B,S,N)}return Promise.resolve(F(B,f[g],_[g]))})}return T.then(S=>({pages:S,pageParams:E}))}}}}function ln(s,e){return s.getNextPageParam==null?void 0:s.getNextPageParam(e[e.length-1],e)}function Bi(s,e){return s.getPreviousPageParam==null?void 0:s.getPreviousPageParam(e[0],e)}class zi{constructor(e={}){this.queryCache=e.queryCache||new Mi,this.mutationCache=e.mutationCache||new Oi,this.logger=e.logger||Os,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=_s.subscribe(()=>{_s.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=ts.subscribe(()=>{ts.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[r]=Ue(e,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state.data}ensureQueryData(e,n,r){const i=Vt(e,n,r),a=this.getQueryData(i.queryKey);return a?Promise.resolve(a):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.queryCache.find(e),a=i?.state.data,o=ji(n,a);if(typeof o>"u")return;const d=Vt(e),l=this.defaultQueryOptions(d);return this.queryCache.build(this,l).setData(o,{...r,manual:!0})}setQueriesData(e,n,r){return ue.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state}removeQueries(e,n){const[r]=Ue(e,n),i=this.queryCache;ue.batch(()=>{i.findAll(r).forEach(a=>{i.remove(a)})})}resetQueries(e,n,r){const[i,a]=Ue(e,n,r),o=this.queryCache,d={type:"active",...i};return ue.batch(()=>(o.findAll(i).forEach(l=>{l.reset()}),this.refetchQueries(d,a)))}cancelQueries(e,n,r){const[i,a={}]=Ue(e,n,r);typeof a.revert>"u"&&(a.revert=!0);const o=ue.batch(()=>this.queryCache.findAll(i).map(d=>d.cancel(a)));return Promise.all(o).then(je).catch(je)}invalidateQueries(e,n,r){const[i,a]=Ue(e,n,r);return ue.batch(()=>{var o,d;if(this.queryCache.findAll(i).forEach(h=>{h.invalidate()}),i.refetchType==="none")return Promise.resolve();const l={...i,type:(o=(d=i.refetchType)!=null?d:i.type)!=null?o:"active"};return this.refetchQueries(l,a)})}refetchQueries(e,n,r){const[i,a]=Ue(e,n,r),o=ue.batch(()=>this.queryCache.findAll(i).filter(l=>!l.isDisabled()).map(l=>{var h;return l.fetch(void 0,{...a,cancelRefetch:(h=a?.cancelRefetch)!=null?h:!0,meta:{refetchPage:i.refetchPage}})}));let d=Promise.all(o).then(je);return a!=null&&a.throwOnError||(d=d.catch(je)),d}fetchQuery(e,n,r){const i=Vt(e,n,r),a=this.defaultQueryOptions(i);typeof a.retry>"u"&&(a.retry=!1);const o=this.queryCache.build(this,a);return o.isStaleByTime(a.staleTime)?o.fetch(a):Promise.resolve(o.state.data)}prefetchQuery(e,n,r){return this.fetchQuery(e,n,r).then(je).catch(je)}fetchInfiniteQuery(e,n,r){const i=Vt(e,n,r);return i.behavior=Fi(),this.fetchQuery(i)}prefetchInfiniteQuery(e,n,r){return this.fetchInfiniteQuery(e,n,r).then(je).catch(je)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const r=this.queryDefaults.find(i=>st(e)===st(i.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(r=>es(e,r.queryKey));return n?.defaultOptions}setMutationDefaults(e,n){const r=this.mutationDefaults.find(i=>st(e)===st(i.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(r=>es(e,r.mutationKey));return n?.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e?.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=Ts(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e?.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}const cn=c.createContext(void 0),Li=c.createContext(!1);function Ui(s,e){return s||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=cn),window.ReactQueryClientContext):cn)}const qi=({client:s,children:e,context:n,contextSharing:r=!1})=>{c.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]);const i=Ui(n,r);return c.createElement(Li.Provider,{value:!n&&r},c.createElement(i.Provider,{value:s},e))},Un=c.createContext(void 0),St=()=>{const s=c.useContext(Un);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Ni=({children:s})=>{const[e,n]=c.useState(null),[r,i]=c.useState(null),[a,o]=c.useState(!0);c.useEffect(()=>{const p=localStorage.getItem("authToken"),_=localStorage.getItem("authUser");if(p&&_)try{i(p),n(JSON.parse(_))}catch{localStorage.removeItem("authToken"),localStorage.removeItem("authUser")}o(!1)},[]);const u={user:e,token:r,login:async(p,_)=>{const f=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:p,password:_})});if(!f.ok){const A=await f.json();throw new Error(A.message||"Login failed")}const E=await f.json(),{token:D,user:j}=E;i(D),n(j),localStorage.setItem("authToken",D),localStorage.setItem("authUser",JSON.stringify(j))},register:async(p,_,f,E="User")=>{const D=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:p,email:_,password:f,role:E})});if(!D.ok){const P=await D.json();throw new Error(P.message||"Registration failed")}const j=await D.json(),{token:A,user:F}=j;i(A),n(F),localStorage.setItem("authToken",A),localStorage.setItem("authUser",JSON.stringify(F))},logout:()=>{i(null),n(null),localStorage.removeItem("authToken"),localStorage.removeItem("authUser")},isAuthenticated:!!r&&!!e,isLoading:a};return t.jsx(Un.Provider,{value:u,children:s})},we=({children:s})=>{const{isAuthenticated:e,isLoading:n}=St(),r=Oe();return n?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"16px"},children:"Loading..."}):e?t.jsx(t.Fragment,{children:s}):t.jsx(bs,{to:"/login",state:{from:r},replace:!0})},Hi=({children:s})=>{const{user:e,isAuthenticated:n,isLoading:r}=St(),i=Oe();return r?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"16px"},children:"Loading..."}):n?e?.role!=="Administrator"?t.jsx(bs,{to:"/dashboard",replace:!0}):t.jsx(t.Fragment,{children:s}):t.jsx(bs,{to:"/login",state:{from:i},replace:!0})};var Vi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},Wi=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Vi}))},fs=c.forwardRef(Wi),Qi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},Ki=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Qi}))},Gi=c.forwardRef(Ki),Ji={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},Zi=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Ji}))},ps=c.forwardRef(Zi),Yi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-600-80h56c4.4 0 8-3.6 8-8V560c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V384c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v320c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V462c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v242c0 4.4 3.6 8 8 8zm152 0h56c4.4 0 8-3.6 8-8V304c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v400c0 4.4 3.6 8 8 8z"}}]},name:"bar-chart",theme:"outlined"},Xi=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Yi}))},qn=c.forwardRef(Xi),ea={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"},ta=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:ea}))},Fs=c.forwardRef(ta),sa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},na=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:sa}))},Ve=c.forwardRef(na),ra={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},ia=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:ra}))},aa=c.forwardRef(ia),oa={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},la=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:oa}))},Nn=c.forwardRef(la),ca={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M704 446H320c-4.4 0-8 3.6-8 8v402c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8V454c0-4.4-3.6-8-8-8zm-328 64h272v117H376V510zm272 290H376V683h272v117z"}},{tag:"path",attrs:{d:"M424 748a32 32 0 1064 0 32 32 0 10-64 0zm0-178a32 32 0 1064 0 32 32 0 10-64 0z"}},{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}}]},name:"cloud-server",theme:"outlined"},da=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:ca}))},Cs=c.forwardRef(da),ua={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},ha=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:ua}))},fa=c.forwardRef(ha),pa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M573 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40zm-280 0c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}},{tag:"path",attrs:{d:"M894 345a343.92 343.92 0 00-189-130v.1c-17.1-19-36.4-36.5-58-52.1-163.7-119-393.5-82.7-513 81-96.3 133-92.2 311.9 6 439l.8 132.6c0 3.2.5 6.4 1.5 9.4a31.95 31.95 0 0040.1 20.9L309 806c33.5 11.9 68.1 18.7 102.5 20.6l-.5.4c89.1 64.9 205.9 84.4 313 49l127.1 41.4c3.2 1 6.5 1.6 9.9 1.6 17.7 0 32-14.3 32-32V753c88.1-119.6 90.4-284.9 1-408zM323 735l-12-5-99 31-1-104-8-9c-84.6-103.2-90.2-251.9-11-361 96.4-132.2 281.2-161.4 413-66 132.2 96.1 161.5 280.6 66 412-80.1 109.9-223.5 150.5-348 102zm505-17l-8 10 1 104-98-33-12 5c-56 20.8-115.7 22.5-171 7l-.2-.1A367.31 367.31 0 00729 676c76.4-105.3 88.8-237.6 44.4-350.4l.6.4c23 16.5 44.1 37.1 62 62 72.6 99.6 68.5 235.2-8 330z"}},{tag:"path",attrs:{d:"M433 421c-23.1 0-41 17.9-41 40s17.9 40 41 40c21.1 0 39-17.9 39-40s-17.9-40-39-40z"}}]},name:"comment",theme:"outlined"},ma=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:pa}))},dn=c.forwardRef(ma),ga={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"},xa=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:ga}))},va=c.forwardRef(xa),ya={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},ba=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:ya}))},Ne=c.forwardRef(ba),wa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},ja=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:wa}))},Bs=c.forwardRef(ja),Sa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 472a40 40 0 1080 0 40 40 0 10-80 0zm367 352.9L696.3 352V178H768v-68H256v68h71.7v174L145 824.9c-2.8 7.4-4.3 15.2-4.3 23.1 0 35.3 28.7 64 64 64h614.6c7.9 0 15.7-1.5 23.1-4.3 33-12.7 49.4-49.8 36.6-82.8zM395.7 364.7V180h232.6v184.7L719.2 600c-20.7-5.3-42.1-8-63.9-8-61.2 0-119.2 21.5-165.3 60a188.78 188.78 0 01-121.3 43.9c-32.7 0-64.1-8.3-91.8-23.7l118.8-307.5zM210.5 844l41.7-107.8c35.7 18.1 75.4 27.8 116.6 27.8 61.2 0 119.2-21.5 165.3-60 33.9-28.2 76.3-43.9 121.3-43.9 35 0 68.4 9.5 97.6 27.1L813.5 844h-603z"}}]},name:"experiment",theme:"outlined"},_a=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Sa}))},un=c.forwardRef(_a),Ca={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"},ka=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Ca}))},Ia=c.forwardRef(ka),Ea={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M825.8 498L538.4 249.9c-10.7-9.2-26.4-.9-26.4 14v496.3c0 14.9 15.7 23.2 26.4 14L825.8 526c8.3-7.2 8.3-20.8 0-28zm-320 0L218.4 249.9c-10.7-9.2-26.4-.9-26.4 14v496.3c0 14.9 15.7 23.2 26.4 14L505.8 526c4.1-3.6 6.2-8.8 6.2-14 0-5.2-2.1-10.4-6.2-14z"}}]},name:"forward",theme:"outlined"},Aa=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Ea}))},ft=c.forwardRef(Aa),Pa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"},Ra=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Pa}))},it=c.forwardRef(Ra),Da={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM496 208H312c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 544h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H312c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm328 244a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"hdd",theme:"outlined"},Ma=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Da}))},hn=c.forwardRef(Ma),Ta={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"},$a=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Ta}))},fn=c.forwardRef($a),Oa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},Fa=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Oa}))},pt=c.forwardRef(Fa),Ba={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},za=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Ba}))},Lt=c.forwardRef(za),La={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},Ua=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:La}))},qa=c.forwardRef(Ua),Na={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},Ha=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Na}))},nt=c.forwardRef(Ha),Va={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},Wa=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Va}))},Hn=c.forwardRef(Wa),Qa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},Ka=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Qa}))},Jt=c.forwardRef(Ka),Ga={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},Ja=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Ga}))},Vn=c.forwardRef(Ja),Za={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"},Ya=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:Za}))},Xa=c.forwardRef(Ya),eo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},to=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:eo}))},so=c.forwardRef(to),no={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M567.1 512l318.5-319.3c5-5 1.5-13.7-5.6-13.7h-90.5c-2.1 0-4.2.8-5.6 2.3l-273.3 274-90.2-90.5c12.5-22.1 19.7-47.6 19.7-74.8 0-83.9-68.1-152-152-152s-152 68.1-152 152 68.1 152 152 152c27.7 0 53.6-7.4 75.9-20.3l90 90.3-90.1 90.3A151.04 151.04 0 00288 582c-83.9 0-152 68.1-152 152s68.1 152 152 152 152-68.1 152-152c0-27.2-7.2-52.7-19.7-74.8l90.2-90.5 273.3 274c1.5 1.5 3.5 2.3 5.6 2.3H880c7.1 0 10.7-8.6 5.6-13.7L567.1 512zM288 370c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80zm0 444c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]},name:"scissor",theme:"outlined"},ro=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:no}))},io=c.forwardRef(ro),ao={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},oo=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:ao}))},as=c.forwardRef(oo),lo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zm-40 376H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"unlock",theme:"outlined"},co=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:lo}))},uo=c.forwardRef(co),ho={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},fo=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:ho}))},$e=c.forwardRef(fo),po={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M723 620.5C666.8 571.6 593.4 542 513 542s-153.8 29.6-210.1 78.6a8.1 8.1 0 00-.8 11.2l36 42.9c2.9 3.4 8 3.8 11.4.9C393.1 637.2 450.3 614 513 614s119.9 23.2 163.5 61.5c3.4 2.9 8.5 2.5 11.4-.9l36-42.9c2.8-3.3 2.4-8.3-.9-11.2zm117.4-140.1C751.7 406.5 637.6 362 513 362s-238.7 44.5-327.5 118.4a8.05 8.05 0 00-1 11.3l36 42.9c2.8 3.4 7.9 3.8 11.2 1C308 472.2 406.1 434 513 434s205 38.2 281.2 101.6c3.4 2.8 8.4 2.4 11.2-1l36-42.9c2.8-3.4 2.4-8.5-1-11.3zm116.7-139C835.7 241.8 680.3 182 511 182c-168.2 0-322.6 59-443.7 157.4a8 8 0 00-1.1 11.4l36 42.9c2.8 3.3 7.8 3.8 11.1 1.1C222 306.7 360.3 254 511 254c151.8 0 291 53.5 400 142.7 3.4 2.8 8.4 2.3 11.2-1.1l36-42.9c2.9-3.4 2.4-8.5-1.1-11.3zM448 778a64 64 0 10128 0 64 64 0 10-128 0z"}}]},name:"wifi",theme:"outlined"},mo=function(e,n){return c.createElement(Q,K({},e,{ref:n,icon:po}))},go=c.forwardRef(mo);const{Sider:xo}=Ft,vo=({collapsed:s,setCollapsed:e})=>{const n=jt(),r=Oe(),{user:i}=St(),a=i?.role==="Administrator",o=[{key:"/",icon:t.jsx(va,{}),label:"Dashboard"},{key:"/servers",icon:t.jsx(Cs,{}),label:"Servers"},{key:"/domains",icon:t.jsx(it,{}),label:"Domains"},{key:"/emails",icon:t.jsx(nt,{}),label:"Emails"},{key:"/files",icon:t.jsx(Zt,{}),label:"File Manager"},{key:"/databases",icon:t.jsx(Ne,{}),label:"Databases"},{key:"/ssl-certificates",icon:t.jsx(Xa,{}),label:"SSL Certificates"},{key:"/monitoring",icon:t.jsx(qn,{}),label:"Monitoring"},{key:"/backups",icon:t.jsx(fa,{}),label:"Backups"},{key:"/alerts",icon:t.jsx(Fs,{}),label:"Alerts"},{type:"divider"},...a?[{key:"/users",icon:t.jsx($e,{}),label:"Users"}]:[],{key:"/settings",icon:t.jsx(as,{}),label:"Settings"}],d=({key:l})=>{n(l)};return t.jsxs(xo,{collapsible:!0,collapsed:s,onCollapse:e,style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},children:[t.jsx("div",{style:{height:32,margin:16,background:"rgba(255, 255, 255, 0.3)",borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center"},children:!s&&t.jsx("span",{style:{color:"white",fontWeight:"bold"},children:"SuperPanel"})}),t.jsx(lr,{theme:"dark",defaultSelectedKeys:["/"],selectedKeys:[r.pathname],mode:"inline",items:o,onClick:d})]})},{Header:yo}=Ft,bo=()=>{const{user:s,logout:e}=St(),n=jt(),r=[{key:"profile",icon:t.jsx($e,{}),label:"Profile"},{key:"settings",icon:t.jsx(as,{}),label:"Settings"},{type:"divider"},{key:"logout",icon:t.jsx(qa,{}),label:"Logout",danger:!0}],i=({key:a})=>{switch(a){case"logout":e(),n("/login");break}};return t.jsxs(yo,{style:{padding:"0 16px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",boxShadow:"0 1px 4px rgba(0,21,41,.08)"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center"},children:t.jsx("h2",{style:{margin:0,color:"#1890ff"},children:"SuperPanel"})}),t.jsxs(W,{size:"middle",children:[t.jsx(Fs,{style:{fontSize:"18px",cursor:"pointer"}}),t.jsx(Es,{menu:{items:r,onClick:i},placement:"bottomRight",children:t.jsxs(W,{style:{cursor:"pointer"},children:[t.jsx(vs,{size:"small",icon:t.jsx($e,{})}),t.jsx("span",{children:s?.username||"User"})]})})]})]})},{Title:wo}=_e,jo=()=>{const[s,e]=c.useState(!1),{login:n}=St(),r=jt(),a=Oe().state?.from?.pathname||"/dashboard",o=async d=>{e(!0);try{await n(d.username,d.password),I.success("Login successful!"),r(a,{replace:!0})}catch(l){I.error(l instanceof Error?l.message:"Login failed")}finally{e(!1)}};return t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"#f0f2f5",padding:"20px"},children:t.jsxs(U,{style:{width:"100%",maxWidth:"400px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[t.jsx(wo,{level:2,style:{margin:0,color:"#1890ff"},children:"SuperPanel"}),t.jsx("p",{style:{color:"#666",margin:"8px 0 0 0"},children:"Web Hosting Control Panel"})]}),t.jsxs(b,{name:"login",onFinish:o,autoComplete:"off",size:"large",children:[t.jsx(b.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"}],children:t.jsx(L,{prefix:t.jsx($e,{}),placeholder:"Username",autoFocus:!0})}),t.jsx(b.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:t.jsx(L.Password,{prefix:t.jsx(Lt,{}),placeholder:"Password"})}),t.jsx(b.Item,{children:t.jsx($,{type:"primary",htmlType:"submit",loading:s,block:!0,style:{height:"48px",fontSize:"16px"},children:s?"Signing In...":"Sign In"})})]}),t.jsx("div",{style:{textAlign:"center"},children:t.jsxs(W,{children:[t.jsx("span",{style:{color:"#666"},children:"Don't have an account?"}),t.jsx(Tn,{to:"/register",style:{color:"#1890ff"},children:"Sign up"})]})})]})})},{Title:So}=_e,{Option:pn}=q,_o=()=>{const[s,e]=c.useState(!1),{register:n}=St(),r=jt(),i=async a=>{if(a.password!==a.confirmPassword){I.error("Passwords do not match!");return}e(!0);try{await n(a.username,a.email,a.password,a.role||"User"),I.success("Registration successful! You are now logged in."),r("/dashboard")}catch(o){I.error(o instanceof Error?o.message:"Registration failed")}finally{e(!1)}};return t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"#f0f2f5",padding:"20px"},children:t.jsxs(U,{style:{width:"100%",maxWidth:"400px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[t.jsx(So,{level:2,style:{margin:0,color:"#1890ff"},children:"SuperPanel"}),t.jsx("p",{style:{color:"#666",margin:"8px 0 0 0"},children:"Create Your Account"})]}),t.jsxs(b,{name:"register",onFinish:i,autoComplete:"off",size:"large",children:[t.jsx(b.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"},{min:3,message:"Username must be at least 3 characters!"},{pattern:/^[a-zA-Z0-9_]+$/,message:"Username can only contain letters, numbers, and underscores!"}],children:t.jsx(L,{prefix:t.jsx($e,{}),placeholder:"Username",autoFocus:!0})}),t.jsx(b.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email!"}],children:t.jsx(L,{prefix:t.jsx(nt,{}),placeholder:"Email",type:"email"})}),t.jsx(b.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"Password must be at least 6 characters!"}],children:t.jsx(L.Password,{prefix:t.jsx(Lt,{}),placeholder:"Password"})}),t.jsx(b.Item,{name:"confirmPassword",rules:[{required:!0,message:"Please confirm your password!"}],children:t.jsx(L.Password,{prefix:t.jsx(Lt,{}),placeholder:"Confirm Password"})}),t.jsx(b.Item,{name:"role",initialValue:"User",children:t.jsxs(q,{placeholder:"Select role",children:[t.jsx(pn,{value:"User",children:"User"}),t.jsx(pn,{value:"Admin",children:"Admin"})]})}),t.jsx(b.Item,{children:t.jsx($,{type:"primary",htmlType:"submit",loading:s,block:!0,style:{height:"48px",fontSize:"16px"},children:s?"Creating Account...":"Create Account"})})]}),t.jsx("div",{style:{textAlign:"center"},children:t.jsxs(W,{children:[t.jsx("span",{style:{color:"#666"},children:"Already have an account?"}),t.jsx(Tn,{to:"/login",style:{color:"#1890ff"},children:"Sign in"})]})})]})})},Wn="",Co=s=>{if(s===""||s.startsWith("/")||s.startsWith("/"))return s;if(s&&!s.startsWith("https://"))throw new Error("Insecure URL detected. Only HTTPS connections are allowed.");return s};var pe=(s=>(s[s.Active=1]="Active",s[s.Inactive=2]="Inactive",s[s.Suspended=3]="Suspended",s[s.Expired=4]="Expired",s))(pe||{}),ee=(s=>(s.Active="Active",s.Inactive="Inactive",s.Suspended="Suspended",s.Corrupted="Corrupted",s))(ee||{}),Y=(s=>(s.Running="Running",s.Stopped="Stopped",s.Error="Error",s.Maintenance="Maintenance",s))(Y||{});class ko{baseUrl;getToken;constructor(e,n){this.baseUrl=Co(e),this.getToken=n}getHeaders(){const e={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","Cache-Control":"no-cache",Pragma:"no-cache"},n=this.getToken();return n&&(e.Authorization=`Bearer ${n}`),e}async handleResponse(e){if(!e.ok){const n=await e.text();throw new Error(`API Error: ${e.status} - ${n}`)}return e.status===204?{}:e.json()}async get(e){const n=await fetch(`${this.baseUrl}${e}`,{method:"GET",headers:this.getHeaders(),credentials:"same-origin",mode:"cors",cache:"no-cache"});return this.handleResponse(n)}async post(e,n){const r=await fetch(`${this.baseUrl}${e}`,{method:"POST",headers:this.getHeaders(),body:n?JSON.stringify(n):void 0,credentials:"same-origin",mode:"cors",cache:"no-cache"});return this.handleResponse(r)}async put(e,n){const r=await fetch(`${this.baseUrl}${e}`,{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(n),credentials:"same-origin",mode:"cors",cache:"no-cache"});return this.handleResponse(r)}async delete(e){const n=await fetch(`${this.baseUrl}${e}`,{method:"DELETE",headers:this.getHeaders(),credentials:"same-origin",mode:"cors",cache:"no-cache"});await this.handleResponse(n)}async patch(e,n){const r=await fetch(`${this.baseUrl}${e}`,{method:"PATCH",headers:this.getHeaders(),body:JSON.stringify(n),credentials:"same-origin",mode:"cors",cache:"no-cache"});return this.handleResponse(r)}}const Qn=()=>localStorage.getItem("authToken"),R=new ko(Wn,Qn),Me={getAll:()=>R.get("/api/servers"),getById:s=>R.get(`/api/servers/${s}`),create:s=>R.post("/api/servers",s),update:(s,e)=>R.put(`/api/servers/${s}`,e),delete:s=>R.delete(`/api/servers/${s}`),updateStatus:(s,e)=>R.patch(`/api/servers/${s}/status`,e),getSystemInfo:()=>R.get("/api/servers/system-info")},rt={getAll:()=>R.get("/api/domains"),getById:s=>R.get(`/api/domains/${s}`),getByServerId:s=>R.get(`/api/domains/server/${s}`),create:s=>R.post("/api/domains",s),update:(s,e)=>R.put(`/api/domains/${s}`,e),delete:s=>R.delete(`/api/domains/${s}`)},Be={browse:(s="/")=>R.get(`/api/files/browse?path=${encodeURIComponent(s)}`),getInfo:s=>R.get(`/api/files/info?path=${encodeURIComponent(s)}`),readFile:s=>R.get(`/api/files/content?filePath=${encodeURIComponent(s)}`),writeFile:(s,e)=>R.post("/api/files/content",{filePath:s,content:e}),deleteFile:s=>R.delete(`/api/files?filePath=${encodeURIComponent(s)}`),createDirectory:s=>R.post("/api/files/directory",{path:s}),deleteDirectory:s=>R.delete(`/api/files/directory?path=${encodeURIComponent(s)}`),move:(s,e)=>R.post("/api/files/move",{sourcePath:s,destinationPath:e}),copy:(s,e)=>R.post("/api/files/copy",{sourcePath:s,destinationPath:e})},Ot={getAll:()=>R.get("/api/databases"),getById:s=>R.get(`/api/databases/${s}`),getByServerId:s=>R.get(`/api/databases/server/${s}`),create:s=>R.post("/api/databases",s),update:(s,e)=>R.put(`/api/databases/${s}`,e),delete:s=>R.delete(`/api/databases/${s}`)},Io={getHealth:()=>R.get("/api/health"),getSystem:()=>R.get("/api/health/system"),getMockServers:()=>R.get("/api/health/mock-servers"),getMockDomains:()=>R.get("/api/health/mock-domains")},Eo={getStats:async()=>{try{return await R.get("/api/dashboard/stats")}catch(s){throw console.error("Failed to fetch dashboard stats:",s),s}}},Wt={getAll:()=>R.get("/api/users"),getById:s=>R.get(`/api/users/${s}`),create:s=>R.post("/api/users",s),update:(s,e)=>R.put(`/api/users/${s}`,e),delete:s=>R.delete(`/api/users/${s}`)},Mt={getAll:()=>R.get("/api/ssl-certificates"),getById:s=>R.get(`/api/ssl-certificates/${s}`),getByDomain:s=>R.get(`/api/ssl-certificates/domain/${s}`),getExpiringSoon:(s=30)=>R.get(`/api/ssl-certificates/expiring-soon?days=${s}`),request:s=>R.post("/api/ssl-certificates/request",s),install:(s,e)=>R.put(`/api/ssl-certificates/${s}/install`,e),renew:s=>R.put(`/api/ssl-certificates/${s}/renew`,{}),delete:s=>R.delete(`/api/ssl-certificates/${s}`)},ze={getAll:()=>R.get("/api/emails"),getById:s=>R.get(`/api/emails/${s}`),getByDomain:s=>R.get(`/api/emails/domain/${s}`),create:s=>R.post("/api/emails",s),update:(s,e)=>R.put(`/api/emails/${s}`,e),delete:s=>R.delete(`/api/emails/${s}`),addForwarder:(s,e)=>R.post(`/api/emails/${s}/forwarders`,e),deleteForwarder:s=>R.delete(`/api/emails/forwarders/${s}`),addAlias:(s,e)=>R.post(`/api/emails/${s}/aliases`,e),deleteAlias:s=>R.delete(`/api/emails/aliases/${s}`)},Ye={getAll:()=>R.get("/api/backups"),getById:s=>R.get(`/api/backups/${s}`),getByServerId:s=>R.get(`/api/backups/server/${s}`),getByDatabaseId:s=>R.get(`/api/backups/database/${s}`),getByDomainId:s=>R.get(`/api/backups/domain/${s}`),create:s=>R.post("/api/backups",s),delete:s=>R.delete(`/api/backups/${s}`),restore:(s,e)=>R.post(`/api/backups/${s}/restore`,e),download:async s=>{const e=await fetch(`${Wn}/api/backups/${s}/download`,{method:"GET",headers:{Authorization:`Bearer ${Qn()}`},credentials:"same-origin",mode:"cors"});if(!e.ok)throw new Error(`Download failed: ${e.status}`);return e.blob()},getLogs:s=>R.get(`/api/backups/${s}/logs`),getStats:()=>R.get("/api/backups/stats"),cancel:s=>R.post(`/api/backups/${s}/cancel`,{})},mt={getAll:()=>R.get("/api/backup-schedules"),getById:s=>R.get(`/api/backup-schedules/${s}`),create:s=>R.post("/api/backup-schedules",s),update:(s,e)=>R.put(`/api/backup-schedules/${s}`,e),delete:s=>R.delete(`/api/backup-schedules/${s}`),enable:s=>R.patch(`/api/backup-schedules/${s}/enable`,{}),disable:s=>R.patch(`/api/backup-schedules/${s}/disable`,{})},Tt={getAll:()=>R.get("/api/alertrules"),getById:s=>R.get(`/api/alertrules/${s}`),create:s=>R.post("/api/alertrules",s),update:(s,e)=>R.put(`/api/alertrules/${s}`,e),delete:s=>R.delete(`/api/alertrules/${s}`),test:s=>R.post(`/api/alertrules/${s}/test`,{})},De={getAll:(s,e)=>{const n=new URLSearchParams;s&&n.append("serverId",s.toString()),e&&n.append("status",e);const r=n.toString();return R.get(`/api/alerts${r?`?${r}`:""}`)},getById:s=>R.get(`/api/alerts/${s}`),create:s=>R.post("/api/alerts",s),acknowledge:s=>R.put(`/api/alerts/${s}/acknowledge`,{}),resolve:s=>R.put(`/api/alerts/${s}/resolve`,{}),acknowledgeWithComment:(s,e,n)=>R.put(`/api/alerts/${s}/acknowledge-with-comment`,{comment:e,user:n}),resolveWithComment:(s,e,n)=>R.put(`/api/alerts/${s}/resolve-with-comment`,{comment:e,user:n}),getHistory:s=>R.get(`/api/alerts/${s}/history`),getComments:s=>R.get(`/api/alerts/${s}/comments`),addComment:(s,e,n,r)=>R.post(`/api/alerts/${s}/comments`,{comment:e,commentType:n,user:r}),getStats:()=>R.get("/api/alerts/stats"),evaluate:()=>R.post("/api/alerts/evaluate",{}),delete:s=>R.delete(`/api/alerts/${s}`)};class at extends Error{constructor(e,n){const r=new.target.prototype;super(`${e}: Status code '${n}'`),this.statusCode=n,this.__proto__=r}}class zs extends Error{constructor(e="A timeout occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class Se extends Error{constructor(e="An abort occurred."){const n=new.target.prototype;super(e),this.__proto__=n}}class Ao extends Error{constructor(e,n){const r=new.target.prototype;super(e),this.transport=n,this.errorType="UnsupportedTransportError",this.__proto__=r}}class Po extends Error{constructor(e,n){const r=new.target.prototype;super(e),this.transport=n,this.errorType="DisabledTransportError",this.__proto__=r}}class Ro extends Error{constructor(e,n){const r=new.target.prototype;super(e),this.transport=n,this.errorType="FailedToStartTransportError",this.__proto__=r}}class mn extends Error{constructor(e){const n=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=n}}class Do extends Error{constructor(e,n){const r=new.target.prototype;super(e),this.innerErrors=n,this.__proto__=r}}class Kn{constructor(e,n,r){this.statusCode=e,this.statusText=n,this.content=r}}class os{get(e,n){return this.send({...n,method:"GET",url:e})}post(e,n){return this.send({...n,method:"POST",url:e})}delete(e,n){return this.send({...n,method:"DELETE",url:e})}getCookieString(e){return""}}var w;(function(s){s[s.Trace=0]="Trace",s[s.Debug=1]="Debug",s[s.Information=2]="Information",s[s.Warning=3]="Warning",s[s.Error=4]="Error",s[s.Critical=5]="Critical",s[s.None=6]="None"})(w||(w={}));class Ut{constructor(){}log(e,n){}}Ut.instance=new Ut;const Mo="9.0.6";class ne{static isRequired(e,n){if(e==null)throw new Error(`The '${n}' argument is required.`)}static isNotEmpty(e,n){if(!e||e.match(/^\s*$/))throw new Error(`The '${n}' argument should not be empty.`)}static isIn(e,n,r){if(!(e in n))throw new Error(`Unknown ${r} value: ${e}.`)}}class X{static get isBrowser(){return!X.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!X.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!X.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function qt(s,e){let n="";return lt(s)?(n=`Binary data of length ${s.byteLength}`,e&&(n+=`. Content: '${To(s)}'`)):typeof s=="string"&&(n=`String data of length ${s.length}`,e&&(n+=`. Content: '${s}'`)),n}function To(s){const e=new Uint8Array(s);let n="";return e.forEach(r=>{const i=r<16?"0":"";n+=`0x${i}${r.toString(16)} `}),n.substr(0,n.length-1)}function lt(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}async function Gn(s,e,n,r,i,a){const o={},[d,l]=vt();o[d]=l,s.log(w.Trace,`(${e} transport) sending data. ${qt(i,a.logMessageContent)}.`);const h=lt(i)?"arraybuffer":"text",u=await n.post(r,{content:i,headers:{...o,...a.headers},responseType:h,timeout:a.timeout,withCredentials:a.withCredentials});s.log(w.Trace,`(${e} transport) request complete. Response status: ${u.statusCode}.`)}function $o(s){return s===void 0?new ss(w.Information):s===null?Ut.instance:s.log!==void 0?s:new ss(s)}class Oo{constructor(e,n){this._subject=e,this._observer=n}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(n=>{})}}class ss{constructor(e){this._minLevel=e,this.out=console}log(e,n){if(e>=this._minLevel){const r=`[${new Date().toISOString()}] ${w[e]}: ${n}`;switch(e){case w.Critical:case w.Error:this.out.error(r);break;case w.Warning:this.out.warn(r);break;case w.Information:this.out.info(r);break;default:this.out.log(r);break}}}}function vt(){let s="X-SignalR-User-Agent";return X.isNode&&(s="User-Agent"),[s,Fo(Mo,Bo(),Lo(),zo())]}function Fo(s,e,n,r){let i="Microsoft SignalR/";const a=s.split(".");return i+=`${a[0]}.${a[1]}`,i+=` (${s}; `,e&&e!==""?i+=`${e}; `:i+="Unknown OS; ",i+=`${n}`,r?i+=`; ${r}`:i+="; Unknown Runtime Version",i+=")",i}function Bo(){if(X.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function zo(){if(X.isNode)return process.versions.node}function Lo(){return X.isNode?"NodeJS":"Browser"}function ms(s){return s.stack?s.stack:s.message?s.message:`${s}`}function Uo(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}class qo extends os{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||X.isNode){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(n("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=n("node-fetch"):this._fetchType=fetch,this._fetchType=n("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Uo());if(typeof AbortController>"u"){const n=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=n("abort-controller")}else this._abortControllerType=AbortController}async send(e){if(e.abortSignal&&e.abortSignal.aborted)throw new Se;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const n=new this._abortControllerType;let r;e.abortSignal&&(e.abortSignal.onabort=()=>{n.abort(),r=new Se});let i=null;if(e.timeout){const l=e.timeout;i=setTimeout(()=>{n.abort(),this._logger.log(w.Warning,"Timeout from HTTP request."),r=new zs},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},lt(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let a;try{a=await this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:n.signal})}catch(l){throw r||(this._logger.log(w.Warning,`Error from HTTP request. ${l}.`),l)}finally{i&&clearTimeout(i),e.abortSignal&&(e.abortSignal.onabort=null)}if(!a.ok){const l=await gn(a,"text");throw new at(l||a.statusText,a.status)}const d=await gn(a,e.responseType);return new Kn(a.status,a.statusText,d)}getCookieString(e){let n="";return X.isNode&&this._jar&&this._jar.getCookies(e,(r,i)=>n=i.join("; ")),n}}function gn(s,e){let n;switch(e){case"arraybuffer":n=s.arrayBuffer();break;case"text":n=s.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:n=s.text();break}return n}class No extends os{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Se):e.method?e.url?new Promise((n,r)=>{const i=new XMLHttpRequest;i.open(e.method,e.url,!0),i.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(lt(e.content)?i.setRequestHeader("Content-Type","application/octet-stream"):i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const a=e.headers;a&&Object.keys(a).forEach(o=>{i.setRequestHeader(o,a[o])}),e.responseType&&(i.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),r(new Se)}),e.timeout&&(i.timeout=e.timeout),i.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),i.status>=200&&i.status<300?n(new Kn(i.status,i.statusText,i.response||i.responseText)):r(new at(i.response||i.responseText||i.statusText,i.status))},i.onerror=()=>{this._logger.log(w.Warning,`Error from HTTP request. ${i.status}: ${i.statusText}.`),r(new at(i.statusText,i.status))},i.ontimeout=()=>{this._logger.log(w.Warning,"Timeout from HTTP request."),r(new zs)},i.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Ho extends os{constructor(e){if(super(),typeof fetch<"u"||X.isNode)this._httpClient=new qo(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new No(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Se):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}class ve{static write(e){return`${e}${ve.RecordSeparator}`}static parse(e){if(e[e.length-1]!==ve.RecordSeparator)throw new Error("Message is incomplete.");const n=e.split(ve.RecordSeparator);return n.pop(),n}}ve.RecordSeparatorCode=30;ve.RecordSeparator=String.fromCharCode(ve.RecordSeparatorCode);class Vo{writeHandshakeRequest(e){return ve.write(JSON.stringify(e))}parseHandshakeResponse(e){let n,r;if(lt(e)){const d=new Uint8Array(e),l=d.indexOf(ve.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");const h=l+1;n=String.fromCharCode.apply(null,Array.prototype.slice.call(d.slice(0,h))),r=d.byteLength>h?d.slice(h).buffer:null}else{const d=e,l=d.indexOf(ve.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");const h=l+1;n=d.substring(0,h),r=d.length>h?d.substring(h):null}const i=ve.parse(n),a=JSON.parse(i[0]);if(a.type)throw new Error("Expected a handshake response from the server.");return[r,a]}}var H;(function(s){s[s.Invocation=1]="Invocation",s[s.StreamItem=2]="StreamItem",s[s.Completion=3]="Completion",s[s.StreamInvocation=4]="StreamInvocation",s[s.CancelInvocation=5]="CancelInvocation",s[s.Ping=6]="Ping",s[s.Close=7]="Close",s[s.Ack=8]="Ack",s[s.Sequence=9]="Sequence"})(H||(H={}));class Wo{constructor(){this.observers=[]}next(e){for(const n of this.observers)n.next(e)}error(e){for(const n of this.observers)n.error&&n.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Oo(this,e)}}class Qo{constructor(e,n,r){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=n,this._bufferSize=r}async _send(e){const n=this._protocol.writeMessage(e);let r=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let i=()=>{},a=()=>{};lt(n)?this._bufferedByteCount+=n.byteLength:this._bufferedByteCount+=n.length,this._bufferedByteCount>=this._bufferSize&&(r=new Promise((o,d)=>{i=o,a=d})),this._messages.push(new Ko(n,this._totalMessageCount,i,a))}try{this._reconnectInProgress||await this._connection.send(n)}catch{this._disconnected()}await r}_ack(e){let n=-1;for(let r=0;r<this._messages.length;r++){const i=this._messages[r];if(i._id<=e.sequenceId)n=r,lt(i._message)?this._bufferedByteCount-=i._message.byteLength:this._bufferedByteCount-=i._message.length,i._resolver();else if(this._bufferedByteCount<this._bufferSize)i._resolver();else break}n!==-1&&(this._messages=this._messages.slice(n+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==H.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;const n=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,n<=this._latestReceivedSequenceId?(n===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=n,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:H.Sequence,sequenceId:e}));const n=this._messages;for(const r of n)await this._connection.send(r._message);this._reconnectInProgress=!1}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(const n of this._messages)n._rejector(e)}_isInvocationMessage(e){switch(e.type){case H.Invocation:case H.StreamItem:case H.Completion:case H.StreamInvocation:case H.CancelInvocation:return!0;case H.Close:case H.Sequence:case H.Ping:case H.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:H.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class Ko{constructor(e,n,r,i){this._message=e,this._id=n,this._resolver=r,this._rejector=i}}const Go=30*1e3,Jo=15*1e3,Zo=1e5;var Z;(function(s){s.Disconnected="Disconnected",s.Connecting="Connecting",s.Connected="Connected",s.Disconnecting="Disconnecting",s.Reconnecting="Reconnecting"})(Z||(Z={}));class Ls{static create(e,n,r,i,a,o,d){return new Ls(e,n,r,i,a,o,d)}constructor(e,n,r,i,a,o,d){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(w.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},ne.isRequired(e,"connection"),ne.isRequired(n,"logger"),ne.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=a??Go,this.keepAliveIntervalInMilliseconds=o??Jo,this._statefulReconnectBufferSize=d??Zo,this._logger=n,this._protocol=r,this.connection=e,this._reconnectPolicy=i,this._handshakeProtocol=new Vo,this.connection.onreceive=l=>this._processIncomingData(l),this.connection.onclose=l=>this._connectionClosed(l),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Z.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:H.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==Z.Disconnected&&this._connectionState!==Z.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==Z.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=Z.Connecting,this._logger.log(w.Debug,"Starting HubConnection.");try{await this._startInternal(),X.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=Z.Connected,this._connectionStarted=!0,this._logger.log(w.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=Z.Disconnected,this._logger.log(w.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const e=new Promise((n,r)=>{this._handshakeResolver=n,this._handshakeRejecter=r});await this.connection.start(this._protocol.transferFormat);try{let n=this._protocol.version;this.connection.features.reconnect||(n=1);const r={protocol:this._protocol.name,version:n};if(this._logger.log(w.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(r)),this._logger.log(w.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Qo(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(n){throw this._logger.log(w.Debug,`Hub handshake failed with error '${n}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(n),n}}async stop(){const e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await e}catch{}}_stopInternal(e){if(this._connectionState===Z.Disconnected)return this._logger.log(w.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===Z.Disconnecting)return this._logger.log(w.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const n=this._connectionState;return this._connectionState=Z.Disconnecting,this._logger.log(w.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(w.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(n===Z.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Se("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(e,...n){const[r,i]=this._replaceStreamingParams(n),a=this._createStreamInvocation(e,n,i);let o;const d=new Wo;return d.cancelCallback=()=>{const l=this._createCancelInvocation(a.invocationId);return delete this._callbacks[a.invocationId],o.then(()=>this._sendWithProtocol(l))},this._callbacks[a.invocationId]=(l,h)=>{if(h){d.error(h);return}else l&&(l.type===H.Completion?l.error?d.error(new Error(l.error)):d.complete():d.next(l.item))},o=this._sendWithProtocol(a).catch(l=>{d.error(l),delete this._callbacks[a.invocationId]}),this._launchStreams(r,o),d}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...n){const[r,i]=this._replaceStreamingParams(n),a=this._sendWithProtocol(this._createInvocation(e,n,!0,i));return this._launchStreams(r,a),a}invoke(e,...n){const[r,i]=this._replaceStreamingParams(n),a=this._createInvocation(e,n,!1,i);return new Promise((d,l)=>{this._callbacks[a.invocationId]=(u,p)=>{if(p){l(p);return}else u&&(u.type===H.Completion?u.error?l(new Error(u.error)):d(u.result):l(new Error(`Unexpected message type: ${u.type}`)))};const h=this._sendWithProtocol(a).catch(u=>{l(u),delete this._callbacks[a.invocationId]});this._launchStreams(r,h)})}on(e,n){!e||!n||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(n)===-1&&this._methods[e].push(n))}off(e,n){if(!e)return;e=e.toLowerCase();const r=this._methods[e];if(r)if(n){const i=r.indexOf(n);i!==-1&&(r.splice(i,1),r.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const n=this._protocol.parseMessages(e,this._logger);for(const r of n)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(r)))switch(r.type){case H.Invocation:this._invokeClientMethod(r).catch(i=>{this._logger.log(w.Error,`Invoke client method threw error: ${ms(i)}`)});break;case H.StreamItem:case H.Completion:{const i=this._callbacks[r.invocationId];if(i){r.type===H.Completion&&delete this._callbacks[r.invocationId];try{i(r)}catch(a){this._logger.log(w.Error,`Stream callback threw error: ${ms(a)}`)}}break}case H.Ping:break;case H.Close:{this._logger.log(w.Information,"Close message received from server.");const i=r.error?new Error("Server returned an error on close: "+r.error):void 0;r.allowReconnect===!0?this.connection.stop(i):this._stopPromise=this._stopInternal(i);break}case H.Ack:this._messageBuffer&&this._messageBuffer._ack(r);break;case H.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(r);break;default:this._logger.log(w.Warning,`Invalid message type: ${r.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let n,r;try{[r,n]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(i){const a="Error parsing handshake response: "+i;this._logger.log(w.Error,a);const o=new Error(a);throw this._handshakeRejecter(o),o}if(n.error){const i="Server returned handshake error: "+n.error;this._logger.log(w.Error,i);const a=new Error(i);throw this._handshakeRejecter(a),a}else this._logger.log(w.Debug,"Server handshake complete.");return this._handshakeResolver(),r}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===Z.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}},e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(e){const n=e.target.toLowerCase(),r=this._methods[n];if(!r){this._logger.log(w.Warning,`No client method with the name '${n}' found.`),e.invocationId&&(this._logger.log(w.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}const i=r.slice(),a=!!e.invocationId;let o,d,l;for(const h of i)try{const u=o;o=await h.apply(this,e.arguments),a&&o&&u&&(this._logger.log(w.Error,`Multiple results provided for '${n}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),d=void 0}catch(u){d=u,this._logger.log(w.Error,`A callback for the method '${n}' threw error '${u}'.`)}l?await this._sendWithProtocol(l):a?(d?l=this._createCompletionMessage(e.invocationId,`${d}`,null):o!==void 0?l=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(w.Warning,`No result given for '${n}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(l)):o&&this._logger.log(w.Error,`Result given for '${n}' method but server is not expecting a result.`)}_connectionClosed(e){this._logger.log(w.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Se("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Z.Disconnecting?this._completeClose(e):this._connectionState===Z.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===Z.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=Z.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),X.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(n=>n.apply(this,[e]))}catch(n){this._logger.log(w.Error,`An onclose callback called with error '${e}' threw error '${n}'.`)}}}async _reconnect(e){const n=Date.now();let r=0,i=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),a=this._getNextRetryDelay(r++,0,i);if(a===null){this._logger.log(w.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=Z.Reconnecting,e?this._logger.log(w.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(w.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(o=>o.apply(this,[e]))}catch(o){this._logger.log(w.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==Z.Reconnecting){this._logger.log(w.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;a!==null;){if(this._logger.log(w.Information,`Reconnect attempt number ${r} will start in ${a} ms.`),await new Promise(o=>{this._reconnectDelayHandle=setTimeout(o,a)}),this._reconnectDelayHandle=void 0,this._connectionState!==Z.Reconnecting){this._logger.log(w.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=Z.Connected,this._logger.log(w.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(o=>o.apply(this,[this.connection.connectionId]))}catch(o){this._logger.log(w.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(w.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==Z.Reconnecting){this._logger.log(w.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===Z.Disconnecting&&this._completeClose();return}i=o instanceof Error?o:new Error(o.toString()),a=this._getNextRetryDelay(r++,Date.now()-n,i)}}this._logger.log(w.Information,`Reconnect retries have been exhausted after ${Date.now()-n} ms and ${r} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(e,n,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:n,previousRetryCount:e,retryReason:r})}catch(i){return this._logger.log(w.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${n}) threw error '${i}'.`),null}}_cancelCallbacksWithError(e){const n=this._callbacks;this._callbacks={},Object.keys(n).forEach(r=>{const i=n[r];try{i(null,e)}catch(a){this._logger.log(w.Error,`Stream 'error' callback called with '${e}' threw error: ${ms(a)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,n,r,i){if(r)return i.length!==0?{target:e,arguments:n,streamIds:i,type:H.Invocation}:{target:e,arguments:n,type:H.Invocation};{const a=this._invocationId;return this._invocationId++,i.length!==0?{target:e,arguments:n,invocationId:a.toString(),streamIds:i,type:H.Invocation}:{target:e,arguments:n,invocationId:a.toString(),type:H.Invocation}}}_launchStreams(e,n){if(e.length!==0){n||(n=Promise.resolve());for(const r in e)e[r].subscribe({complete:()=>{n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(r)))},error:i=>{let a;i instanceof Error?a=i.message:i&&i.toString?a=i.toString():a="Unknown error",n=n.then(()=>this._sendWithProtocol(this._createCompletionMessage(r,a)))},next:i=>{n=n.then(()=>this._sendWithProtocol(this._createStreamItemMessage(r,i)))}})}}_replaceStreamingParams(e){const n=[],r=[];for(let i=0;i<e.length;i++){const a=e[i];if(this._isObservable(a)){const o=this._invocationId;this._invocationId++,n[o]=a,r.push(o.toString()),e.splice(i,1)}}return[n,r]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,n,r){const i=this._invocationId;return this._invocationId++,r.length!==0?{target:e,arguments:n,invocationId:i.toString(),streamIds:r,type:H.StreamInvocation}:{target:e,arguments:n,invocationId:i.toString(),type:H.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:H.CancelInvocation}}_createStreamItemMessage(e,n){return{invocationId:e,item:n,type:H.StreamItem}}_createCompletionMessage(e,n,r){return n?{error:n,invocationId:e,type:H.Completion}:{invocationId:e,result:r,type:H.Completion}}_createCloseMessage(){return{type:H.Close}}}const Yo=[0,2e3,1e4,3e4,null];class xn{constructor(e){this._retryDelays=e!==void 0?[...e,null]:Yo}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}class ot{}ot.Authorization="Authorization";ot.Cookie="Cookie";class Xo extends os{constructor(e,n){super(),this._innerClient=e,this._accessTokenFactory=n}async send(e){let n=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(n=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(e);const r=await this._innerClient.send(e);return n&&r.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(e),await this._innerClient.send(e)):r}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[ot.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[ot.Authorization]&&delete e.headers[ot.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}var re;(function(s){s[s.None=0]="None",s[s.WebSockets=1]="WebSockets",s[s.ServerSentEvents=2]="ServerSentEvents",s[s.LongPolling=4]="LongPolling"})(re||(re={}));var de;(function(s){s[s.Text=1]="Text",s[s.Binary=2]="Binary"})(de||(de={}));let el=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class vn{get pollAborted(){return this._pollAbort.aborted}constructor(e,n,r){this._httpClient=e,this._logger=n,this._pollAbort=new el,this._options=r,this._running=!1,this.onreceive=null,this.onclose=null}async connect(e,n){if(ne.isRequired(e,"url"),ne.isRequired(n,"transferFormat"),ne.isIn(n,de,"transferFormat"),this._url=e,this._logger.log(w.Trace,"(LongPolling transport) Connecting."),n===de.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[r,i]=vt(),a={[r]:i,...this._options.headers},o={abortSignal:this._pollAbort.signal,headers:a,timeout:1e5,withCredentials:this._options.withCredentials};n===de.Binary&&(o.responseType="arraybuffer");const d=`${e}&_=${Date.now()}`;this._logger.log(w.Trace,`(LongPolling transport) polling: ${d}.`);const l=await this._httpClient.get(d,o);l.statusCode!==200?(this._logger.log(w.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new at(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)}async _poll(e,n){try{for(;this._running;)try{const r=`${e}&_=${Date.now()}`;this._logger.log(w.Trace,`(LongPolling transport) polling: ${r}.`);const i=await this._httpClient.get(r,n);i.statusCode===204?(this._logger.log(w.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):i.statusCode!==200?(this._logger.log(w.Error,`(LongPolling transport) Unexpected response code: ${i.statusCode}.`),this._closeError=new at(i.statusText||"",i.statusCode),this._running=!1):i.content?(this._logger.log(w.Trace,`(LongPolling transport) data received. ${qt(i.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(i.content)):this._logger.log(w.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){this._running?r instanceof zs?this._logger.log(w.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=r,this._running=!1):this._logger.log(w.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{this._logger.log(w.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(e){return this._running?Gn(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(w.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(w.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const e={},[n,r]=vt();e[n]=r;const i={headers:{...e,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let a;try{await this._httpClient.delete(this._url,i)}catch(o){a=o}a?a instanceof at&&(a.statusCode===404?this._logger.log(w.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(w.Trace,`(LongPolling transport) Error sending a DELETE request: ${a}`)):this._logger.log(w.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(w.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(w.Trace,e),this.onclose(this._closeError)}}}class tl{constructor(e,n,r,i){this._httpClient=e,this._accessToken=n,this._logger=r,this._options=i,this.onreceive=null,this.onclose=null}async connect(e,n){return ne.isRequired(e,"url"),ne.isRequired(n,"transferFormat"),ne.isIn(n,de,"transferFormat"),this._logger.log(w.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((r,i)=>{let a=!1;if(n!==de.Text){i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let o;if(X.isBrowser||X.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{const d=this._httpClient.getCookieString(e),l={};l.Cookie=d;const[h,u]=vt();l[h]=u,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:{...l,...this._options.headers}})}try{o.onmessage=d=>{if(this.onreceive)try{this._logger.log(w.Trace,`(SSE transport) data received. ${qt(d.data,this._options.logMessageContent)}.`),this.onreceive(d.data)}catch(l){this._close(l);return}},o.onerror=d=>{a?this._close():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(w.Information,`SSE connected to ${this._url}`),this._eventSource=o,a=!0,r()}}catch(d){i(d);return}})}async send(e){return this._eventSource?Gn(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class sl{constructor(e,n,r,i,a,o){this._logger=r,this._accessTokenFactory=n,this._logMessageContent=i,this._webSocketConstructor=a,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}async connect(e,n){ne.isRequired(e,"url"),ne.isRequired(n,"transferFormat"),ne.isIn(n,de,"transferFormat"),this._logger.log(w.Trace,"(WebSockets transport) Connecting.");let r;return this._accessTokenFactory&&(r=await this._accessTokenFactory()),new Promise((i,a)=>{e=e.replace(/^http/,"ws");let o;const d=this._httpClient.getCookieString(e);let l=!1;if(X.isNode||X.isReactNative){const h={},[u,p]=vt();h[u]=p,r&&(h[ot.Authorization]=`Bearer ${r}`),d&&(h[ot.Cookie]=d),o=new this._webSocketConstructor(e,void 0,{headers:{...h,...this._headers}})}else r&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);o||(o=new this._webSocketConstructor(e)),n===de.Binary&&(o.binaryType="arraybuffer"),o.onopen=h=>{this._logger.log(w.Information,`WebSocket connected to ${e}.`),this._webSocket=o,l=!0,i()},o.onerror=h=>{let u=null;typeof ErrorEvent<"u"&&h instanceof ErrorEvent?u=h.error:u="There was an error with the transport",this._logger.log(w.Information,`(WebSockets transport) ${u}.`)},o.onmessage=h=>{if(this._logger.log(w.Trace,`(WebSockets transport) data received. ${qt(h.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(h.data)}catch(u){this._close(u);return}},o.onclose=h=>{if(l)this._close(h);else{let u=null;typeof ErrorEvent<"u"&&h instanceof ErrorEvent?u=h.error:u="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",a(new Error(u))}}})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(w.Trace,`(WebSockets transport) sending data. ${qt(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(w.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}}const yn=100;class nl{constructor(e,n={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,ne.isRequired(e,"url"),this._logger=$o(n.logger),this.baseUrl=this._resolveUrl(e),n=n||{},n.logMessageContent=n.logMessageContent===void 0?!1:n.logMessageContent,typeof n.withCredentials=="boolean"||n.withCredentials===void 0)n.withCredentials=n.withCredentials===void 0?!0:n.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");n.timeout=n.timeout===void 0?100*1e3:n.timeout;let r=null,i=null;if(X.isNode&&typeof require<"u"){const a=typeof __webpack_require__=="function"?__non_webpack_require__:require;r=a("ws"),i=a("eventsource")}!X.isNode&&typeof WebSocket<"u"&&!n.WebSocket?n.WebSocket=WebSocket:X.isNode&&!n.WebSocket&&r&&(n.WebSocket=r),!X.isNode&&typeof EventSource<"u"&&!n.EventSource?n.EventSource=EventSource:X.isNode&&!n.EventSource&&typeof i<"u"&&(n.EventSource=i),this._httpClient=new Xo(n.httpClient||new Ho(this._logger),n.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=n,this.onreceive=null,this.onclose=null}async start(e){if(e=e||de.Binary,ne.isIn(e,de,"transferFormat"),this._logger.log(w.Debug,`Starting connection with transfer format '${de[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),await this._startInternalPromise,this._connectionState==="Disconnecting"){const n="Failed to start the HttpConnection before stop() was called.";return this._logger.log(w.Error,n),await this._stopPromise,Promise.reject(new Se(n))}else if(this._connectionState!=="Connected"){const n="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(w.Error,n),Promise.reject(new Se(n))}this._connectionStarted=!0}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Us(this.transport)),this._sendQueue.send(e))}async stop(e){if(this._connectionState==="Disconnected")return this._logger.log(w.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(w.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(n=>{this._stopPromiseResolver=n}),await this._stopInternal(e),await this._stopPromise}async _stopInternal(e){this._stopError=e;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(n){this._logger.log(w.Error,`HttpConnection.transport.stop() threw error '${n}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(w.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(e){let n=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===re.WebSockets)this.transport=this._constructTransport(re.WebSockets),await this._startTransport(n,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let r=null,i=0;do{if(r=await this._getNegotiationResponse(n),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Se("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(n=r.url),r.accessToken){const a=r.accessToken;this._accessTokenFactory=()=>a,this._httpClient._accessToken=a,this._httpClient._accessTokenFactory=void 0}i++}while(r.url&&i<yn);if(i===yn&&r.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(n,this._options.transport,r,e)}this.transport instanceof vn&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(w.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(r){return this._logger.log(w.Error,"Failed to start the connection: "+r),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(r)}}async _getNegotiationResponse(e){const n={},[r,i]=vt();n[r]=i;const a=this._resolveNegotiateUrl(e);this._logger.log(w.Debug,`Sending negotiation request: ${a}.`);try{const o=await this._httpClient.post(a,{content:"",headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(o.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${o.statusCode}'`));const d=JSON.parse(o.content);return(!d.negotiateVersion||d.negotiateVersion<1)&&(d.connectionToken=d.connectionId),d.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new mn("Client didn't negotiate Stateful Reconnect but the server did.")):d}catch(o){let d="Failed to complete negotiation with the server: "+o;return o instanceof at&&o.statusCode===404&&(d=d+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(w.Error,d),Promise.reject(new mn(d))}}_createConnectUrl(e,n){return n?e+(e.indexOf("?")===-1?"?":"&")+`id=${n}`:e}async _createTransport(e,n,r,i){let a=this._createConnectUrl(e,r.connectionToken);if(this._isITransport(n)){this._logger.log(w.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=n,await this._startTransport(a,i),this.connectionId=r.connectionId;return}const o=[],d=r.availableTransports||[];let l=r;for(const h of d){const u=this._resolveTransportOrError(h,n,i,l?.useStatefulReconnect===!0);if(u instanceof Error)o.push(`${h.transport} failed:`),o.push(u);else if(this._isITransport(u)){if(this.transport=u,!l){try{l=await this._getNegotiationResponse(e)}catch(p){return Promise.reject(p)}a=this._createConnectUrl(e,l.connectionToken)}try{await this._startTransport(a,i),this.connectionId=l.connectionId;return}catch(p){if(this._logger.log(w.Error,`Failed to start the transport '${h.transport}': ${p}`),l=void 0,o.push(new Ro(`${h.transport} failed: ${p}`,re[h.transport])),this._connectionState!=="Connecting"){const _="Failed to select transport before stop() was called.";return this._logger.log(w.Debug,_),Promise.reject(new Se(_))}}}}return o.length>0?Promise.reject(new Do(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(e){switch(e){case re.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new sl(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case re.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new tl(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case re.LongPolling:return new vn(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,n){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async r=>{let i=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(e,n),await this.features.resend()}catch{i=!0}else{this._stopConnection(r);return}i&&this._stopConnection(r)}:this.transport.onclose=r=>this._stopConnection(r),this.transport.connect(e,n)}_resolveTransportOrError(e,n,r,i){const a=re[e.transport];if(a==null)return this._logger.log(w.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(rl(n,a))if(e.transferFormats.map(d=>de[d]).indexOf(r)>=0){if(a===re.WebSockets&&!this._options.WebSocket||a===re.ServerSentEvents&&!this._options.EventSource)return this._logger.log(w.Debug,`Skipping transport '${re[a]}' because it is not supported in your environment.'`),new Ao(`'${re[a]}' is not supported in your environment.`,a);this._logger.log(w.Debug,`Selecting transport '${re[a]}'.`);try{return this.features.reconnect=a===re.WebSockets?i:void 0,this._constructTransport(a)}catch(d){return d}}else return this._logger.log(w.Debug,`Skipping transport '${re[a]}' because it does not support the requested transfer format '${de[r]}'.`),new Error(`'${re[a]}' does not support ${de[r]}.`);else return this._logger.log(w.Debug,`Skipping transport '${re[a]}' because it was disabled by the client.`),new Po(`'${re[a]}' is disabled by the client.`,a)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(w.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(w.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(w.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(w.Error,`Connection disconnected with error '${e}'.`):this._logger.log(w.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(n=>{this._logger.log(w.Error,`TransportSendQueue.stop() threw error '${n}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(n){this._logger.log(w.Error,`HttpConnection.onclose(${e}) threw error '${n}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!X.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const n=window.document.createElement("a");return n.href=e,this._logger.log(w.Information,`Normalizing '${e}' to '${n.href}'.`),n.href}_resolveNegotiateUrl(e){const n=new URL(e);n.pathname.endsWith("/")?n.pathname+="negotiate":n.pathname+="/negotiate";const r=new URLSearchParams(n.searchParams);return r.has("negotiateVersion")||r.append("negotiateVersion",this._negotiateVersion.toString()),r.has("useStatefulReconnect")?r.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&r.append("useStatefulReconnect","true"),n.search=r.toString(),n.toString()}}function rl(s,e){return!s||(e&s)!==0}class Us{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new Qt,this._transportResult=new Qt,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new Qt),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Qt;const e=this._transportResult;this._transportResult=void 0;const n=typeof this._buffer[0]=="string"?this._buffer.join(""):Us._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(n),e.resolve()}catch(r){e.reject(r)}}}static _concatBuffers(e){const n=e.map(a=>a.byteLength).reduce((a,o)=>a+o),r=new Uint8Array(n);let i=0;for(const a of e)r.set(new Uint8Array(a),i),i+=a.byteLength;return r.buffer}}class Qt{constructor(){this.promise=new Promise((e,n)=>[this._resolver,this._rejecter]=[e,n])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}const il="json";class al{constructor(){this.name=il,this.version=2,this.transferFormat=de.Text}parseMessages(e,n){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];n===null&&(n=Ut.instance);const r=ve.parse(e),i=[];for(const a of r){const o=JSON.parse(a);if(typeof o.type!="number")throw new Error("Invalid payload.");switch(o.type){case H.Invocation:this._isInvocationMessage(o);break;case H.StreamItem:this._isStreamItemMessage(o);break;case H.Completion:this._isCompletionMessage(o);break;case H.Ping:break;case H.Close:break;case H.Ack:this._isAckMessage(o);break;case H.Sequence:this._isSequenceMessage(o);break;default:n.log(w.Information,"Unknown message type '"+o.type+"' ignored.");continue}i.push(o)}return i}writeMessage(e){return ve.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,n){if(typeof e!="string"||e==="")throw new Error(n)}}const ol={trace:w.Trace,debug:w.Debug,info:w.Information,information:w.Information,warn:w.Warning,warning:w.Warning,error:w.Error,critical:w.Critical,none:w.None};function ll(s){const e=ol[s.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${s}`)}class Jn{configureLogging(e){if(ne.isRequired(e,"logging"),cl(e))this.logger=e;else if(typeof e=="string"){const n=ll(e);this.logger=new ss(n)}else this.logger=new ss(e);return this}withUrl(e,n){return ne.isRequired(e,"url"),ne.isNotEmpty(e,"url"),this.url=e,typeof n=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...n}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:n},this}withHubProtocol(e){return ne.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new xn(e):this.reconnectPolicy=e:this.reconnectPolicy=new xn,this}withServerTimeout(e){return ne.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return ne.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){const e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const n=new nl(this.url,e);return Ls.create(n,this.logger||Ut.instance,this.protocol||new al,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function cl(s){return s.log!==void 0}class dl{connection=null;onMetricsUpdate;onAlertReceived;onConnectionStatusChange;constructor(){this.initializeConnection()}initializeConnection(){const e=localStorage.getItem("authToken");if(!e){console.warn("No auth token available for SignalR connection");return}this.connection=new Jn().withUrl("http://localhost:7001/hubs/monitoring",{accessTokenFactory:()=>e,transport:7}).withAutomaticReconnect().configureLogging(w.Information).build(),this.setupEventHandlers()}setupEventHandlers(){this.connection&&(this.connection.on("ReceiveServerMetrics",(e,n)=>{console.log(`Received metrics for server ${e}:`,n),this.onMetricsUpdate?.(e,n)}),this.connection.on("ReceiveAlert",e=>{console.log("Received alert:",e),this.onAlertReceived?.(e)}),this.connection.onclose(()=>{console.log("SignalR connection closed"),this.onConnectionStatusChange?.(!1)}),this.connection.onreconnected(()=>{console.log("SignalR connection reconnected"),this.onConnectionStatusChange?.(!0)}))}async start(){if(this.connection||this.initializeConnection(),!this.connection)throw new Error("Failed to initialize SignalR connection");if(this.connection.state!=="Disconnected"){console.log("SignalR connection already started or connecting");return}try{await this.connection.start(),console.log("SignalR connection started successfully"),this.onConnectionStatusChange?.(!0)}catch(e){throw console.error("Failed to start SignalR connection:",e),this.onConnectionStatusChange?.(!1),e}}async stop(){this.connection&&(await this.connection.stop(),console.log("SignalR connection stopped"),this.onConnectionStatusChange?.(!1))}async subscribeToServer(e){if(!this.connection)throw new Error("Connection not initialized");try{await this.connection.invoke("SubscribeToServerMetrics",e),console.log(`Subscribed to metrics for server ${e}`)}catch(n){throw console.error(`Failed to subscribe to server ${e}:`,n),n}}async unsubscribeFromServer(e){if(!this.connection)throw new Error("Connection not initialized");try{await this.connection.invoke("UnsubscribeFromServerMetrics",e),console.log(`Unsubscribed from metrics for server ${e}`)}catch(n){throw console.error(`Failed to unsubscribe from server ${e}:`,n),n}}setOnMetricsUpdate(e){this.onMetricsUpdate=e}setOnAlertReceived(e){this.onAlertReceived=e}setOnConnectionStatusChange(e){this.onConnectionStatusChange=e}isConnected(){return this.connection?.state==="Connected"}dispose(){this.stop(),this.connection=null}}const Xe=new dl,ul=()=>{const[s,e]=c.useState({metrics:{},alerts:[],isConnected:!1,subscribedServers:[]});c.useEffect(()=>(Xe.setOnMetricsUpdate((l,h)=>{e(u=>({...u,metrics:{...u.metrics,[l]:h}}))}),Xe.setOnAlertReceived(l=>{e(h=>({...h,alerts:[l,...h.alerts].slice(0,50)}))}),Xe.setOnConnectionStatusChange(l=>{e(h=>({...h,isConnected:l}))}),(async()=>{try{await Xe.start()}catch(l){console.error("Failed to start monitoring connection:",l)}})(),()=>{Xe.dispose()}),[]);const n=c.useCallback(async d=>{try{await Xe.subscribeToServer(d),e(l=>({...l,subscribedServers:[...l.subscribedServers,d]}))}catch(l){console.error(`Failed to subscribe to server ${d}:`,l)}},[]),r=c.useCallback(async d=>{try{await Xe.unsubscribeFromServer(d),e(l=>({...l,subscribedServers:l.subscribedServers.filter(h=>h!==d)}))}catch(l){console.error(`Failed to unsubscribe from server ${d}:`,l)}},[]),i=c.useCallback(()=>{e(d=>({...d,alerts:[]}))},[]),a=c.useCallback(d=>s.metrics[d]||null,[s.metrics]),o=c.useCallback((d=10)=>s.alerts.slice(0,d),[s.alerts]);return{metrics:s.metrics,alerts:s.alerts,isConnected:s.isConnected,subscribedServers:s.subscribedServers,subscribeToServer:n,unsubscribeFromServer:r,clearAlerts:i,getServerMetrics:a,getRecentAlerts:o}};var ks=(s=>(s.Info="Info",s.Warning="Warning",s.Critical="Critical",s))(ks||{});const{Title:hl}=_e,bn=()=>{const[s,e]=c.useState(!0),[n,r]=c.useState(null),[i,a]=c.useState(null),{metrics:o,alerts:d,isConnected:l,subscribeToServer:h,clearAlerts:u,getRecentAlerts:p}=ul();if(c.useEffect(()=>{(async()=>{try{e(!0),a(null);const A=await Eo.getStats();r(A)}catch(A){console.error("Dashboard API error:",A),a(A instanceof Error?A.message:"Failed to load dashboard data"),r({totalServers:3,runningServers:2,activeDomains:12,totalDomains:15,totalDatabases:8,activeDatabases:7,systemInfo:{serverName:"SuperPanel-Server",operatingSystem:"Linux",architecture:"x64",cpuUsagePercent:23.5,totalMemoryMB:8192,availableMemoryMB:5400,drives:[{name:"/",fileSystem:"ext4",totalSizeGB:500,availableSpaceGB:290,usagePercent:42}],topProcesses:[],lastUpdated:new Date().toISOString()}})}finally{e(!1)}})()},[]),c.useEffect(()=>{(async()=>{if(l&&n)try{for(let A=1;A<=n.totalServers;A++)await h(A)}catch(A){console.error("Failed to subscribe to servers:",A)}})()},[l,n,h]),s)return t.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[t.jsx(We,{size:"large"}),t.jsx("div",{style:{marginTop:"16px"},children:"Loading dashboard..."})]});if(i&&!n)return t.jsx(me,{message:"Connection Error",description:"Unable to connect to API. Using fallback data for demonstration.",type:"warning",showIcon:!0,style:{margin:"20px 0"}});if(!n)return null;const _=Math.round((1-n.systemInfo.availableMemoryMB/n.systemInfo.totalMemoryMB)*100),f=n.systemInfo.drives.length>0?n.systemInfo.drives[0].usagePercent:0,E=n.systemInfo.drives.reduce((j,A)=>j+A.totalSizeGB,0),D=n.systemInfo.drives.reduce((j,A)=>j+(A.totalSizeGB-A.availableSpaceGB),0);return t.jsxs("div",{children:[t.jsxs(hl,{level:2,children:["Dashboard",t.jsx(xt,{status:l?"success":"error",text:l?"Real-time monitoring active":"Real-time monitoring offline",style:{marginLeft:"16px"}})]}),i&&t.jsx(me,{message:"API Connection Issue",description:"Some data may not be current due to API connectivity issues.",type:"warning",showIcon:!0,style:{marginBottom:"16px"},closable:!0}),d.length>0&&t.jsx(me,{message:`Active Alerts (${d.length})`,description:t.jsxs("div",{children:[t.jsx(Yt,{size:"small",dataSource:p(5),renderItem:j=>t.jsxs(Yt.Item,{children:[t.jsx(J,{color:j.severity===ks.Critical?"red":j.severity===ks.Warning?"orange":"blue",children:j.severity}),t.jsxs("strong",{children:[j.serverName,":"]})," ",j.message,t.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:new Date(j.timestamp).toLocaleTimeString()})]})}),d.length>5&&t.jsx("div",{style:{marginTop:"8px"},children:t.jsx($,{size:"small",onClick:u,icon:t.jsx(aa,{}),children:"Clear All Alerts"})})]}),type:"warning",showIcon:!0,style:{marginBottom:"16px"},closable:!1}),t.jsxs(se,{gutter:[16,16],style:{marginBottom:"24px"},children:[t.jsx(z,{xs:24,sm:12,lg:6,children:t.jsxs(U,{children:[t.jsx(G,{title:"Total Servers",value:n.totalServers,prefix:t.jsx(Cs,{}),valueStyle:{color:"#3f8600"}}),t.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:[n.runningServers," running"]}),l&&t.jsxs("div",{style:{fontSize:"12px",color:"#52c41a",marginTop:"4px"},children:[t.jsx(go,{})," Live monitoring"]})]})}),t.jsx(z,{xs:24,sm:12,lg:6,children:t.jsxs(U,{children:[t.jsx(G,{title:"Active Domains",value:n.activeDomains,prefix:t.jsx(it,{}),valueStyle:{color:"#1890ff"}}),t.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:[n.totalDomains," total domains"]})]})}),t.jsx(z,{xs:24,sm:12,lg:6,children:t.jsxs(U,{children:[t.jsx(G,{title:"Active Databases",value:n.activeDatabases,prefix:t.jsx(Ne,{}),valueStyle:{color:"#52c41a"}}),t.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:[n.totalDatabases," total databases"]})]})}),t.jsx(z,{xs:24,sm:12,lg:6,children:t.jsx(U,{children:t.jsx(G,{title:"Storage Used",value:D,suffix:`/${E}GB`,prefix:t.jsx(Zt,{}),valueStyle:{color:"#fa8c16"}})})})]}),t.jsxs(se,{gutter:[16,16],children:[t.jsx(z,{xs:24,sm:8,children:t.jsx(U,{title:"CPU Usage",children:t.jsx(G,{value:n.systemInfo.cpuUsagePercent,precision:1,suffix:"%",valueStyle:{color:n.systemInfo.cpuUsagePercent>80?"#cf1322":n.systemInfo.cpuUsagePercent>60?"#fa8c16":"#3f8600"},prefix:n.systemInfo.cpuUsagePercent>50?t.jsx(ps,{}):t.jsx(fs,{})})})}),t.jsx(z,{xs:24,sm:8,children:t.jsxs(U,{title:"Memory Usage",children:[t.jsx(G,{value:_,precision:1,suffix:"%",valueStyle:{color:_>80?"#cf1322":_>60?"#fa8c16":"#3f8600"},prefix:_>50?t.jsx(ps,{}):t.jsx(fs,{})}),t.jsxs("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:[Math.round(n.systemInfo.availableMemoryMB/1024),"GB / ",Math.round(n.systemInfo.totalMemoryMB/1024),"GB"]})]})}),t.jsx(z,{xs:24,sm:8,children:t.jsx(U,{title:"Disk Usage",children:t.jsx(G,{value:f,precision:1,suffix:"%",valueStyle:{color:f>80?"#cf1322":f>60?"#fa8c16":"#3f8600"},prefix:f>50?t.jsx(ps,{}):t.jsx(fs,{})})})})]}),l&&Object.keys(o).length>0&&t.jsx(se,{gutter:[16,16],style:{marginTop:"24px"},children:t.jsx(z,{span:24,children:t.jsx(U,{title:"Real-time Server Metrics",extra:t.jsx(xt,{status:"success",text:"Live"}),children:t.jsx(se,{gutter:[16,16],children:Object.entries(o).map(([j,A])=>t.jsx(z,{xs:24,sm:12,lg:8,children:t.jsxs(U,{size:"small",title:`Server ${j}`,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{children:"CPU:"}),t.jsxs("span",{style:{color:A.cpuUsage>80?"#cf1322":A.cpuUsage>60?"#fa8c16":"#3f8600",fontWeight:"bold"},children:[A.cpuUsage.toFixed(1),"%"]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{children:"Memory:"}),t.jsxs("span",{style:{color:A.memoryUsage>80?"#cf1322":A.memoryUsage>60?"#fa8c16":"#3f8600",fontWeight:"bold"},children:[A.memoryUsage.toFixed(1),"%"]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{children:"Disk:"}),t.jsxs("span",{style:{color:A.diskUsage>90?"#cf1322":A.diskUsage>80?"#fa8c16":"#3f8600",fontWeight:"bold"},children:[A.diskUsage.toFixed(1),"%"]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[t.jsx("span",{children:"Connections:"}),t.jsx("span",{style:{fontWeight:"bold"},children:A.activeConnections})]}),t.jsxs("div",{style:{fontSize:"12px",color:"#666",textAlign:"center",marginTop:"8px"},children:["Updated: ",new Date(A.timestamp).toLocaleTimeString()]})]})},j))})})})}),t.jsx(se,{gutter:[16,16],style:{marginTop:"24px"},children:t.jsx(z,{span:24,children:t.jsx(U,{title:"Quick Actions",children:t.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[t.jsx(U,{size:"small",style:{cursor:"pointer"},onClick:()=>window.location.href="/servers",children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(Cs,{style:{fontSize:"24px",marginBottom:"8px"}}),t.jsx("div",{children:"Manage Servers"})]})}),t.jsx(U,{size:"small",style:{cursor:"pointer"},onClick:()=>window.location.href="/domains",children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(it,{style:{fontSize:"24px",marginBottom:"8px"}}),t.jsx("div",{children:"Add Domain"})]})}),t.jsx(U,{size:"small",style:{cursor:"pointer"},onClick:()=>window.location.href="/files",children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(Zt,{style:{fontSize:"24px",marginBottom:"8px"}}),t.jsx("div",{children:"File Manager"})]})}),t.jsx(U,{size:"small",style:{cursor:"pointer"},onClick:()=>window.location.href="/monitoring",children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx(Ne,{style:{fontSize:"24px",marginBottom:"8px"}}),t.jsx("div",{children:"View Monitoring"})]})})]})})})})]})},{Title:fl}=_e,{Option:gs}=q,pl=()=>{const[s,e]=c.useState([]),[n,r]=c.useState(!0),[i,a]=c.useState(!1),[o,d]=c.useState(null),[l]=b.useForm(),[h,u]=c.useState(null);c.useEffect(()=>{p()},[]);const p=async()=>{try{r(!0),u(null);let P;try{P=(await Io.getMockServers()).map(C=>({id:C.id,name:C.name,ipAddress:C.ipAddress,port:C.port,status:C.status,operatingSystem:C.operatingSystem,totalMemoryMB:C.totalMemoryMB,availableMemoryMB:C.availableMemoryMB,cpuUsagePercent:C.cpuUsagePercent,diskUsagePercent:C.diskUsagePercent,createdAt:C.createdAt,lastUpdated:C.lastUpdated}))}catch{P=await Me.getAll()}e(P)}catch(P){console.error("Failed to load servers:",P),u(P instanceof Error?P.message:"Failed to load servers"),e([{id:1,name:"Web Server 01",ipAddress:"192.168.1.10",port:80,status:Y.Running,operatingSystem:"Ubuntu 22.04",totalMemoryMB:8192,availableMemoryMB:5400,cpuUsagePercent:25.3,diskUsagePercent:42.1,createdAt:"2024-01-15T10:30:00Z",lastUpdated:new Date().toISOString()},{id:2,name:"Database Server",ipAddress:"192.168.1.20",port:3306,status:Y.Running,operatingSystem:"CentOS 8",totalMemoryMB:16384,availableMemoryMB:12800,cpuUsagePercent:15.7,diskUsagePercent:67.8,createdAt:"2024-01-20T14:20:00Z",lastUpdated:new Date().toISOString()},{id:3,name:"Backup Server",ipAddress:"192.168.1.30",port:22,status:Y.Stopped,operatingSystem:"Debian 11",totalMemoryMB:4096,availableMemoryMB:3200,cpuUsagePercent:5.2,diskUsagePercent:89.3,createdAt:"2024-02-01T09:15:00Z",lastUpdated:new Date().toISOString()}])}finally{r(!1)}},_=()=>{d(null),l.resetFields(),a(!0)},f=P=>{d(P),l.setFieldsValue(P),a(!0)},E=async P=>{try{await Me.delete(P),I.success("Server deleted successfully"),p()}catch(T){I.error("Failed to delete server"),console.error("Delete server error:",T)}},D=async(P,T)=>{try{await Me.updateStatus(P,T),I.success(`Server status updated to ${T}`),p()}catch(C){I.error("Failed to update server status"),console.error("Update status error:",C)}},j=async()=>{try{const P=await l.validateFields();o?(await Me.update(o.id,P),I.success("Server updated successfully")):(await Me.create(P),I.success("Server created successfully")),a(!1),p()}catch(P){P instanceof Error&&P.message.includes("API Error")?I.error("Failed to save server - API not available"):I.error("Please check all required fields"),console.error("Save server error:",P)}},A=P=>{switch(P){case Y.Running:return"green";case Y.Stopped:return"red";case Y.Error:return"volcano";case Y.Maintenance:return"orange";default:return"default"}},F=[{title:"Name",dataIndex:"name",key:"name",sorter:(P,T)=>P.name.localeCompare(T.name)},{title:"IP Address",dataIndex:"ipAddress",key:"ipAddress"},{title:"Port",dataIndex:"port",key:"port",width:80},{title:"Status",dataIndex:"status",key:"status",render:P=>t.jsx(J,{color:A(P),children:P}),filters:[{text:"Running",value:Y.Running},{text:"Stopped",value:Y.Stopped},{text:"Error",value:Y.Error},{text:"Maintenance",value:Y.Maintenance}],onFilter:(P,T)=>T.status===P},{title:"OS",dataIndex:"operatingSystem",key:"operatingSystem",responsive:["md"]},{title:"CPU %",dataIndex:"cpuUsagePercent",key:"cpuUsagePercent",render:P=>`${P.toFixed(1)}%`,sorter:(P,T)=>P.cpuUsagePercent-T.cpuUsagePercent,responsive:["lg"]},{title:"Memory",key:"memory",render:(P,T)=>`${((T.totalMemoryMB-T.availableMemoryMB)/T.totalMemoryMB*100).toFixed(1)}%`,sorter:(P,T)=>{const C=(P.totalMemoryMB-P.availableMemoryMB)/P.totalMemoryMB,S=(T.totalMemoryMB-T.availableMemoryMB)/T.totalMemoryMB;return C-S},responsive:["lg"]},{title:"Actions",key:"actions",render:(P,T)=>t.jsxs(W,{size:"small",children:[t.jsx($,{type:"text",icon:T.status===Y.Running?t.jsx(Jt,{}):t.jsx(Vn,{}),onClick:()=>D(T.id,T.status===Y.Running?Y.Stopped:Y.Running),title:T.status===Y.Running?"Stop Server":"Start Server"}),t.jsx($,{type:"text",icon:t.jsx(ct,{}),onClick:()=>f(T),title:"Edit Server"}),t.jsx(Ee,{title:"Delete Server",description:"Are you sure you want to delete this server?",onConfirm:()=>E(T.id),okText:"Yes",cancelText:"No",children:t.jsx($,{type:"text",danger:!0,icon:t.jsx(Ae,{}),title:"Delete Server"})})]})}];return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsx(fl,{level:2,style:{margin:0},children:"Server Management"}),t.jsxs(W,{children:[t.jsx($,{icon:t.jsx(Qe,{}),onClick:p,loading:n,children:"Refresh"}),t.jsx($,{type:"primary",icon:t.jsx(Te,{}),onClick:_,children:"Add Server"})]})]}),h&&t.jsx(me,{message:"API Connection Issue",description:"Unable to connect to API. Showing sample data for demonstration.",type:"warning",showIcon:!0,style:{marginBottom:"16px"},closable:!0}),t.jsx(U,{children:t.jsx(fe,{columns:F,dataSource:s,rowKey:"id",loading:n,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(P,T)=>`${T[0]}-${T[1]} of ${P} servers`}})}),t.jsx(ie,{title:o?"Edit Server":"Add New Server",open:i,onOk:j,onCancel:()=>a(!1),width:600,children:t.jsxs(b,{form:l,layout:"vertical",initialValues:{status:Y.Stopped,port:80},children:[t.jsx(b.Item,{name:"name",label:"Server Name",rules:[{required:!0,message:"Please enter server name"}],children:t.jsx(L,{placeholder:"Enter server name"})}),t.jsx(b.Item,{name:"ipAddress",label:"IP Address",rules:[{required:!0,message:"Please enter IP address"},{pattern:/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,message:"Please enter valid IP address"}],children:t.jsx(L,{placeholder:"192.168.1.100"})}),t.jsx(b.Item,{name:"port",label:"Port",rules:[{required:!0,message:"Please enter port number"},{type:"number",min:1,max:65535,message:"Port must be between 1 and 65535"}],children:t.jsx(L,{type:"number",placeholder:"80"})}),t.jsx(b.Item,{name:"operatingSystem",label:"Operating System",rules:[{required:!0,message:"Please enter operating system"}],children:t.jsx(L,{placeholder:"Ubuntu 22.04"})}),t.jsx(b.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:t.jsxs(q,{children:[t.jsx(gs,{value:Y.Running,children:"Running"}),t.jsx(gs,{value:Y.Stopped,children:"Stopped"}),t.jsx(gs,{value:Y.Maintenance,children:"Maintenance"})]})})]})})]})},{Title:ml}=_e,gl=()=>{const[s,e]=c.useState([]),[n,r]=c.useState([]),[i,a]=c.useState(!0),[o,d]=c.useState(!1),[l,h]=c.useState(null),[u]=b.useForm(),[p,_]=c.useState(null);c.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0),_(null);const[g,B]=await Promise.all([rt.getAll(),Me.getAll()]);e(g),r(B)}catch(g){console.error("Failed to load data:",g),_(g instanceof Error?g.message:"Failed to load domains")}finally{a(!1)}},E=()=>{h(null),u.resetFields(),d(!0)},D=g=>{h(g),u.setFieldsValue({name:g.name,serverId:g.serverId,documentRoot:g.documentRoot,status:g.status,sslEnabled:g.sslEnabled}),d(!0)},j=async g=>{try{await rt.delete(g),I.success("Domain deleted successfully"),f()}catch(B){I.error("Failed to delete domain"),console.error("Delete domain error:",B)}},A=async()=>{try{const g=await u.validateFields();g.sslExpiry&&(g.sslExpiry=g.sslExpiry.toISOString()),l?(await rt.update(l.id,g),I.success("Domain updated successfully")):(await rt.create(g),I.success("Domain created successfully")),d(!1),f()}catch(g){g instanceof Error&&g.message.includes("API Error")?I.error("Failed to save domain - API not available"):I.error("Please check all required fields"),console.error("Save domain error:",g)}},F=g=>g.sslEnabled?{status:"SSL Enabled",color:"green",icon:t.jsx(Lt,{})}:{status:"No SSL",color:"default",icon:t.jsx(uo,{})},P=g=>{const B=n.find(k=>k.id===g);return B?B.name:`Server ${g}`},T=[{title:"Domain Name",dataIndex:"name",key:"name",render:g=>t.jsxs(W,{children:[t.jsx(it,{style:{color:"#1890ff"}}),t.jsx("a",{href:`http://${g}`,target:"_blank",rel:"noopener noreferrer",children:g})]}),sorter:(g,B)=>g.name.localeCompare(B.name)},{title:"Server",dataIndex:"serverId",key:"serverId",render:g=>P(g),filters:n.map(g=>({text:g.name,value:g.id})),onFilter:(g,B)=>B.serverId===g},{title:"Status",dataIndex:"status",key:"status",render:g=>t.jsx(J,{color:g===pe.Active?"green":g===pe.Inactive?"red":"orange",children:pe[g]}),filters:[{text:"Active",value:pe.Active},{text:"Inactive",value:pe.Inactive},{text:"Suspended",value:pe.Suspended},{text:"Expired",value:pe.Expired}],onFilter:(g,B)=>B.status===g},{title:"SSL Certificate",key:"ssl",render:(g,B)=>{const k=F(B);return t.jsx(he,{title:k.status,children:t.jsx(xt,{status:k.color==="green"?"success":k.color==="red"?"error":"default",text:t.jsxs(W,{children:[k.icon,k.status]})})})}},{title:"Document Root",dataIndex:"documentRoot",key:"documentRoot",responsive:["lg"]},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:g=>new Date(g).toLocaleDateString(),sorter:(g,B)=>new Date(g.createdAt).getTime()-new Date(B.createdAt).getTime(),responsive:["md"]},{title:"Actions",key:"actions",render:(g,B)=>t.jsxs(W,{size:"small",children:[t.jsx(he,{title:"Edit Domain",children:t.jsx($,{type:"text",icon:t.jsx(ct,{}),onClick:()=>D(B)})}),t.jsx(he,{title:"Domain Settings",children:t.jsx($,{type:"text",icon:t.jsx(as,{}),onClick:()=>I.info("Domain settings coming soon")})}),t.jsx(Ee,{title:"Delete Domain",description:"Are you sure you want to delete this domain?",onConfirm:()=>j(B.id),okText:"Yes",cancelText:"No",children:t.jsx(he,{title:"Delete Domain",children:t.jsx($,{type:"text",danger:!0,icon:t.jsx(Ae,{})})})})]})}];if(i)return t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:t.jsx(We,{size:"large"})});const C=s.filter(g=>g.status===pe.Active),S=s.filter(g=>g.sslEnabled),m=[];return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsxs(ml,{level:2,children:[t.jsx(it,{})," Domain Management"]}),t.jsxs(W,{children:[t.jsx($,{icon:t.jsx(Qe,{}),onClick:f,loading:i,children:"Refresh"}),t.jsx($,{type:"primary",icon:t.jsx(Te,{}),onClick:E,children:"Add Domain"})]})]}),p&&t.jsx(me,{message:"API Connection Issue",description:"Unable to connect to API. Showing sample data for demonstration.",type:"warning",showIcon:!0,style:{marginBottom:"16px"},closable:!0}),t.jsxs(se,{gutter:[16,16],style:{marginBottom:"24px"},children:[t.jsx(z,{xs:24,sm:8,children:t.jsx(U,{children:t.jsx(G,{title:"Total Domains",value:s.length,prefix:t.jsx(it,{}),valueStyle:{color:"#1890ff"}})})}),t.jsx(z,{xs:24,sm:8,children:t.jsx(U,{children:t.jsx(G,{title:"Active Domains",value:C.length,prefix:t.jsx(Ve,{}),valueStyle:{color:"#3f8600"}})})}),t.jsx(z,{xs:24,sm:8,children:t.jsxs(U,{children:[t.jsx(G,{title:"SSL Certificates",value:S.length,prefix:t.jsx(Lt,{}),valueStyle:{color:"#722ed1"}}),m.length>0&&t.jsxs("div",{style:{fontSize:"12px",color:"#fa8c16",marginTop:"4px"},children:[m.length," expiring soon"]})]})})]}),m.length>0&&t.jsx(me,{message:"SSL Certificate Expiry Alert",description:`${m.length} SSL certificate(s) will expire within 30 days. Please renew them to avoid security issues.`,type:"warning",showIcon:!0,style:{marginBottom:"16px"},closable:!0}),t.jsx(U,{children:t.jsx(fe,{columns:T,dataSource:s,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(g,B)=>`${B[0]}-${B[1]} of ${g} domains`}})}),t.jsx(ie,{title:l?"Edit Domain":"Add New Domain",open:o,onOk:A,onCancel:()=>d(!1),width:600,children:t.jsxs(b,{form:u,layout:"vertical",initialValues:{status:pe.Active,sslEnabled:!1},children:[t.jsx(b.Item,{name:"name",label:"Domain Name",rules:[{required:!0,message:"Please enter domain name"},{pattern:/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,message:"Please enter a valid domain name"}],children:t.jsx(L,{placeholder:"example.com"})}),t.jsx(b.Item,{name:"serverId",label:"Server",rules:[{required:!0,message:"Please select a server"}],children:t.jsx(q,{placeholder:"Select a server",children:n.map(g=>t.jsxs(q.Option,{value:g.id,children:[g.name," (",g.ipAddress,")"]},g.id))})}),t.jsx(b.Item,{name:"documentRoot",label:"Document Root",rules:[{required:!0,message:"Please enter document root path"}],children:t.jsx(L,{placeholder:"/var/www/example.com"})}),t.jsx(b.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:t.jsxs(q,{placeholder:"Select status",children:[t.jsx(q.Option,{value:pe.Active,children:"Active"}),t.jsx(q.Option,{value:pe.Inactive,children:"Inactive"}),t.jsx(q.Option,{value:pe.Suspended,children:"Suspended"}),t.jsx(q.Option,{value:pe.Expired,children:"Expired"})]})}),t.jsx(b.Item,{name:"sslEnabled",label:"Enable SSL",valuePropName:"checked",children:t.jsx("input",{type:"checkbox"})})]})})]})},{Title:xl}=_e,{Option:ke}=q,vl=()=>{const[s,e]=c.useState([]),[n,r]=c.useState([]),[i,a]=c.useState(!0),[o,d]=c.useState(!1),[l,h]=c.useState(null),[u]=b.useForm(),[p,_]=c.useState(null);c.useEffect(()=>{f()},[]);const f=async()=>{try{a(!0),_(null);const[k,N]=await Promise.all([Ot.getAll(),Me.getAll()]);e(k),r(N)}catch(k){console.error("Failed to load data:",k),_(k instanceof Error?k.message:"Failed to load databases"),e([{id:1,name:"wordpress_db",type:"MySQL",username:"wp_user",sizeInMB:256.5,serverId:1,serverName:"Web Server 01",status:ee.Active,createdAt:"2024-01-15T10:30:00Z",backupDate:"2024-01-20T02:00:00Z"},{id:2,name:"ecommerce_db",type:"PostgreSQL",username:"ecom_user",sizeInMB:512.8,serverId:1,serverName:"Web Server 01",status:ee.Active,createdAt:"2024-02-01T14:20:00Z",backupDate:"2024-02-05T02:00:00Z"},{id:3,name:"old_backup",type:"MySQL",username:"backup_user",sizeInMB:128.3,serverId:2,serverName:"Database Server",status:ee.Inactive,createdAt:"2023-12-01T09:15:00Z",backupDate:"2024-01-10T02:00:00Z"}]),r([{id:1,name:"Web Server 01",ipAddress:"192.168.1.10",port:80,status:Y.Running,operatingSystem:"Ubuntu 22.04",totalMemoryMB:8192,availableMemoryMB:5400,cpuUsagePercent:25.3,diskUsagePercent:42.1,createdAt:"2024-01-15T10:30:00Z",lastUpdated:new Date().toISOString()},{id:2,name:"Database Server",ipAddress:"192.168.1.20",port:3306,status:Y.Running,operatingSystem:"CentOS 8",totalMemoryMB:16384,availableMemoryMB:12800,cpuUsagePercent:15.7,diskUsagePercent:67.8,createdAt:"2024-01-20T14:20:00Z",lastUpdated:new Date().toISOString()}])}finally{a(!1)}},E=()=>{h(null),u.resetFields(),d(!0)},D=k=>{h(k),u.setFieldsValue({name:k.name,type:k.type,username:k.username,sizeInMB:k.sizeInMB,serverId:k.serverId,status:k.status}),d(!0)},j=async k=>{try{await Ot.delete(k),I.success("Database deleted successfully"),f()}catch(N){I.error("Failed to delete database"),console.error("Delete database error:",N)}},A=async()=>{try{const k=await u.validateFields();l?(await Ot.update(l.id,k),I.success("Database updated successfully")):(await Ot.create(k),I.success("Database created successfully")),d(!1),f()}catch(k){k instanceof Error&&k.message.includes("API Error")?I.error("Failed to save database - API not available"):I.error("Please check all required fields"),console.error("Save database error:",k)}},F=k=>{switch(k){case ee.Active:return"green";case ee.Inactive:return"orange";case ee.Suspended:return"red";case ee.Corrupted:return"red";default:return"default"}},P=k=>{switch(k){case ee.Active:return"Active";case ee.Inactive:return"Inactive";case ee.Suspended:return"Suspended";case ee.Corrupted:return"Corrupted";default:return"Unknown"}},T=k=>{const N=n.find(ye=>ye.id===k);return N?N.name:`Server ${k}`},C=k=>k>=1024?`${(k/1024).toFixed(1)} GB`:`${k.toFixed(1)} MB`,S=[{title:"Database Name",dataIndex:"name",key:"name",render:k=>t.jsxs(W,{children:[t.jsx(Ne,{style:{color:"#1890ff"}}),t.jsx("span",{style:{fontWeight:"bold"},children:k})]}),sorter:(k,N)=>k.name.localeCompare(N.name)},{title:"Type",dataIndex:"type",key:"type",render:k=>t.jsx(J,{color:k==="MySQL"?"blue":k==="PostgreSQL"?"green":"purple",children:k}),filters:[{text:"MySQL",value:"MySQL"},{text:"PostgreSQL",value:"PostgreSQL"},{text:"SQL Server",value:"SQL Server"},{text:"MongoDB",value:"MongoDB"}],onFilter:(k,N)=>N.type===k},{title:"Server",dataIndex:"serverId",key:"serverId",render:k=>T(k),filters:n.map(k=>({text:k.name,value:k.id})),onFilter:(k,N)=>N.serverId===k},{title:"Size",dataIndex:"sizeInMB",key:"sizeInMB",render:k=>t.jsxs(W,{children:[t.jsx(hn,{}),C(k)]}),sorter:(k,N)=>k.sizeInMB-N.sizeInMB},{title:"Status",dataIndex:"status",key:"status",render:k=>t.jsx(J,{color:F(k),children:P(k)}),filters:[{text:"Active",value:ee.Active},{text:"Inactive",value:ee.Inactive},{text:"Suspended",value:ee.Suspended},{text:"Corrupted",value:ee.Corrupted}],onFilter:(k,N)=>N.status===k},{title:"Username",dataIndex:"username",key:"username",responsive:["md"]},{title:"Last Backup",dataIndex:"backupDate",key:"backupDate",render:k=>k?new Date(k).toLocaleDateString():"Never",sorter:(k,N)=>!k.backupDate&&!N.backupDate?0:k.backupDate?N.backupDate?new Date(k.backupDate).getTime()-new Date(N.backupDate).getTime():-1:1,responsive:["lg"]},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:k=>new Date(k).toLocaleDateString(),sorter:(k,N)=>new Date(k.createdAt).getTime()-new Date(N.createdAt).getTime(),responsive:["lg"]},{title:"Actions",key:"actions",render:(k,N)=>t.jsxs(W,{size:"small",children:[t.jsx(he,{title:"Edit Database",children:t.jsx($,{type:"text",icon:t.jsx(ct,{}),onClick:()=>D(N)})}),t.jsx(he,{title:"Database Settings",children:t.jsx($,{type:"text",icon:t.jsx(as,{}),onClick:()=>I.info("Database settings coming soon")})}),t.jsx(Ee,{title:"Delete Database",description:"Are you sure you want to delete this database? This action cannot be undone.",onConfirm:()=>j(N.id),okText:"Yes",cancelText:"No",children:t.jsx(he,{title:"Delete Database",children:t.jsx($,{type:"text",danger:!0,icon:t.jsx(Ae,{})})})})]})}];if(i)return t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:t.jsx(We,{size:"large"})});const m=s.filter(k=>k.status===ee.Active),g=s.reduce((k,N)=>k+N.sizeInMB,0),B=s.filter(k=>k.backupDate);return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsxs(xl,{level:2,children:[t.jsx(Ne,{})," Database Management"]}),t.jsxs(W,{children:[t.jsx($,{icon:t.jsx(Qe,{}),onClick:f,loading:i,children:"Refresh"}),t.jsx($,{type:"primary",icon:t.jsx(Te,{}),onClick:E,children:"Add Database"})]})]}),p&&t.jsx(me,{message:"API Connection Issue",description:"Unable to connect to API. Showing sample data for demonstration.",type:"warning",showIcon:!0,style:{marginBottom:"16px"},closable:!0}),t.jsxs(se,{gutter:[16,16],style:{marginBottom:"24px"},children:[t.jsx(z,{xs:24,sm:6,children:t.jsx(U,{children:t.jsx(G,{title:"Total Databases",value:s.length,prefix:t.jsx(Ne,{}),valueStyle:{color:"#1890ff"}})})}),t.jsx(z,{xs:24,sm:6,children:t.jsx(U,{children:t.jsx(G,{title:"Active Databases",value:m.length,prefix:t.jsx(Ve,{}),valueStyle:{color:"#3f8600"}})})}),t.jsx(z,{xs:24,sm:6,children:t.jsx(U,{children:t.jsx(G,{title:"Total Size",value:C(g),prefix:t.jsx(hn,{}),valueStyle:{color:"#722ed1"}})})}),t.jsx(z,{xs:24,sm:6,children:t.jsx(U,{children:t.jsx(G,{title:"Backed Up",value:B.length,suffix:`/ ${s.length}`,prefix:t.jsx(Ne,{}),valueStyle:{color:"#fa8c16"}})})})]}),t.jsx(U,{children:t.jsx(fe,{columns:S,dataSource:s,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(k,N)=>`${N[0]}-${N[1]} of ${k} databases`}})}),t.jsx(ie,{title:l?"Edit Database":"Add New Database",open:o,onOk:A,onCancel:()=>d(!1),width:600,children:t.jsxs(b,{form:u,layout:"vertical",initialValues:{type:"MySQL",status:ee.Active},children:[t.jsx(b.Item,{name:"name",label:"Database Name",rules:[{required:!0,message:"Please enter database name"},{pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/,message:"Database name must start with letter or underscore and contain only alphanumeric characters and underscores"}],children:t.jsx(L,{placeholder:"my_database"})}),t.jsx(b.Item,{name:"type",label:"Database Type",rules:[{required:!0,message:"Please select database type"}],children:t.jsxs(q,{placeholder:"Select database type",children:[t.jsx(ke,{value:"MySQL",children:"MySQL"}),t.jsx(ke,{value:"PostgreSQL",children:"PostgreSQL"}),t.jsx(ke,{value:"SQL Server",children:"SQL Server"}),t.jsx(ke,{value:"MongoDB",children:"MongoDB"}),t.jsx(ke,{value:"SQLite",children:"SQLite"})]})}),t.jsx(b.Item,{name:"serverId",label:"Server",rules:[{required:!0,message:"Please select a server"}],children:t.jsx(q,{placeholder:"Select a server",children:n.map(k=>t.jsxs(ke,{value:k.id,children:[k.name," (",k.ipAddress,")"]},k.id))})}),t.jsx(b.Item,{name:"username",label:"Database User",rules:[{required:!0,message:"Please enter database username"}],children:t.jsx(L,{placeholder:"db_user"})}),t.jsx(b.Item,{name:"sizeInMB",label:"Size (MB)",rules:[{required:!0,message:"Please enter database size"},{type:"number",min:0,message:"Size must be a positive number"}],children:t.jsx(L,{type:"number",placeholder:"256"})}),t.jsx(b.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:t.jsxs(q,{placeholder:"Select status",children:[t.jsx(ke,{value:ee.Active,children:"Active"}),t.jsx(ke,{value:ee.Inactive,children:"Inactive"}),t.jsx(ke,{value:ee.Suspended,children:"Suspended"}),t.jsx(ke,{value:ee.Corrupted,children:"Corrupted"})]})})]})})]})},{Title:yl}=_e,{TextArea:bl}=L,wl=()=>{const[s,e]=c.useState({currentPath:"/",items:[],loading:!1,selectedItems:[],clipboardItem:null}),[n,r]=c.useState({visible:!1,mode:"view"}),[i,a]=c.useState({visible:!1}),[o]=b.useForm(),d=c.useCallback(async()=>{e(C=>({...C,loading:!0}));try{const C=await Be.browse(s.currentPath);e(S=>({...S,items:C,loading:!1,selectedItems:[]}))}catch(C){console.error("Failed to load directory contents:",C),I.error("Failed to load directory contents"),e(S=>({...S,loading:!1}))}},[s.currentPath]);c.useEffect(()=>{d()},[d]);const l=C=>{e(S=>({...S,currentPath:C}))},h=()=>{if(s.currentPath!=="/"){const C=s.currentPath.split("/").slice(0,-1).join("/")||"/";l(C)}},u=C=>{C.isDirectory?l(C.fullPath):p(C.fullPath,"view")},p=async(C,S)=>{if(r({visible:!0,mode:S,filePath:C,loading:!0}),S!=="create")try{const m=await Be.readFile(C);r(g=>({...g,content:m.content,loading:!1}))}catch(m){console.error("Failed to read file:",m),I.error("Failed to read file"),r({visible:!1,mode:"view"})}else r(m=>({...m,content:"",loading:!1}))},_=async()=>{if(!(!n.filePath||!n.content))try{await Be.writeFile(n.filePath,n.content),I.success("File saved successfully"),r({visible:!1,mode:"view"}),d()}catch(C){console.error("Failed to save file:",C),I.error("Failed to save file")}},f=async C=>{const S=s.currentPath==="/"?`/${C.name}`:`${s.currentPath}/${C.name}`;try{await Be.createDirectory(S),I.success("Directory created successfully"),a({visible:!1}),o.resetFields(),d()}catch(m){console.error("Failed to create directory:",m),I.error("Failed to create directory")}},E=async C=>{ie.confirm({title:"Delete Item",content:`Are you sure you want to delete "${C.split("/").pop()}"?`,okType:"danger",onOk:async()=>{try{C.endsWith("/")?await Be.deleteDirectory(C):await Be.deleteFile(C),I.success("Item deleted successfully"),d()}catch(S){console.error("Failed to delete item:",S),I.error("Failed to delete item")}}})},D=C=>{e(S=>({...S,clipboardItem:{path:C,operation:"copy"}})),I.info("Item copied to clipboard")},j=C=>{e(S=>({...S,clipboardItem:{path:C,operation:"cut"}})),I.info("Item cut to clipboard")},A=async()=>{if(!s.clipboardItem)return;const C=s.clipboardItem.path.split("/").pop()||"",S=s.currentPath==="/"?`/${C}`:`${s.currentPath}/${C}`;try{s.clipboardItem.operation==="copy"?(await Be.copy(s.clipboardItem.path,S),I.success("Item copied successfully")):(await Be.move(s.clipboardItem.path,S),I.success("Item moved successfully"),e(m=>({...m,clipboardItem:null}))),d()}catch(m){console.error("Failed to paste item:",m),I.error("Failed to paste item")}},F=()=>{const C=s.currentPath.split("/").filter(g=>g),S=[{title:"Root",onClick:()=>l("/")}];let m="";return C.forEach(g=>{m+=`/${g}`,S.push({title:g,onClick:()=>l(m)})}),S},P=C=>{if(C===0)return"0 B";const S=1024,m=["B","KB","MB","GB"],g=Math.floor(Math.log(C)/Math.log(S));return parseFloat((C/Math.pow(S,g)).toFixed(1))+" "+m[g]},T=[{title:"Name",dataIndex:"name",key:"name",render:(C,S)=>t.jsxs(W,{children:[S.isDirectory?t.jsx(Zt,{style:{color:"#1890ff"}}):t.jsx(dr,{}),t.jsx("a",{onClick:()=>u(S),children:C})]}),sorter:(C,S)=>C.name.localeCompare(S.name)},{title:"Size",dataIndex:"sizeBytes",key:"size",render:(C,S)=>S.isDirectory?"-":P(C),sorter:(C,S)=>C.sizeBytes-S.sizeBytes},{title:"Modified",dataIndex:"lastModified",key:"lastModified",render:C=>new Date(C).toLocaleString(),sorter:(C,S)=>new Date(C.lastModified).getTime()-new Date(S.lastModified).getTime()},{title:"Permissions",dataIndex:"permissions",key:"permissions",render:C=>t.jsx(J,{children:C})},{title:"Actions",key:"actions",render:(C,S)=>t.jsx(Es,{menu:{items:[{key:"view",icon:t.jsx(ur,{}),label:"View",onClick:()=>p(S.fullPath,"view")},...S.isDirectory?[]:[{key:"edit",icon:t.jsx(ct,{}),label:"Edit",onClick:()=>p(S.fullPath,"edit")}],{key:"copy",icon:t.jsx(hr,{}),label:"Copy",onClick:()=>D(S.fullPath)},{key:"cut",icon:t.jsx(io,{}),label:"Cut",onClick:()=>j(S.fullPath)},{key:"delete",icon:t.jsx(Ae,{}),label:"Delete",danger:!0,onClick:()=>E(S.fullPath)}]},trigger:["click"],children:t.jsx($,{icon:t.jsx(Hn,{})})})}];return t.jsxs("div",{children:[t.jsxs(yl,{level:2,children:[t.jsx(Gt,{})," File Manager"]}),t.jsxs(U,{children:[t.jsxs(W,{direction:"vertical",style:{width:"100%",marginBottom:"16px"},children:[t.jsxs(W,{children:[t.jsx($,{icon:t.jsx(Gi,{}),onClick:h,disabled:s.currentPath==="/",children:"Up"}),t.jsx(cr,{items:F()})]}),t.jsxs(W,{children:[t.jsx($,{icon:t.jsx(Te,{}),onClick:()=>p("","create"),children:"New File"}),t.jsx($,{icon:t.jsx(Ia,{}),onClick:()=>a({visible:!0}),children:"New Folder"}),s.clipboardItem&&t.jsx($,{onClick:A,children:"Paste"})]})]}),t.jsx(fe,{columns:T,dataSource:s.items,rowKey:"fullPath",loading:s.loading,pagination:!1,size:"small",scroll:{y:400}})]}),t.jsx(ie,{title:n.mode==="create"?"Create New File":n.mode==="edit"?"Edit File":"View File",open:n.visible,onCancel:()=>r({visible:!1,mode:"view"}),onOk:n.mode==="edit"?_:void 0,okText:n.mode==="edit"?"Save":"OK",width:800,children:n.mode==="create"?t.jsx(b,{layout:"vertical",children:t.jsx(b.Item,{label:"File Name",required:!0,children:t.jsx(L,{placeholder:"Enter file name",onChange:C=>{const S=C.target.value,m=s.currentPath==="/"?`/${S}`:`${s.currentPath}/${S}`;r(g=>({...g,filePath:m}))}})})}):t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsx("strong",{children:"File:"})," ",n.filePath]}),n.loading?t.jsx(We,{}):t.jsx(bl,{value:n.content,onChange:C=>r(S=>({...S,content:C.target.value})),readOnly:n.mode==="view",rows:20,style:{fontFamily:"monospace"}})]})}),t.jsx(ie,{title:"Create New Directory",open:i.visible,onCancel:()=>a({visible:!1}),onOk:()=>o.submit(),okText:"Create",children:t.jsx(b,{form:o,layout:"vertical",onFinish:f,children:t.jsx(b.Item,{name:"name",label:"Directory Name",rules:[{required:!0,message:"Please enter directory name"}],children:t.jsx(L,{placeholder:"Enter directory name"})})})})]})},jl=()=>{const[s,e]=c.useState([]),[n,r]=c.useState({}),[i,a]=c.useState([]),[o,d]=c.useState(!0),l=c.useRef(null),h=async()=>{try{const f=await Me.getAll();e(f)}catch(f){console.error("Failed to load servers:",f)}finally{d(!1)}},u=c.useCallback(async()=>{try{const f=new Jn().withUrl("/hubs/monitoring",{accessTokenFactory:()=>localStorage.getItem("authToken")||""}).withAutomaticReconnect().build();f.on("ReceiveServerMetrics",(E,D)=>{r(j=>({...j,[E]:D}))}),f.on("ReceiveAlert",E=>{a(D=>[E,...D.slice(0,9)])}),await f.start(),l.current=f,s.forEach(E=>{f.invoke("SubscribeToServerMetrics",E.id)})}catch(f){console.error("SignalR connection failed:",f)}},[s]);c.useEffect(()=>(h(),()=>{l.current&&l.current.stop()}),[]),c.useEffect(()=>{s.length>0&&!l.current&&u()},[s,u]);const p=f=>{switch(f){case"Running":return"green";case"Stopped":return"red";case"Error":return"red";case"Maintenance":return"orange";default:return"gray"}},_=f=>{if(f===0)return"0 B";const E=1024,D=["B","KB","MB","GB"],j=Math.floor(Math.log(f)/Math.log(E));return parseFloat((f/Math.pow(E,j)).toFixed(2))+" "+D[j]};return o?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:t.jsx(We,{size:"large"})}):t.jsxs("div",{children:[t.jsx("h1",{children:"System Monitoring"}),i.length>0&&t.jsx(U,{title:"Recent Alerts",style:{marginBottom:16},children:t.jsx(Yt,{dataSource:i,renderItem:f=>t.jsx(Yt.Item,{children:t.jsx(me,{message:`${f.serverName}: ${f.message}`,type:f.severity==="Critical"?"error":f.severity==="Warning"?"warning":"info",showIcon:!0,style:{width:"100%"}})})})}),t.jsx(se,{gutter:[16,16],children:s.map(f=>{const E=n[f.id];return t.jsx(z,{xs:24,lg:12,xl:8,children:t.jsx(U,{title:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{children:f.name}),t.jsx(J,{color:p(E?.status||f.status),children:E?.status||f.status})]}),size:"small",children:E?t.jsxs(t.Fragment,{children:[t.jsxs(se,{gutter:[8,8],children:[t.jsxs(z,{span:12,children:[t.jsx(G,{title:"CPU Usage",value:E.cpuUsage,suffix:"%",valueStyle:{color:E.cpuUsage>80?"#cf1322":"#3f8600"}}),t.jsx(ls,{percent:E.cpuUsage,size:"small",status:E.cpuUsage>90?"exception":"active"})]}),t.jsxs(z,{span:12,children:[t.jsx(G,{title:"Memory Usage",value:E.memoryUsage,suffix:"%",valueStyle:{color:E.memoryUsage>80?"#cf1322":"#3f8600"}}),t.jsx(ls,{percent:E.memoryUsage,size:"small",status:E.memoryUsage>90?"exception":"active"})]})]}),t.jsxs(se,{gutter:[8,8],style:{marginTop:8},children:[t.jsxs(z,{span:12,children:[t.jsx(G,{title:"Disk Usage",value:E.diskUsage,suffix:"%",valueStyle:{color:E.diskUsage>90?"#cf1322":"#3f8600"}}),t.jsx(ls,{percent:E.diskUsage,size:"small",status:E.diskUsage>95?"exception":"active"})]}),t.jsx(z,{span:12,children:t.jsx(G,{title:"Active Connections",value:E.activeConnections})})]}),t.jsxs(se,{gutter:[8,8],style:{marginTop:8},children:[t.jsx(z,{span:12,children:t.jsx(G,{title:"Network In",value:_(E.networkIn),suffix:"/s"})}),t.jsx(z,{span:12,children:t.jsx(G,{title:"Network Out",value:_(E.networkOut),suffix:"/s"})})]}),t.jsxs("div",{style:{marginTop:8,fontSize:"12px",color:"#666"},children:["Last updated: ",new Date(E.timestamp).toLocaleTimeString()]})]}):t.jsxs("div",{style:{textAlign:"center",padding:"20px"},children:[t.jsx(We,{size:"small"}),t.jsx("div",{style:{marginTop:8},children:"Waiting for metrics..."})]})})},f.id)})})]})},{Option:Kt}=q,Sl=()=>{const[s,e]=c.useState([]),[n,r]=c.useState(!0),[i,a]=c.useState(null),[o,d]=c.useState(!1),[l,h]=c.useState(!1),[u,p]=c.useState(null),[_]=b.useForm();c.useEffect(()=>{f()},[]);const f=async()=>{try{r(!0);const S=await Wt.getAll();e(S),a(null)}catch(S){a("Failed to load users. You may not have admin privileges."),console.error("Error fetching users:",S)}finally{r(!1)}},E=async S=>{try{await Wt.create(S),I.success("User created successfully"),d(!1),_.resetFields(),f()}catch(m){I.error("Failed to create user"),console.error("Error creating user:",m)}},D=async S=>{if(u)try{await Wt.update(u.id,S),I.success("User updated successfully"),h(!1),p(null),_.resetFields(),f()}catch(m){I.error("Failed to update user"),console.error("Error updating user:",m)}},j=async S=>{try{await Wt.delete(S),I.success("User deleted successfully"),f()}catch(m){I.error("Failed to delete user"),console.error("Error deleting user:",m)}},A=()=>{d(!0)},F=S=>{p(S),_.setFieldsValue(S),h(!0)},P=()=>{d(!1),_.resetFields()},T=()=>{h(!1),p(null),_.resetFields()},C=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"Username",dataIndex:"username",key:"username"},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role",render:S=>t.jsx(J,{color:S==="Administrator"?"red":"blue",children:S})},{title:"Actions",key:"actions",render:(S,m)=>t.jsxs(t.Fragment,{children:[t.jsx($,{type:"link",onClick:()=>F(m),children:"Edit"}),t.jsx(Ee,{title:"Are you sure you want to delete this user?",onConfirm:()=>j(m.id),okText:"Yes",cancelText:"No",children:t.jsx($,{type:"link",danger:!0,children:"Delete"})})]})}];return n?t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:t.jsx(We,{size:"large"})}):t.jsxs("div",{children:[t.jsx("h1",{children:"User Management"}),t.jsx($,{type:"primary",onClick:A,style:{marginBottom:16},children:"Create User"}),i&&t.jsx(me,{message:"Error",description:i,type:"error",showIcon:!0,style:{marginBottom:16}}),t.jsx(U,{children:t.jsx(fe,{columns:C,dataSource:s,rowKey:"id",pagination:!1})}),t.jsx(ie,{title:"Create User",open:o,onCancel:P,footer:null,children:t.jsxs(b,{form:_,layout:"vertical",onFinish:E,children:[t.jsx(b.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please enter username"}],children:t.jsx(L,{})}),t.jsx(b.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:t.jsx(L,{})}),t.jsx(b.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please enter password"}],children:t.jsx(L.Password,{})}),t.jsx(b.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select role"}],children:t.jsxs(q,{children:[t.jsx(Kt,{value:"User",children:"User"}),t.jsx(Kt,{value:"Administrator",children:"Administrator"})]})}),t.jsxs(b.Item,{children:[t.jsx($,{type:"primary",htmlType:"submit",children:"Create"}),t.jsx($,{onClick:P,style:{marginLeft:8},children:"Cancel"})]})]})}),t.jsx(ie,{title:"Edit User",open:l,onCancel:T,footer:null,children:t.jsxs(b,{form:_,layout:"vertical",onFinish:D,children:[t.jsx(b.Item,{name:"username",label:"Username",rules:[{required:!0,message:"Please enter username"}],children:t.jsx(L,{})}),t.jsx(b.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:t.jsx(L,{})}),t.jsx(b.Item,{name:"password",label:"Password (leave empty to keep current)",children:t.jsx(L.Password,{})}),t.jsx(b.Item,{name:"role",label:"Role",rules:[{required:!0,message:"Please select role"}],children:t.jsxs(q,{children:[t.jsx(Kt,{value:"User",children:"User"}),t.jsx(Kt,{value:"Administrator",children:"Administrator"})]})}),t.jsxs(b.Item,{children:[t.jsx($,{type:"primary",htmlType:"submit",children:"Update"}),t.jsx($,{onClick:T,style:{marginLeft:8},children:"Cancel"})]})]})})]})};var xe=(s=>(s.Pending="Pending",s.Active="Active",s.Expired="Expired",s.Revoked="Revoked",s.Failed="Failed",s))(xe||{}),Ie=(s=>(s.DV="DV",s.OV="OV",s.EV="EV",s.SelfSigned="SelfSigned",s))(Ie||{}),ae=(s=>(s.Database="Database",s.Files="Files",s.FullServer="FullServer",s.Website="Website",s.Email="Email",s))(ae||{}),le=(s=>(s.Pending="Pending",s.InProgress="InProgress",s.Completed="Completed",s.Failed="Failed",s.Cancelled="Cancelled",s))(le||{}),gt=(s=>(s.Info="Info",s.Warning="Warning",s.Critical="Critical",s))(gt||{}),tt=(s=>(s.Active="Active",s.Acknowledged="Acknowledged",s.Resolved="Resolved",s))(tt||{}),Zn=(s=>(s.CpuUsage="CpuUsage",s.MemoryUsage="MemoryUsage",s.DiskUsage="DiskUsage",s.ServiceDown="ServiceDown",s.NetworkLatency="NetworkLatency",s.Custom="Custom",s))(Zn||{}),Is=(s=>(s.Email="Email",s.Webhook="Webhook",s.SMS="SMS",s.Slack="Slack",s))(Is||{});const _l=()=>{const[s,e]=c.useState([]),[n,r]=c.useState([]),[i,a]=c.useState([]),[o,d]=c.useState(!1),[l,h]=c.useState(!1),[u]=b.useForm();c.useEffect(()=>{p(),_(),f()},[]);const p=async()=>{try{d(!0);const m=await Mt.getAll();e(m)}catch(m){console.error("Failed to load SSL certificates:",m),I.error("Failed to load SSL certificates")}finally{d(!1)}},_=async()=>{try{const m=await Mt.getExpiringSoon();r(m)}catch(m){console.error("Failed to load expiring certificates:",m)}},f=async()=>{try{const m=await rt.getAll();a(m)}catch(m){console.error("Failed to load domains:",m),I.error("Failed to load domains")}},E=async m=>{try{const g={domainId:m.domainId,type:m.type,autoRenew:m.autoRenew,email:m.email};await Mt.request(g),I.success("SSL certificate request submitted successfully"),h(!1),u.resetFields(),p()}catch(g){console.error("Failed to request SSL certificate:",g),I.error("Failed to request SSL certificate")}},D=async m=>{try{await Mt.renew(m),I.success("Certificate renewal initiated"),p()}catch(g){console.error("Failed to renew certificate:",g),I.error("Failed to renew certificate")}},j=async m=>{try{await Mt.delete(m),I.success("Certificate deleted successfully"),p(),_()}catch(g){console.error("Failed to delete certificate:",g),I.error("Failed to delete certificate")}},A=m=>{switch(m){case xe.Active:return"green";case xe.Pending:return"orange";case xe.Expired:return"red";case xe.Revoked:return"red";case xe.Failed:return"red";default:return"default"}},F=m=>{switch(m){case xe.Active:return"Active";case xe.Pending:return"Pending";case xe.Expired:return"Expired";case xe.Revoked:return"Revoked";case xe.Failed:return"Failed";default:return"Unknown"}},P=m=>{switch(m){case Ie.DV:return"Let's Encrypt";case Ie.OV:return"Organization Validated";case Ie.EV:return"Extended Validation";case Ie.SelfSigned:return"Self-Signed";default:return"Unknown"}},T=m=>{const g=Rt(m),B=Rt(),k=g.diff(B,"day");return k<=30&&k>0},C=m=>Rt(m).isBefore(Rt()),S=[{title:"Domain",dataIndex:"domainName",key:"domainName",render:(m,g)=>t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:"bold"},children:m}),g.domain&&t.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["Domain: ",g.domain.name]})]})},{title:"Status",dataIndex:"status",key:"status",render:m=>t.jsx(J,{color:A(m),children:F(m)})},{title:"Type",dataIndex:"type",key:"type",render:m=>P(m)},{title:"Expires",dataIndex:"expiresAt",key:"expiresAt",render:m=>{const g=C(m),B=T(m);return t.jsxs("div",{children:[t.jsx("div",{style:{color:g?"#ff4d4f":B?"#faad14":"inherit",fontWeight:g||B?"bold":"normal"},children:Rt(m).format("YYYY-MM-DD")}),g&&t.jsx("div",{style:{fontSize:"12px",color:"#ff4d4f"},children:"Expired"}),B&&!g&&t.jsx("div",{style:{fontSize:"12px",color:"#faad14"},children:"Expires Soon"})]})}},{title:"Auto Renew",dataIndex:"autoRenew",key:"autoRenew",render:m=>m?t.jsx(Ve,{style:{color:"#52c41a"}}):t.jsx(Nn,{style:{color:"#ff4d4f"}})},{title:"Actions",key:"actions",render:(m,g)=>t.jsxs(W,{size:"small",children:[g.status===xe.Active&&t.jsx($,{size:"small",onClick:()=>D(g.id),icon:t.jsx(Qe,{}),children:"Renew"}),t.jsx($,{size:"small",danger:!0,onClick:()=>j(g.id),children:"Delete"})]})}];return t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:16},children:[t.jsx("h2",{children:"SSL Certificates"}),t.jsx("p",{children:"Manage SSL certificates for your domains"})]}),t.jsx("div",{style:{marginBottom:16},children:t.jsxs(W,{children:[t.jsx(U,{size:"small",children:t.jsx(G,{title:"Total Certificates",value:s.length,prefix:t.jsx(Ve,{})})}),t.jsx(U,{size:"small",children:t.jsx(G,{title:"Active Certificates",value:s.filter(m=>m.status===xe.Active).length,prefix:t.jsx(Ve,{}),valueStyle:{color:"#52c41a"}})}),t.jsx(U,{size:"small",children:t.jsx(G,{title:"Expiring Soon",value:n.length,prefix:t.jsx(Bs,{}),valueStyle:{color:"#faad14"}})})]})}),n.length>0&&t.jsx(me,{message:`⚠️ ${n.length} certificate(s) expiring within 30 days`,description:"Please renew these certificates to avoid service interruption.",type:"warning",showIcon:!0,style:{marginBottom:16}}),t.jsx("div",{style:{marginBottom:16},children:t.jsxs(W,{children:[t.jsx($,{type:"primary",icon:t.jsx(Te,{}),onClick:()=>h(!0),children:"Request Certificate"}),t.jsx($,{icon:t.jsx(Qe,{}),onClick:()=>{p(),_()},children:"Refresh"})]})}),t.jsx(fe,{columns:S,dataSource:s,rowKey:"id",loading:o,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(m,g)=>`${g[0]}-${g[1]} of ${m} certificates`}}),t.jsx(ie,{title:"Request SSL Certificate",open:l,onCancel:()=>{h(!1),u.resetFields()},footer:null,children:t.jsxs(b,{form:u,layout:"vertical",onFinish:E,children:[t.jsx(b.Item,{name:"domainId",label:"Domain",rules:[{required:!0,message:"Please select a domain"}],children:t.jsx(q,{placeholder:"Select a domain",children:i.map(m=>t.jsx(q.Option,{value:m.id,children:m.domainName},m.id))})}),t.jsx(b.Item,{name:"email",label:"Email Address",rules:[{required:!0,message:"Please enter an email address"},{type:"email",message:"Please enter a valid email address"}],children:t.jsx(L,{placeholder:"admin@example.com"})}),t.jsx(b.Item,{name:"type",label:"Certificate Type",initialValue:Ie.DV,children:t.jsxs(q,{children:[t.jsx(q.Option,{value:Ie.DV,children:"Domain Validated (DV) - Let's Encrypt"}),t.jsx(q.Option,{value:Ie.OV,children:"Organization Validated (OV)"}),t.jsx(q.Option,{value:Ie.EV,children:"Extended Validation (EV)"}),t.jsx(q.Option,{value:Ie.SelfSigned,children:"Self-Signed (Development)"})]})}),t.jsx(b.Item,{name:"autoRenew",label:"Auto Renew",valuePropName:"checked",initialValue:!0,children:t.jsx("input",{type:"checkbox"})}),t.jsx(b.Item,{name:"validationMethod",label:"Validation Method",children:t.jsxs(q,{placeholder:"Select validation method",children:[t.jsx(q.Option,{value:"http-01",children:"HTTP-01 (Recommended)"}),t.jsx(q.Option,{value:"dns-01",children:"DNS-01"})]})}),t.jsx(b.Item,{name:"notes",label:"Notes",children:t.jsx(L.TextArea,{placeholder:"Optional notes about this certificate"})}),t.jsx(b.Item,{style:{marginBottom:0,textAlign:"right"},children:t.jsxs(W,{children:[t.jsx($,{onClick:()=>{h(!1),u.resetFields()},children:"Cancel"}),t.jsx($,{type:"primary",htmlType:"submit",children:"Request Certificate"})]})})]})})]})},{Title:Cl}=_e,{TabPane:xs}=yt,kl=()=>{const[s,e]=c.useState([]),[n,r]=c.useState([]),[i,a]=c.useState(!0),[o,d]=c.useState(!1),[l,h]=c.useState(null),[u]=b.useForm(),[p,_]=c.useState(null),[f,E]=c.useState("accounts"),[D,j]=c.useState(!1),[A,F]=c.useState(!1),[P,T]=c.useState(null),[C]=b.useForm(),[S]=b.useForm();c.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0),_(null);const[x,M]=await Promise.all([ze.getAll(),rt.getAll()]);e(x),r(M)}catch(x){console.error("Failed to load data:",x),_(x instanceof Error?x.message:"Failed to load email accounts"),e([{id:1,emailAddress:"admin@example.com",domainId:1,domainName:"example.com",passwordHash:"hashed_password",quotaMB:1024,usedQuotaMB:256,isActive:!0,createdAt:"2024-01-15T10:30:00Z",lastLoginAt:"2024-01-20T14:30:00Z",forwarders:[],aliases:[]},{id:2,emailAddress:"support@example.com",domainId:1,domainName:"example.com",passwordHash:"hashed_password",quotaMB:512,usedQuotaMB:128,isActive:!0,createdAt:"2024-02-01T14:20:00Z",lastLoginAt:"2024-02-05T09:15:00Z",forwarders:[{id:1,emailAccountId:2,forwardTo:"admin@example.com",createdAt:"2024-02-01T14:20:00Z"}],aliases:[{id:1,emailAccountId:2,aliasAddress:"help@example.com",createdAt:"2024-02-01T14:20:00Z"}]},{id:3,emailAddress:"old@example.com",domainId:2,domainName:"old-domain.com",passwordHash:"hashed_password",quotaMB:256,usedQuotaMB:0,isActive:!1,createdAt:"2023-12-01T09:15:00Z",lastLoginAt:null,forwarders:[],aliases:[]}]),r([{id:1,domainName:"example.com",serverId:1,serverName:"Web Server 01",documentRoot:"/var/www/example.com",isActive:!0,sslEnabled:!0,createdAt:"2024-01-15T10:30:00Z",lastUpdated:"2024-01-15T10:30:00Z"},{id:2,domainName:"old-domain.com",serverId:2,serverName:"Database Server",documentRoot:"/var/www/old-domain.com",isActive:!1,sslEnabled:!0,createdAt:"2023-12-01T09:15:00Z",lastUpdated:"2024-01-10T16:45:00Z"}])}finally{a(!1)}},g=()=>{h(null),u.resetFields(),d(!0)},B=x=>{h(x),u.setFieldsValue({emailAddress:x.emailAddress.split("@")[0],domainId:x.domainId,password:"",quotaMB:x.quotaMB,isActive:x.isActive}),d(!0)},k=async x=>{try{await ze.delete(x),I.success("Email account deleted successfully"),m()}catch(M){I.error("Failed to delete email account"),console.error("Delete email account error:",M)}},N=async()=>{try{const x=await u.validateFields(),M={emailAddress:`${x.emailAddress}@${n.find(be=>be.id===x.domainId)?.domainName}`,domainId:x.domainId,password:x.password,quotaMB:x.quotaMB,isActive:x.isActive};if(l){const be={password:x.password||void 0,quotaMB:x.quotaMB,isActive:x.isActive};await ze.update(l.id,be),I.success("Email account updated successfully")}else await ze.create(M),I.success("Email account created successfully");d(!1),m()}catch(x){x instanceof Error&&x.message.includes("API Error")?I.error("Failed to save email account - API not available"):I.error("Please check all required fields"),console.error("Save email account error:",x)}},ye=x=>{T(x),C.resetFields(),j(!0)},Ce=async()=>{try{const x=await C.validateFields();await ze.addForwarder(P,x),I.success("Forwarder added successfully"),j(!1),m()}catch(x){I.error("Failed to add forwarder"),console.error("Add forwarder error:",x)}},Je=async x=>{try{await ze.deleteForwarder(x),I.success("Forwarder deleted successfully"),m()}catch(M){I.error("Failed to delete forwarder"),console.error("Delete forwarder error:",M)}},_t=x=>{T(x),S.resetFields(),F(!0)},dt=async()=>{try{const x=await S.validateFields();await ze.addAlias(P,x),I.success("Alias added successfully"),F(!1),m()}catch(x){I.error("Failed to add alias"),console.error("Add alias error:",x)}},Ct=async x=>{try{await ze.deleteAlias(x),I.success("Alias deleted successfully"),m()}catch(M){I.error("Failed to delete alias"),console.error("Delete alias error:",M)}},kt=x=>{const M=n.find(be=>be.id===x);return M?M.domainName:`Domain ${x}`},ge=x=>{const M=x.usedQuotaMB/x.quotaMB*100;return M>=90?{status:"error",color:"red"}:M>=75?{status:"warning",color:"orange"}:{status:"success",color:"green"}},It=[{title:"Email Address",dataIndex:"emailAddress",key:"emailAddress",render:x=>t.jsxs(W,{children:[t.jsx(nt,{style:{color:"#1890ff"}}),t.jsx("span",{children:x})]}),sorter:(x,M)=>x.emailAddress.localeCompare(M.emailAddress)},{title:"Domain",dataIndex:"domainId",key:"domainId",render:x=>kt(x),filters:n.map(x=>({text:x.domainName,value:x.id})),onFilter:(x,M)=>M.domainId===x},{title:"Status",dataIndex:"isActive",key:"isActive",render:x=>t.jsx(J,{color:x?"green":"red",children:x?"Active":"Inactive"}),filters:[{text:"Active",value:!0},{text:"Inactive",value:!1}],onFilter:(x,M)=>M.isActive===x},{title:"Quota Usage",key:"quota",render:(x,M)=>{const be=ge(M),y=Math.round(M.usedQuotaMB/M.quotaMB*100);return t.jsx(he,{title:`${M.usedQuotaMB}MB / ${M.quotaMB}MB (${y}%)`,children:t.jsx(xt,{status:be.status,text:`${y}%`})})},sorter:(x,M)=>x.usedQuotaMB/x.quotaMB-M.usedQuotaMB/M.quotaMB},{title:"Forwarders",key:"forwarders",render:(x,M)=>t.jsx(xt,{count:M.forwarders?.length||0,showZero:!0,children:t.jsx(ft,{style:{color:"#52c41a"}})})},{title:"Aliases",key:"aliases",render:(x,M)=>t.jsx(xt,{count:M.aliases?.length||0,showZero:!0,children:t.jsx(pt,{style:{color:"#722ed1"}})})},{title:"Last Login",dataIndex:"lastLoginAt",key:"lastLoginAt",render:x=>x?new Date(x).toLocaleDateString():"Never",sorter:(x,M)=>!x.lastLoginAt&&!M.lastLoginAt?0:x.lastLoginAt?M.lastLoginAt?new Date(x.lastLoginAt).getTime()-new Date(M.lastLoginAt).getTime():-1:1,responsive:["md"]},{title:"Actions",key:"actions",render:(x,M)=>t.jsxs(W,{size:"small",children:[t.jsx(he,{title:"Edit Account",children:t.jsx($,{type:"text",icon:t.jsx(ct,{}),onClick:()=>B(M)})}),t.jsx(he,{title:"Add Forwarder",children:t.jsx($,{type:"text",icon:t.jsx(ft,{}),onClick:()=>ye(M.id)})}),t.jsx(he,{title:"Add Alias",children:t.jsx($,{type:"text",icon:t.jsx(pt,{}),onClick:()=>_t(M.id)})}),t.jsx(Ee,{title:"Delete Email Account",description:"Are you sure you want to delete this email account? This will also delete all associated forwarders and aliases.",onConfirm:()=>k(M.id),okText:"Yes",cancelText:"No",children:t.jsx(he,{title:"Delete Account",children:t.jsx($,{type:"text",danger:!0,icon:t.jsx(Ae,{})})})})]})}],Fe=[{title:"Forward To",dataIndex:"forwardTo",key:"forwardTo",render:x=>t.jsxs(W,{children:[t.jsx(ft,{style:{color:"#52c41a"}}),t.jsx("span",{children:x})]})},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:x=>new Date(x).toLocaleDateString(),sorter:(x,M)=>new Date(x.createdAt).getTime()-new Date(M.createdAt).getTime()},{title:"Actions",key:"actions",render:(x,M)=>t.jsx(Ee,{title:"Delete Forwarder",description:"Are you sure you want to delete this forwarder?",onConfirm:()=>Je(M.id),okText:"Yes",cancelText:"No",children:t.jsx($,{type:"text",danger:!0,icon:t.jsx(Ae,{})})})}],Et=[{title:"Alias Address",dataIndex:"aliasAddress",key:"aliasAddress",render:x=>t.jsxs(W,{children:[t.jsx(pt,{style:{color:"#722ed1"}}),t.jsx("span",{children:x})]})},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:x=>new Date(x).toLocaleDateString(),sorter:(x,M)=>new Date(x.createdAt).getTime()-new Date(M.createdAt).getTime()},{title:"Actions",key:"actions",render:(x,M)=>t.jsx(Ee,{title:"Delete Alias",description:"Are you sure you want to delete this alias?",onConfirm:()=>Ct(M.id),okText:"Yes",cancelText:"No",children:t.jsx($,{type:"text",danger:!0,icon:t.jsx(Ae,{})})})}];if(i)return t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:t.jsx(We,{size:"large"})});const At=s.filter(x=>x.isActive),ut=s.reduce((x,M)=>x+(M.forwarders?.length||0),0),ht=s.reduce((x,M)=>x+(M.aliases?.length||0),0),Pe=s.filter(x=>x.usedQuotaMB/x.quotaMB*100>=80);return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsxs(Cl,{level:2,children:[t.jsx(nt,{})," Email Management"]}),t.jsxs(W,{children:[t.jsx($,{icon:t.jsx(Qe,{}),onClick:m,loading:i,children:"Refresh"}),t.jsx($,{type:"primary",icon:t.jsx(Te,{}),onClick:g,children:"Add Email Account"})]})]}),p&&t.jsx(me,{message:"API Connection Issue",description:"Unable to connect to API. Showing sample data for demonstration.",type:"warning",showIcon:!0,style:{marginBottom:"16px"},closable:!0}),t.jsxs(se,{gutter:[16,16],style:{marginBottom:"24px"},children:[t.jsx(z,{xs:24,sm:6,children:t.jsx(U,{children:t.jsx(G,{title:"Total Accounts",value:s.length,prefix:t.jsx(nt,{}),valueStyle:{color:"#1890ff"}})})}),t.jsx(z,{xs:24,sm:6,children:t.jsx(U,{children:t.jsx(G,{title:"Active Accounts",value:At.length,prefix:t.jsx(Ve,{}),valueStyle:{color:"#3f8600"}})})}),t.jsx(z,{xs:24,sm:6,children:t.jsx(U,{children:t.jsx(G,{title:"Forwarders",value:ut,prefix:t.jsx(ft,{}),valueStyle:{color:"#52c41a"}})})}),t.jsx(z,{xs:24,sm:6,children:t.jsx(U,{children:t.jsx(G,{title:"Aliases",value:ht,prefix:t.jsx(pt,{}),valueStyle:{color:"#722ed1"}})})})]}),Pe.length>0&&t.jsx(me,{message:"Quota Alert",description:`${Pe.length} email account(s) are using 80% or more of their quota. Consider increasing quotas or cleaning up old emails.`,type:"warning",showIcon:!0,style:{marginBottom:"16px"},closable:!0}),t.jsx(U,{children:t.jsxs(yt,{activeKey:f,onChange:E,children:[t.jsx(xs,{tab:t.jsxs("span",{children:[t.jsx(nt,{}),"Email Accounts (",s.length,")"]}),children:t.jsx(fe,{columns:It,dataSource:s,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(x,M)=>`${M[0]}-${M[1]} of ${x} email accounts`}})},"accounts"),t.jsx(xs,{tab:t.jsxs("span",{children:[t.jsx(ft,{}),"All Forwarders (",ut,")"]}),children:s.flatMap(x=>(x.forwarders||[]).map(M=>({...M,accountEmail:x.emailAddress}))).length>0?t.jsx(fe,{columns:[{title:"Account",dataIndex:"accountEmail",key:"accountEmail",render:x=>t.jsxs(W,{children:[t.jsx($e,{}),t.jsx("span",{children:x})]})},...Fe],dataSource:s.flatMap(x=>(x.forwarders||[]).map(M=>({...M,accountEmail:x.emailAddress}))),rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(x,M)=>`${M[0]}-${M[1]} of ${x} forwarders`}}):t.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[t.jsx(ft,{style:{fontSize:"48px",color:"#d9d9d9"}}),t.jsx("div",{style:{marginTop:"16px",color:"#8c8c8c"},children:"No forwarders configured yet"})]})},"forwarders"),t.jsx(xs,{tab:t.jsxs("span",{children:[t.jsx(pt,{}),"All Aliases (",ht,")"]}),children:s.flatMap(x=>(x.aliases||[]).map(M=>({...M,accountEmail:x.emailAddress}))).length>0?t.jsx(fe,{columns:[{title:"Account",dataIndex:"accountEmail",key:"accountEmail",render:x=>t.jsxs(W,{children:[t.jsx($e,{}),t.jsx("span",{children:x})]})},...Et],dataSource:s.flatMap(x=>(x.aliases||[]).map(M=>({...M,accountEmail:x.emailAddress}))),rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(x,M)=>`${M[0]}-${M[1]} of ${x} aliases`}}):t.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[t.jsx(pt,{style:{fontSize:"48px",color:"#d9d9d9"}}),t.jsx("div",{style:{marginTop:"16px",color:"#8c8c8c"},children:"No aliases configured yet"})]})},"aliases")]})}),t.jsx(ie,{title:l?"Edit Email Account":"Add New Email Account",open:o,onOk:N,onCancel:()=>d(!1),width:600,children:t.jsxs(b,{form:u,layout:"vertical",initialValues:{isActive:!0,quotaMB:1024},children:[t.jsxs(se,{gutter:16,children:[t.jsx(z,{span:12,children:t.jsx(b.Item,{name:"emailAddress",label:"Username",rules:[{required:!0,message:"Please enter username"},{pattern:/^[a-zA-Z0-9._-]+$/,message:"Username can only contain letters, numbers, dots, underscores, and hyphens"}],children:t.jsx(L,{placeholder:"admin"})})}),t.jsx(z,{span:12,children:t.jsx(b.Item,{name:"domainId",label:"Domain",rules:[{required:!0,message:"Please select a domain"}],children:t.jsx(q,{placeholder:"Select domain",children:n.filter(x=>x.isActive).map(x=>t.jsx(q.Option,{value:x.id,children:x.domainName},x.id))})})})]}),t.jsx(b.Item,{name:"password",label:l?"New Password (leave empty to keep current)":"Password",rules:[{required:!l,message:"Please enter password"},{min:8,message:"Password must be at least 8 characters"}],children:t.jsx(L.Password,{placeholder:"Enter password"})}),t.jsx(b.Item,{name:"quotaMB",label:"Quota (MB)",rules:[{required:!0,message:"Please enter quota"},{type:"number",min:1,message:"Quota must be at least 1 MB"}],children:t.jsx(L,{type:"number",placeholder:"1024"})}),t.jsx(b.Item,{name:"isActive",label:"Active",valuePropName:"checked",children:t.jsx("input",{type:"checkbox"})})]})}),t.jsx(ie,{title:"Add Email Forwarder",open:D,onOk:Ce,onCancel:()=>j(!1),width:500,children:t.jsx(b,{form:C,layout:"vertical",children:t.jsx(b.Item,{name:"forwardTo",label:"Forward To",rules:[{required:!0,message:"Please enter forward-to email"},{type:"email",message:"Please enter a valid email address"}],children:t.jsx(L,{placeholder:"destination@example.com"})})})}),t.jsx(ie,{title:"Add Email Alias",open:A,onOk:dt,onCancel:()=>F(!1),width:500,children:t.jsx(b,{form:S,layout:"vertical",children:t.jsx(b.Item,{name:"aliasAddress",label:"Alias Address",rules:[{required:!0,message:"Please enter alias address"},{type:"email",message:"Please enter a valid email address"}],children:t.jsx(L,{placeholder:"alias@example.com"})})})})]})},{Title:Il}=_e,{Option:oe}=q,{TabPane:wn}=yt,{TextArea:jn}=L,El=()=>{const[s,e]=c.useState([]),[n,r]=c.useState([]),[i,a]=c.useState([]),[o,d]=c.useState([]),[l,h]=c.useState([]),[u,p]=c.useState(!0),[_,f]=c.useState(!1),[E,D]=c.useState(!1),[j,A]=c.useState(!1),[F,P]=c.useState(!1),[T,C]=c.useState(null),[S,m]=c.useState(null),[g,B]=c.useState(null),[k,N]=c.useState([]),[ye]=b.useForm(),[Ce]=b.useForm(),[Je]=b.useForm(),[_t,dt]=c.useState(null),[Ct,kt]=c.useState("backups");c.useEffect(()=>{ge()},[]);const ge=async()=>{try{p(!0),dt(null);const[v,O,Re,Ze,nr]=await Promise.all([Ye.getAll().catch(()=>[]),mt.getAll().catch(()=>[]),Me.getAll().catch(()=>[]),Ot.getAll().catch(()=>[]),rt.getAll().catch(()=>[])]);e(v),r(O),a(Re),d(Ze),h(nr)}catch(v){console.error("Failed to load backup data:",v),dt(v instanceof Error?v.message:"Failed to load backup data")}finally{p(!1)}},It=()=>{C(null),ye.resetFields(),f(!0)},Fe=()=>{m(null),Ce.resetFields(),D(!0)},Et=v=>{m(v),Ce.setFieldsValue(v),D(!0)},At=async v=>{try{await Ye.delete(v),I.success("Backup deleted successfully"),ge()}catch(O){I.error("Failed to delete backup"),console.error("Delete backup error:",O)}},ut=async v=>{try{await mt.delete(v),I.success("Backup schedule deleted successfully"),ge()}catch(O){I.error("Failed to delete backup schedule"),console.error("Delete schedule error:",O)}},ht=v=>{B(v),Je.resetFields(),A(!0)},Pe=async v=>{try{const O=await Ye.download(v.id),Re=window.URL.createObjectURL(O),Ze=document.createElement("a");Ze.href=Re,Ze.download=`${v.name}_${v.id}.zip`,document.body.appendChild(Ze),Ze.click(),window.URL.revokeObjectURL(Re),document.body.removeChild(Ze),I.success("Backup download started")}catch(O){I.error("Failed to download backup"),console.error("Download error:",O)}},x=async v=>{try{const O=await Ye.getLogs(v.id);N(O),B(v),P(!0)}catch(O){I.error("Failed to load backup logs"),console.error("Load logs error:",O)}},M=async v=>{try{await Ye.cancel(v),I.success("Backup cancellation requested"),ge()}catch(O){I.error("Failed to cancel backup"),console.error("Cancel backup error:",O)}},be=async()=>{try{const v=await ye.validateFields();T?I.info("Backup update not implemented yet"):(await Ye.create(v),I.success("Backup created successfully")),f(!1),ge()}catch(v){I.error("Failed to save backup"),console.error("Save backup error:",v)}},y=async()=>{try{const v=await Ce.validateFields();S?(await mt.update(S.id,v),I.success("Backup schedule updated successfully")):(await mt.create(v),I.success("Backup schedule created successfully")),D(!1),ge()}catch(v){I.error("Failed to save backup schedule"),console.error("Save schedule error:",v)}},V=async()=>{if(g)try{const v=await Je.validateFields(),O=await Ye.restore(g.id,v);O.success?I.success(`Restore completed: ${O.message}`):I.error(`Restore failed: ${O.message}`),A(!1),ge()}catch(v){I.error("Failed to restore backup"),console.error("Restore error:",v)}},Pt=async v=>{try{v.isActive?(await mt.disable(v.id),I.success("Backup schedule disabled")):(await mt.enable(v.id),I.success("Backup schedule enabled")),ge()}catch(O){I.error("Failed to toggle schedule status"),console.error("Toggle schedule error:",O)}},Yn=v=>{switch(v){case le.Completed:return"green";case le.InProgress:return"blue";case le.Pending:return"orange";case le.Failed:return"red";case le.Cancelled:return"gray";default:return"default"}},Xn=v=>{switch(v){case le.Completed:return t.jsx(Ve,{});case le.InProgress:return t.jsx(Ns,{});case le.Pending:return t.jsx(Bs,{});case le.Failed:return t.jsx(Nn,{});case le.Cancelled:return t.jsx(Jt,{});default:return null}},qs=v=>{switch(v){case ae.Database:return t.jsx(Ne,{});case ae.Files:return t.jsx(Gt,{});case ae.FullServer:return t.jsx(so,{});case ae.Website:return t.jsx(it,{});case ae.Email:return t.jsx(nt,{});default:return t.jsx(Gt,{})}},er=v=>{if(!v)return"N/A";const O=["B","KB","MB","GB","TB"],Re=Math.floor(Math.log(v)/Math.log(1024));return`${(v/Math.pow(1024,Re)).toFixed(2)} ${O[Re]}`},tr=[{title:"Name",dataIndex:"name",key:"name",render:(v,O)=>t.jsxs(W,{children:[qs(O.type),v]}),sorter:(v,O)=>v.name.localeCompare(O.name)},{title:"Type",dataIndex:"type",key:"type",render:v=>t.jsx(J,{color:"blue",children:v}),filters:Object.values(ae).map(v=>({text:v,value:v})),onFilter:(v,O)=>O.type===v},{title:"Status",dataIndex:"status",key:"status",render:v=>t.jsx(J,{color:Yn(v),icon:Xn(v),children:v}),filters:Object.values(le).map(v=>({text:v,value:v})),onFilter:(v,O)=>O.status===v},{title:"Size",dataIndex:"fileSizeInBytes",key:"fileSizeInBytes",render:v=>er(v),sorter:(v,O)=>(v.fileSizeInBytes||0)-(O.fileSizeInBytes||0)},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:v=>new Date(v).toLocaleString(),sorter:(v,O)=>new Date(v.createdAt).getTime()-new Date(O.createdAt).getTime()},{title:"Actions",key:"actions",render:(v,O)=>{const Re=[{key:"download",icon:t.jsx(fr,{}),label:"Download",onClick:()=>Pe(O),disabled:O.status!==le.Completed},{key:"restore",icon:t.jsx(Qe,{}),label:"Restore",onClick:()=>ht(O),disabled:O.status!==le.Completed},{key:"logs",icon:t.jsx(Gt,{}),label:"View Logs",onClick:()=>x(O)},{key:"cancel",icon:t.jsx(Jt,{}),label:"Cancel",onClick:()=>M(O.id),disabled:O.status!==le.InProgress&&O.status!==le.Pending}];return t.jsxs(W,{size:"small",children:[t.jsx(Es,{menu:{items:Re},trigger:["click"],children:t.jsx($,{type:"text",icon:t.jsx(Hn,{})})}),t.jsx(Ee,{title:"Delete Backup",description:"Are you sure you want to delete this backup?",onConfirm:()=>At(O.id),okText:"Yes",cancelText:"No",children:t.jsx($,{type:"text",danger:!0,icon:t.jsx(Ae,{}),title:"Delete Backup"})})]})}}],sr=[{title:"Name",dataIndex:"name",key:"name",render:(v,O)=>t.jsxs(W,{children:[qs(O.backupType),v]}),sorter:(v,O)=>v.name.localeCompare(O.name)},{title:"Type",dataIndex:"backupType",key:"backupType",render:v=>t.jsx(J,{color:"blue",children:v})},{title:"Schedule",dataIndex:"scheduleExpression",key:"scheduleExpression",render:v=>t.jsxs(he,{title:`Cron: ${v}`,children:[t.jsx(Ns,{})," ",v]})},{title:"Status",dataIndex:"isActive",key:"isActive",render:v=>t.jsx(J,{color:v?"green":"red",children:v?"Active":"Inactive"})},{title:"Next Run",dataIndex:"nextRunAt",key:"nextRunAt",render:v=>v?new Date(v).toLocaleString():"N/A"},{title:"Actions",key:"actions",render:(v,O)=>t.jsxs(W,{size:"small",children:[t.jsx($,{type:"text",icon:O.isActive?t.jsx(Jt,{}):t.jsx(Vn,{}),onClick:()=>Pt(O),title:O.isActive?"Disable Schedule":"Enable Schedule"}),t.jsx($,{type:"text",icon:t.jsx(ct,{}),onClick:()=>Et(O),title:"Edit Schedule"}),t.jsx(Ee,{title:"Delete Schedule",description:"Are you sure you want to delete this backup schedule?",onConfirm:()=>ut(O.id),okText:"Yes",cancelText:"No",children:t.jsx($,{type:"text",danger:!0,icon:t.jsx(Ae,{}),title:"Delete Schedule"})})]})}];return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsx(Il,{level:2,style:{margin:0},children:"Backup Management"}),t.jsxs(W,{children:[t.jsx($,{icon:t.jsx(Qe,{}),onClick:ge,loading:u,children:"Refresh"}),t.jsx($,{type:"primary",icon:t.jsx(Te,{}),onClick:It,children:"Create Backup"})]})]}),_t&&t.jsx(me,{message:"API Connection Issue",description:"Unable to connect to API. Showing sample data for demonstration.",type:"warning",showIcon:!0,style:{marginBottom:"16px"},closable:!0}),t.jsxs(yt,{activeKey:Ct,onChange:kt,children:[t.jsx(wn,{tab:"Backups",children:t.jsx(U,{children:t.jsx(fe,{columns:tr,dataSource:s,rowKey:"id",loading:u,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(v,O)=>`${O[0]}-${O[1]} of ${v} backups`}})})},"backups"),t.jsxs(wn,{tab:"Schedules",children:[t.jsx("div",{style:{marginBottom:"16px"},children:t.jsx($,{type:"primary",icon:t.jsx(Te,{}),onClick:Fe,children:"Create Schedule"})}),t.jsx(U,{children:t.jsx(fe,{columns:sr,dataSource:n,rowKey:"id",loading:u,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(v,O)=>`${O[0]}-${O[1]} of ${v} schedules`}})})]},"schedules")]}),t.jsx(ie,{title:T?"Edit Backup":"Create New Backup",open:_,onOk:be,onCancel:()=>f(!1),width:600,children:t.jsxs(b,{form:ye,layout:"vertical",initialValues:{isCompressed:!0,isEncrypted:!1,retentionDays:30},children:[t.jsx(b.Item,{name:"name",label:"Backup Name",rules:[{required:!0,message:"Please enter backup name"}],children:t.jsx(L,{placeholder:"Enter backup name"})}),t.jsx(b.Item,{name:"description",label:"Description",children:t.jsx(jn,{placeholder:"Enter backup description",rows:3})}),t.jsx(b.Item,{name:"type",label:"Backup Type",rules:[{required:!0,message:"Please select backup type"}],children:t.jsxs(q,{placeholder:"Select backup type",children:[t.jsx(oe,{value:ae.Database,children:"Database"}),t.jsx(oe,{value:ae.Files,children:"Files"}),t.jsx(oe,{value:ae.FullServer,children:"Full Server"}),t.jsx(oe,{value:ae.Website,children:"Website"}),t.jsx(oe,{value:ae.Email,children:"Email"})]})}),t.jsx(b.Item,{name:"serverId",label:"Server",children:t.jsx(q,{placeholder:"Select server (optional)",children:i.map(v=>t.jsx(oe,{value:v.id,children:v.name},v.id))})}),t.jsx(b.Item,{name:"databaseId",label:"Database",children:t.jsx(q,{placeholder:"Select database (optional)",children:o.map(v=>t.jsx(oe,{value:v.id,children:v.name},v.id))})}),t.jsx(b.Item,{name:"domainId",label:"Domain",children:t.jsx(q,{placeholder:"Select domain (optional)",children:l.map(v=>t.jsx(oe,{value:v.id,children:v.domainName},v.id))})}),t.jsx(b.Item,{name:"backupPath",label:"Backup Path",children:t.jsx(L,{placeholder:"Enter backup path (optional)"})}),t.jsx(b.Item,{name:"isCompressed",label:"Compress Backup",valuePropName:"checked",children:t.jsx(Le,{})}),t.jsx(b.Item,{name:"isEncrypted",label:"Encrypt Backup",valuePropName:"checked",children:t.jsx(Le,{})}),t.jsx(b.Item,{name:"retentionDays",label:"Retention Days",rules:[{required:!0,message:"Please enter retention days"}],children:t.jsx(L,{type:"number",placeholder:"30"})})]})}),t.jsx(ie,{title:S?"Edit Backup Schedule":"Create New Backup Schedule",open:E,onOk:y,onCancel:()=>D(!1),width:600,children:t.jsxs(b,{form:Ce,layout:"vertical",initialValues:{isCompressed:!0,isEncrypted:!1,retentionDays:30,isActive:!0,scheduleExpression:"0 2 * * *"},children:[t.jsx(b.Item,{name:"name",label:"Schedule Name",rules:[{required:!0,message:"Please enter schedule name"}],children:t.jsx(L,{placeholder:"Enter schedule name"})}),t.jsx(b.Item,{name:"description",label:"Description",children:t.jsx(jn,{placeholder:"Enter schedule description",rows:3})}),t.jsx(b.Item,{name:"backupType",label:"Backup Type",rules:[{required:!0,message:"Please select backup type"}],children:t.jsxs(q,{placeholder:"Select backup type",children:[t.jsx(oe,{value:ae.Database,children:"Database"}),t.jsx(oe,{value:ae.Files,children:"Files"}),t.jsx(oe,{value:ae.FullServer,children:"Full Server"}),t.jsx(oe,{value:ae.Website,children:"Website"}),t.jsx(oe,{value:ae.Email,children:"Email"})]})}),t.jsx(b.Item,{name:"scheduleExpression",label:"Schedule (Cron Expression)",rules:[{required:!0,message:"Please enter cron expression"}],children:t.jsx(L,{placeholder:"0 2 * * * (daily at 2 AM)"})}),t.jsx(b.Item,{name:"serverId",label:"Server",children:t.jsx(q,{placeholder:"Select server (optional)",children:i.map(v=>t.jsx(oe,{value:v.id,children:v.name},v.id))})}),t.jsx(b.Item,{name:"databaseId",label:"Database",children:t.jsx(q,{placeholder:"Select database (optional)",children:o.map(v=>t.jsx(oe,{value:v.id,children:v.name},v.id))})}),t.jsx(b.Item,{name:"domainId",label:"Domain",children:t.jsx(q,{placeholder:"Select domain (optional)",children:l.map(v=>t.jsx(oe,{value:v.id,children:v.domainName},v.id))})}),t.jsx(b.Item,{name:"backupPath",label:"Backup Path",children:t.jsx(L,{placeholder:"Enter backup path (optional)"})}),t.jsx(b.Item,{name:"isCompressed",label:"Compress Backup",valuePropName:"checked",children:t.jsx(Le,{})}),t.jsx(b.Item,{name:"isEncrypted",label:"Encrypt Backup",valuePropName:"checked",children:t.jsx(Le,{})}),t.jsx(b.Item,{name:"retentionDays",label:"Retention Days",rules:[{required:!0,message:"Please enter retention days"}],children:t.jsx(L,{type:"number",placeholder:"30"})}),t.jsx(b.Item,{name:"isActive",label:"Active",valuePropName:"checked",children:t.jsx(Le,{})})]})}),t.jsx(ie,{title:`Restore Backup: ${g?.name}`,open:j,onOk:V,onCancel:()=>A(!1),width:500,children:t.jsxs(b,{form:Je,layout:"vertical",initialValues:{overwriteExisting:!1},children:[t.jsx(me,{message:"Warning",description:"Restoring a backup will overwrite existing data. Make sure you have a backup of your current data.",type:"warning",showIcon:!0,style:{marginBottom:"16px"}}),t.jsx(b.Item,{name:"restorePath",label:"Restore Path",children:t.jsx(L,{placeholder:"Enter restore path (optional)"})}),t.jsx(b.Item,{name:"overwriteExisting",label:"Overwrite Existing Files",valuePropName:"checked",children:t.jsx(Le,{})})]})}),t.jsx(ie,{title:`Backup Logs: ${g?.name}`,open:F,onCancel:()=>P(!1),footer:null,width:800,children:t.jsx(fe,{columns:[{title:"Timestamp",dataIndex:"timestamp",key:"timestamp",render:v=>new Date(v).toLocaleString(),width:180},{title:"Level",dataIndex:"level",key:"level",render:v=>t.jsx(J,{color:v==="Error"?"red":v==="Warning"?"orange":"blue",children:v}),width:80},{title:"Message",dataIndex:"message",key:"message"}],dataSource:k,rowKey:"id",pagination:{pageSize:20,showSizeChanger:!0},scroll:{y:400}})})]})},{TabPane:$t}=yt,{Option:et}=q,Al=()=>{const[s,e]=c.useState([]),[n,r]=c.useState([]),[i,a]=c.useState(null),[o,d]=c.useState(!1),[l,h]=c.useState(!1),[u,p]=c.useState(null),[_]=b.useForm(),[f,E]=c.useState(null),[D,j]=c.useState([]),[A,F]=c.useState([]),[P,T]=c.useState(!1),[C,S]=c.useState(!1),[m,g]=c.useState("acknowledge"),[B]=b.useForm();c.useEffect(()=>{k(),N(),ye()},[]);const k=async()=>{try{const y=await Tt.getAll();e(y)}catch{I.error("Failed to load alert rules")}},N=async()=>{try{const y=await De.getAll();r(y)}catch{I.error("Failed to load alerts")}},ye=async()=>{try{const y=await De.getStats();a(y)}catch{I.error("Failed to load alert statistics")}},Ce=async y=>{try{d(!0),await Tt.create(y),I.success("Alert rule created successfully"),h(!1),_.resetFields(),k()}catch{I.error("Failed to create alert rule")}finally{d(!1)}},Je=async(y,V)=>{try{d(!0),await Tt.update(y,V),I.success("Alert rule updated successfully"),h(!1),p(null),_.resetFields(),k()}catch{I.error("Failed to update alert rule")}finally{d(!1)}},_t=async y=>{try{await Tt.delete(y),I.success("Alert rule deleted successfully"),k()}catch{I.error("Failed to delete alert rule")}},dt=async y=>{try{await Tt.test(y),I.success("Test alert created successfully"),N()}catch{I.error("Failed to test alert rule")}},Ct=async y=>{E(n.find(V=>V.id===y)||null),g("acknowledge"),S(!0)},kt=async y=>{E(n.find(V=>V.id===y)||null),g("resolve"),S(!0)},ge=async()=>{if(f)try{const V=(await B.validateFields()).comment?.trim();m==="acknowledge"?(await De.acknowledgeWithComment(f.id,V,"User"),I.success("Alert acknowledged successfully")):(await De.resolveWithComment(f.id,V,"User"),I.success("Alert resolved successfully")),S(!1),B.resetFields(),N(),ye()}catch{I.error(`Failed to ${m} alert`)}},It=async y=>{E(y);try{const[V,Pt]=await Promise.all([De.getHistory(y.id),De.getComments(y.id)]);j(V),F(Pt),T(!0)}catch{I.error("Failed to load alert history")}},Fe=async(y,V)=>{try{await De.addComment(y,V,"General","User");const Pt=await De.getComments(y);F(Pt),I.success("Comment added successfully")}catch{I.error("Failed to add comment")}},Et=async()=>{try{await De.evaluate(),I.success("Alert rules evaluated successfully"),N(),ye()}catch{I.error("Failed to evaluate alert rules")}},At=()=>{p(null),_.resetFields(),h(!0)},ut=y=>{p(y),_.setFieldsValue({name:y.name,description:y.description,type:y.type,serverId:y.serverId,metricName:y.metricName,condition:y.condition,threshold:y.threshold,severity:y.severity,enabled:y.enabled,cooldownMinutes:y.cooldownMinutes,notificationChannels:y.notificationChannels,webhookUrl:y.webhookUrl,emailRecipients:y.emailRecipients,slackWebhookUrl:y.slackWebhookUrl}),h(!0)},ht=async()=>{try{const y=await _.validateFields();u?await Je(u.id,y):await Ce(y)}catch{}},Pe=y=>{switch(y){case gt.Critical:return"red";case gt.Warning:return"orange";case gt.Info:return"blue";default:return"default"}},x=y=>{switch(y){case tt.Active:return"red";case tt.Acknowledged:return"orange";case tt.Resolved:return"green";default:return"default"}},M=[{title:"Name",dataIndex:"name",key:"name"},{title:"Type",dataIndex:"type",key:"type",render:y=>t.jsx(J,{children:y})},{title:"Severity",dataIndex:"severity",key:"severity",render:y=>t.jsx(J,{color:Pe(y),children:y})},{title:"Enabled",dataIndex:"enabled",key:"enabled",render:y=>t.jsx(Le,{checked:y,disabled:!0,size:"small"})},{title:"Actions",key:"actions",render:(y,V)=>t.jsxs(W,{children:[t.jsx(he,{title:"Edit",children:t.jsx($,{icon:t.jsx(ct,{}),onClick:()=>ut(V),size:"small"})}),t.jsx(he,{title:"Test",children:t.jsx($,{icon:t.jsx(un,{}),onClick:()=>dt(V.id),size:"small"})}),t.jsx(Ee,{title:"Delete this alert rule?",onConfirm:()=>_t(V.id),okText:"Yes",cancelText:"No",children:t.jsx($,{icon:t.jsx(Ae,{}),danger:!0,size:"small"})})]})}],be=[{title:"Message",dataIndex:"message",key:"message",ellipsis:!0},{title:"Severity",dataIndex:"severity",key:"severity",render:y=>t.jsx(J,{color:Pe(y),children:y})},{title:"Status",dataIndex:"status",key:"status",render:y=>t.jsx(J,{color:x(y),children:y})},{title:"Server",dataIndex:"serverName",key:"serverName"},{title:"Created",dataIndex:"createdAt",key:"createdAt",render:y=>new Date(y).toLocaleString()},{title:"Actions",key:"actions",render:(y,V)=>t.jsxs(W,{children:[V.status===tt.Active&&t.jsx($,{icon:t.jsx(Ve,{}),onClick:()=>Ct(V.id),size:"small",children:"Acknowledge"}),V.status!==tt.Resolved&&t.jsx($,{icon:t.jsx(Bs,{}),onClick:()=>kt(V.id),size:"small",children:"Resolve"}),t.jsx($,{icon:t.jsx(fn,{}),onClick:()=>It(V),size:"small",children:"History"})]})}];return t.jsxs("div",{style:{padding:"24px"},children:[t.jsx(se,{gutter:[16,16],children:t.jsx(z,{span:24,children:t.jsx(U,{title:t.jsxs(t.Fragment,{children:[t.jsx(Fs,{})," Alert Management"]}),children:t.jsxs(yt,{defaultActiveKey:"overview",children:[t.jsx($t,{tab:"Overview",children:i&&t.jsxs(se,{gutter:16,style:{marginBottom:24},children:[t.jsx(z,{span:4,children:t.jsx(G,{title:"Total Alerts",value:i.totalAlerts,prefix:t.jsx(qn,{})})}),t.jsx(z,{span:4,children:t.jsx(G,{title:"Active",value:i.activeAlerts,valueStyle:{color:"#cf1322"}})}),t.jsx(z,{span:4,children:t.jsx(G,{title:"Critical",value:i.criticalAlerts,valueStyle:{color:"#cf1322"}})}),t.jsx(z,{span:4,children:t.jsx(G,{title:"Warning",value:i.warningAlerts,valueStyle:{color:"#fa8c16"}})}),t.jsx(z,{span:4,children:t.jsx(G,{title:"Acknowledged",value:i.acknowledgedAlerts,valueStyle:{color:"#fa8c16"}})}),t.jsx(z,{span:4,children:t.jsx($,{type:"primary",icon:t.jsx(un,{}),onClick:Et,children:"Evaluate Rules"})})]})},"overview"),t.jsxs($t,{tab:"Alert Rules",children:[t.jsx("div",{style:{marginBottom:16},children:t.jsx($,{type:"primary",icon:t.jsx(Te,{}),onClick:At,children:"Create Alert Rule"})}),t.jsx(fe,{columns:M,dataSource:s,rowKey:"id",loading:o})]},"rules"),t.jsx($t,{tab:"Active Alerts",children:t.jsx(fe,{columns:be,dataSource:n.filter(y=>y.status===tt.Active),rowKey:"id",loading:o})},"alerts"),t.jsx($t,{tab:"All Alerts",children:t.jsx(fe,{columns:be,dataSource:n,rowKey:"id",loading:o})},"all-alerts"),t.jsx($t,{tab:t.jsxs(t.Fragment,{children:[t.jsx(fn,{})," History & Comments"]}),children:t.jsxs("div",{style:{padding:"20px"},children:[t.jsx(_e.Title,{level:4,children:"Alert History & Comments"}),t.jsx(_e.Text,{type:"secondary",children:"Select an alert from the tables above to view its history and add comments."}),f&&t.jsxs("div",{style:{marginTop:"20px"},children:[t.jsxs(U,{title:`Alert ID: ${f.id}`,size:"small",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Message:"})," ",f.message]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Status:"})," ",t.jsx(J,{color:x(f.status),children:f.status})]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Severity:"})," ",t.jsx(J,{color:Pe(f.severity),children:f.severity})]})]}),t.jsx(cs,{}),t.jsxs(se,{gutter:16,children:[t.jsx(z,{span:12,children:t.jsx(U,{title:"History Timeline",size:"small",children:t.jsx(Nt,{children:D.map(y=>t.jsx(Nt.Item,{color:y.action==="Created"?"blue":y.action==="Resolved"?"green":"orange",children:t.jsxs("div",{children:[t.jsx("strong",{children:y.action}),t.jsx("br",{}),t.jsx("small",{children:new Date(y.timestamp).toLocaleString()}),y.description&&t.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:"#666"},children:y.description})]})},y.id))})})}),t.jsx(z,{span:12,children:t.jsxs(U,{title:"Comments",size:"small",children:[t.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:A.map(y=>t.jsxs("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#f9f9f9",borderRadius:"4px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[t.jsx(vs,{size:"small",icon:t.jsx($e,{})}),t.jsx("span",{style:{marginLeft:"8px",fontWeight:"bold"},children:y.createdBy}),t.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#666"},children:new Date(y.createdAt).toLocaleString()})]}),t.jsx("div",{children:y.comment}),y.commentType!=="General"&&t.jsx(J,{style:{marginTop:"4px"},children:y.commentType})]},y.id))}),t.jsx(cs,{}),t.jsxs(b,{layout:"inline",children:[t.jsx(b.Item,{style:{flex:1},children:t.jsx(L.TextArea,{placeholder:"Add a comment...",rows:2,onPressEnter:y=>{y.preventDefault();const V=y.currentTarget.value.trim();V&&f&&(Fe(f.id,V),y.currentTarget.value="")}})}),t.jsx(b.Item,{children:t.jsx($,{type:"primary",icon:t.jsx(dn,{}),onClick:()=>{const y=document.querySelector('textarea[placeholder="Add a comment..."]'),V=y?.value.trim();V&&f&&(Fe(f.id,V),y.value="")},children:"Add"})})]})]})})]})]})]})},"history")]})})})}),t.jsx(ie,{title:u?"Edit Alert Rule":"Create Alert Rule",open:l,onOk:ht,onCancel:()=>{h(!1),p(null),_.resetFields()},width:800,confirmLoading:o,children:t.jsxs(b,{form:_,layout:"vertical",initialValues:{condition:"gt",severity:gt.Warning,enabled:!0,cooldownMinutes:5,notificationChannels:[Is.Email]},children:[t.jsxs(se,{gutter:16,children:[t.jsx(z,{span:12,children:t.jsx(b.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Please enter a name"}],children:t.jsx(L,{placeholder:"Alert rule name"})})}),t.jsx(z,{span:12,children:t.jsx(b.Item,{name:"type",label:"Type",rules:[{required:!0,message:"Please select a type"}],children:t.jsx(q,{placeholder:"Select alert type",children:Object.values(Zn).map(y=>t.jsx(et,{value:y,children:y},y))})})})]}),t.jsx(b.Item,{name:"description",label:"Description",children:t.jsx(L.TextArea,{placeholder:"Optional description",rows:2})}),t.jsxs(se,{gutter:16,children:[t.jsx(z,{span:8,children:t.jsx(b.Item,{name:"condition",label:"Condition",rules:[{required:!0,message:"Please select a condition"}],children:t.jsxs(q,{children:[t.jsx(et,{value:"gt",children:"Greater than"}),t.jsx(et,{value:"lt",children:"Less than"}),t.jsx(et,{value:"eq",children:"Equal to"}),t.jsx(et,{value:"ne",children:"Not equal to"})]})})}),t.jsx(z,{span:8,children:t.jsx(b.Item,{name:"threshold",label:"Threshold",rules:[{required:!0,message:"Please enter a threshold"}],children:t.jsx(L,{type:"number",placeholder:"Threshold value"})})}),t.jsx(z,{span:8,children:t.jsx(b.Item,{name:"severity",label:"Severity",rules:[{required:!0,message:"Please select severity"}],children:t.jsx(q,{children:Object.values(gt).map(y=>t.jsx(et,{value:y,children:y},y))})})})]}),t.jsxs(se,{gutter:16,children:[t.jsx(z,{span:8,children:t.jsx(b.Item,{name:"enabled",label:"Enabled",valuePropName:"checked",children:t.jsx(Le,{})})}),t.jsx(z,{span:8,children:t.jsx(b.Item,{name:"cooldownMinutes",label:"Cooldown (minutes)",rules:[{required:!0,message:"Please enter cooldown minutes"}],children:t.jsx(L,{type:"number",min:1})})}),t.jsx(z,{span:8,children:t.jsx(b.Item,{name:"notificationChannels",label:"Notification Channels",rules:[{required:!0,message:"Please select notification channels"}],children:t.jsx(q,{mode:"multiple",placeholder:"Select channels",children:Object.values(Is).map(y=>t.jsx(et,{value:y,children:y},y))})})})]}),t.jsx(b.Item,{name:"webhookUrl",label:"Webhook URL",children:t.jsx(L,{placeholder:"https://example.com/webhook"})}),t.jsx(b.Item,{name:"emailRecipients",label:"Email Recipients",children:t.jsx(q,{mode:"tags",placeholder:"Enter email addresses"})}),t.jsx(b.Item,{name:"slackWebhookUrl",label:"Slack Webhook URL",children:t.jsx(L,{placeholder:"https://hooks.slack.com/..."})})]})}),t.jsxs(ie,{title:`${m==="acknowledge"?"Acknowledge":"Resolve"} Alert`,open:C,onOk:ge,onCancel:()=>{S(!1),B.resetFields()},confirmLoading:o,children:[f&&t.jsxs("div",{style:{marginBottom:"16px"},children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Alert:"})," ",f.message]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Current Status:"})," ",t.jsx(J,{color:x(f.status),children:f.status})]})]}),t.jsx(b,{form:B,layout:"vertical",children:t.jsx(b.Item,{name:"comment",label:`Comment (optional) - Why are you ${m==="acknowledge"?"acknowledging":"resolving"} this alert?`,children:t.jsx(L.TextArea,{placeholder:`Add a comment about ${m==="acknowledge"?"acknowledging":"resolving"} this alert...`,rows:3})})})]}),t.jsx(ie,{title:"Alert History & Comments",open:P,onCancel:()=>T(!1),width:1e3,footer:null,children:f&&t.jsxs("div",{children:[t.jsxs(U,{title:`Alert ID: ${f.id}`,size:"small",style:{marginBottom:"16px"},children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Message:"})," ",f.message]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Status:"})," ",t.jsx(J,{color:x(f.status),children:f.status})]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Severity:"})," ",t.jsx(J,{color:Pe(f.severity),children:f.severity})]})]}),t.jsxs(se,{gutter:16,children:[t.jsx(z,{span:12,children:t.jsx(U,{title:"History Timeline",size:"small",children:t.jsx(Nt,{children:D.map(y=>t.jsx(Nt.Item,{color:y.action==="Created"?"blue":y.action==="Resolved"?"green":"orange",children:t.jsxs("div",{children:[t.jsx("strong",{children:y.action}),t.jsx("br",{}),t.jsx("small",{children:new Date(y.timestamp).toLocaleString()}),y.description&&t.jsx("div",{style:{marginTop:"4px",fontSize:"12px",color:"#666"},children:y.description})]})},y.id))})})}),t.jsx(z,{span:12,children:t.jsxs(U,{title:"Comments",size:"small",children:[t.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:A.map(y=>t.jsxs("div",{style:{marginBottom:"12px",padding:"8px",backgroundColor:"#f9f9f9",borderRadius:"4px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[t.jsx(vs,{size:"small",icon:t.jsx($e,{})}),t.jsx("span",{style:{marginLeft:"8px",fontWeight:"bold"},children:y.createdBy}),t.jsx("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#666"},children:new Date(y.createdAt).toLocaleString()})]}),t.jsx("div",{children:y.comment}),y.commentType!=="General"&&t.jsx(J,{style:{marginTop:"4px"},children:y.commentType})]},y.id))}),t.jsx(cs,{}),t.jsxs(b,{layout:"inline",children:[t.jsx(b.Item,{style:{flex:1},children:t.jsx(L.TextArea,{placeholder:"Add a comment...",rows:2,onPressEnter:y=>{y.preventDefault();const V=y.currentTarget.value.trim();V&&f&&(Fe(f.id,V),y.currentTarget.value="")}})}),t.jsx(b.Item,{children:t.jsx($,{type:"primary",icon:t.jsx(dn,{}),onClick:()=>{const y=document.querySelector('textarea[placeholder="Add a comment..."]'),V=y?.value.trim();V&&f&&(Fe(f.id,V),y.value="")},children:"Add"})})]})]})})]})]})})]})},{Content:Pl}=Ft;function Rl(){const[s,e]=c.useState(!1);return t.jsxs(Ft,{style:{minHeight:"100vh"},children:[t.jsx(vo,{collapsed:s,setCollapsed:e}),t.jsxs(Ft,{style:{marginLeft:s?80:200,transition:"margin-left 0.2s"},children:[t.jsx(bo,{collapsed:s,setCollapsed:e}),t.jsx(Pl,{style:{padding:"24px",backgroundColor:"#f0f2f5",minHeight:"calc(100vh - 64px)"},children:t.jsxs(Mn,{children:[t.jsx(ce,{path:"/",element:t.jsx(we,{children:t.jsx(bn,{})})}),t.jsx(ce,{path:"/dashboard",element:t.jsx(we,{children:t.jsx(bn,{})})}),t.jsx(ce,{path:"/servers",element:t.jsx(we,{children:t.jsx(pl,{})})}),t.jsx(ce,{path:"/domains",element:t.jsx(we,{children:t.jsx(gl,{})})}),t.jsx(ce,{path:"/emails",element:t.jsx(we,{children:t.jsx(kl,{})})}),t.jsx(ce,{path:"/databases",element:t.jsx(we,{children:t.jsx(vl,{})})}),t.jsx(ce,{path:"/files",element:t.jsx(we,{children:t.jsx(wl,{})})}),t.jsx(ce,{path:"/monitoring",element:t.jsx(we,{children:t.jsx(jl,{})})}),t.jsx(ce,{path:"/backups",element:t.jsx(we,{children:t.jsx(El,{})})}),t.jsx(ce,{path:"/alerts",element:t.jsx(we,{children:t.jsx(Al,{})})}),t.jsx(ce,{path:"/users",element:t.jsx(Hi,{children:t.jsx(Sl,{})})}),t.jsx(ce,{path:"/ssl-certificates",element:t.jsx(we,{children:t.jsx(_l,{})})})]})})]})]})}function Dl(){return t.jsx(Ni,{children:t.jsxs(Mn,{children:[t.jsx(ce,{path:"/login",element:t.jsx(jo,{})}),t.jsx(ce,{path:"/register",element:t.jsx(_o,{})}),t.jsx(ce,{path:"/*",element:t.jsx(Rl,{})})]})})}const Ml=new zi({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:300*1e3}}});wr.createRoot(document.getElementById("root")).render(t.jsx(pr.StrictMode,{children:t.jsx(qi,{client:Ml,children:t.jsx(mr,{theme:{algorithm:gr.darkAlgorithm,token:{colorPrimary:"#1890ff"}},children:t.jsx(vi,{children:t.jsx(Dl,{})})})})}));
